<?xml version="1.0" encoding="utf-8"?>
<!--window.external.doEvents()在某些电脑上crash，因此不置-->
<patterns date="2023.10.11">
    <item domain="google">
        <url><![CDATA[google\.com(?:\.\w+)?/search\?.*?tbm=vid]]></url>
        <title><![CDATA[<title>(.*)\s+-\s+[^<]+</title>]]></title>
        <content><![CDATA[(?is)<div\s+class="g">.*?<a\s+href="(?<url>[^"]+).*?<h3[^>]+><span>(?<title>[^<]+).*?<span[^>]*>.*?<div[^>]+>(?<duration>[^<]*)</div></a>.*?<div.*?<div[^>]+>(?<date>[^·<]+)]]></content>
    </item>
    <item domain="bing">
        <url><![CDATA[bing\.com/videos/search\?.*?q=[^$]+]]></url>
        <title><![CDATA[<title>(.*)\s+-\s+[^<]+</title>]]></title>
        <content><![CDATA[(?is)<div\s+class="dg[^"]*?".*?<a.*?href="(?<url>[^"]+)".*?(?<duration>\d+:[^<]+).*?<strong>(?<title>[^<]+)]]></content>
    </item>
    <item domain="baidu">
        <url><![CDATA[baidu\.com/sf/vsearch\?.*?pd=video]]></url>
        <title><![CDATA[query\s+:\s+"([^"]+)"]]></title>
        <content><![CDATA[(?is)<div\s+class="video_list.*?href="(?<url>[^"]+).*?video_play_timer">(?<duration>(?:[^<]+)?).*?video-title[^>]+>(?<title>.+?)</a>.*?发布时间：(?<date>[^<]+)]]></content>
    </item>
    <item domain="yahoo">
        <url><![CDATA[yahoo\.com/search/video]]></url>
        <title><![CDATA[<title>(.*)\s+-\s+[^<]+</title>]]></title>
        <content><![CDATA[(?is)<li\s+class="vr[^"]*?".*?data-rurl="(?<url>[^"]+).*?<img\s+src="(?<thumbnail>[^"]+).*?v-time.*?>(?<duration>[^<]+).*?<h3[^>]*>(?<title>.+?)</h3>.*?</li>]]></content>
    </item>
    <item domain="yandex">
        <url><![CDATA[yandex\.\w+/video/search\?.*?text=[^&]+]]></url>
        <title><![CDATA["query":"([^"]+)]]></title>
        <content><![CDATA[(?is)<img.*?thumb-image__image"\s+src="(?<thumbnail>[^"]+).*?meta-badge__duration[^>]+>(?<duration>[^<]+).*?serp-item__title[^>]+>(?<title>.*?)</a>.*?noopener".*?href="(?<url>[^"]+)]]></content>
    </item>
    <item domain="yandex" crpj="true" delegate="true">
        <url><![CDATA[yandex\.\w+/id/(?<id>[^\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://zen.yandex.ru/id/5dadcc53bc251400ae3f0b4d?lang=ru
                var html = window.external.getHtmlCode(window.external.url);
                if (html.indexOf('\"exportData\"') != -1) {
                    var data = html.substring(html.indexOf('\"exportData\"') + 13, html.lastIndexOf('},\"channel\"') + 1);
                    var jo = JSON.parse(data);
                    var title = '', html = '';
                    for (var i = 0; i <= jo.items.length - 1; i++) {
                        var item = jo.items[i];
                        if (!title)
                            title = item.domainTitle;
                        var duration = item.video ? item.video.duration : 0;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.link + '\",duration:' + duration + ',date:' + item.publicationDate + ';\r\n';
                    }
                    var more_link = jo.more.link;
                    var p = 0;
                    while (more_link) {
                        if (p > 9)
                            break;
                        data = window.external.getHtmlCode(more_link);
                        if (data.indexOf('items') == -1)
                            break;

                        jo = JSON.parse(data);
                        for (var i = 0; i <= jo.items.length - 1; i++) {
                            var item = jo.items[i];
                            var duration = item.video ? item.video.duration : 0;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.link + '\",duration:' + duration + ',date:' + item.publication_date + ';\r\n';
                        }
                        more_link = jo.more.link;
                        p++;
                    }

                    html = 'title:\"' + title + '\"$' + html;
                    window.external.receive(html);
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ask">
        <url><![CDATA[ask\.com/youtube\?.*?q=[^$]+]]></url>
        <title><![CDATA["query":"([^"]+)"]]></title>
        <content><![CDATA[(?is)<a\s+id=.*?href='//(?<url>[^']+).*?title="(?<title>[^"]+).*?<img\s+src="(?<thumbnail>[^"]+).*?Published in : (?<date>[^<]+)]]></content>
    </item>
    <item domain="sogou">
        <url><![CDATA[sogou\.com/v\?.*?query=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <baseUrl><![CDATA[https?://[^/]+]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://v.sogou.com/v?query=%E6%98%A5%E5%A4%A9%E7%9A%84%E6%B2%B9%E8%8F%9C%E8%8A%B1&typemask=6&p=40230608&w=06009900&dp=1&dr=&_asf=v.sogou.com&_ast=1625271215603&enter=1&ie=utf8
                var query = window.location.href.match(/query=([^&]+)/)[1];
                var api_url = 'https://v.sogou.com/api/video/shortVideo?query=' + query + '&pagesize=20&page=';
                var title = window.decodeURIComponent(query);
                var html = 'title:\"' + title + '\"$'
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('\"list\":') == -1 || p > 199)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        html += 'v_title:\"' + item.titleEsc.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",duration:' + item.duration + ',date:' + item.date + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu">
        <url><![CDATA[//v.baidu\.com/v\?.*?]]></url>
        <title><![CDATA[wd:\s+'([^']+)']]></title>
        <content><![CDATA[(?is)<li\s+class="result".*?".*?<a.*?href="(?<url>[^"]+)".*?title="(?<title>[^"]+).*?<img[^>]+src="(?<thumbnail>[^"]+).*?<span\s+class="info">(?<duration>(?:[^<]+)?)</span>]]></content>
        <baseUrl><![CDATA[https?://[^/]+]]></baseUrl>
    </item>
    <item domain="baidu">
        <url><![CDATA[(?:haokan|baiduworld)\.baidu\.com/web/search/.*?query=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://haokan.baidu.com/web/search/page?query=%E6%B2%B9%E8%8F%9C%E8%8A%B1&sfrom=recommend
                var url = window.external.url;
                var qw = url.match(/query=([^&]+)/)[1];
                var base_url = 'https://haokan.baidu.com/haokan/ui-search/pc/search/video?rn=10&type=video&query=' + qw + '&version=1&timestamp=';
                var title = decodeURIComponent(qw);
                var html = 'title:\"' + title + '\"$';
                var cookie = window.external.getCookieEx(url, 'BAIDUID');
                var headers = 'Referer: ' + url + '\r\nCookie: ' + cookie;
                var p = parseInt(window.external.sp) || 1;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var t = Date.now();
                    var sa = [p, encodeURIComponent(title), 10, t, 1].join('_');
                    var api_url = base_url + t + '&pn=' + p + '&sign=' + _sign(sa);
                    var data = window.external.getHtmlCodeEx(api_url, headers, 200);
                    if (data.indexOf('list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",duration:' + item.duration + ',date:' + item.publishTimeText + ',play:' + item.read_num.replace('次播放', '') + ';\r\n';
                    }
                    if (!jo.data.has_more || p > 199)
                    {
                        hasMore = false;
                        break;
                    }
                    p++;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);

                //...
                function _sign(e){
                    return _p(m(e));
                    function o(e,t){var c=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(c>>16)<<16|65535&c}
                    function _i(e,t,c,n,r,i){return o((a=o(o(t,e),o(n,i)))<<(l=r)|a>>>32-l,c);var a,l}
                    function a(e,t,c,n,r,o,a){return _i(t&c|~t&n,e,t,r,o,a)}
                    function l(e,t,c,n,r,o,a){return _i(t&n|c&~n,e,t,r,o,a)}
                    function s(e,t,c,n,r,o,a){return _i(t^c^n,e,t,r,o,a)}
                    function u(e,t,c,n,r,o,a){return _i(c^(t|~n),e,t,r,o,a)}
                    function h(e,t){var c,n,r,i,h;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var v=1732584193,f=-271733879,p=-1732584194,d=271733878;for(c=0;c<e.length;c+=16)
                    n=v,r=f,i=p,h=d,v=a(v,f,p,d,e[c],7,-680876936),d=a(d,v,f,p,e[c+1],12,-389564586),p=a(p,d,v,f,e[c+2],17,606105819),f=a(f,p,d,v,e[c+3],22,-1044525330),v=a(v,f,p,d,e[c+4],7,-176418897),d=a(d,v,f,p,e[c+5],12,1200080426),p=a(p,d,v,f,e[c+6],17,-1473231341),f=a(f,p,d,v,e[c+7],22,-45705983),v=a(v,f,p,d,e[c+8],7,1770035416),d=a(d,v,f,p,e[c+9],12,-1958414417),p=a(p,d,v,f,e[c+10],17,-42063),f=a(f,p,d,v,e[c+11],22,-1990404162),v=a(v,f,p,d,e[c+12],7,1804603682),d=a(d,v,f,p,e[c+13],12,-40341101),p=a(p,d,v,f,e[c+14],17,-1502002290),v=l(v,f=a(f,p,d,v,e[c+15],22,1236535329),p,d,e[c+1],5,-165796510),d=l(d,v,f,p,e[c+6],9,-1069501632),p=l(p,d,v,f,e[c+11],14,643717713),f=l(f,p,d,v,e[c],20,-373897302),v=l(v,f,p,d,e[c+5],5,-701558691),d=l(d,v,f,p,e[c+10],9,38016083),p=l(p,d,v,f,e[c+15],14,-660478335),f=l(f,p,d,v,e[c+4],20,-405537848),v=l(v,f,p,d,e[c+9],5,568446438),d=l(d,v,f,p,e[c+14],9,-1019803690),p=l(p,d,v,f,e[c+3],14,-187363961),f=l(f,p,d,v,e[c+8],20,1163531501),v=l(v,f,p,d,e[c+13],5,-1444681467),d=l(d,v,f,p,e[c+2],9,-51403784),p=l(p,d,v,f,e[c+7],14,1735328473),v=s(v,f=l(f,p,d,v,e[c+12],20,-1926607734),p,d,e[c+5],4,-378558),d=s(d,v,f,p,e[c+8],11,-2022574463),p=s(p,d,v,f,e[c+11],16,1839030562),f=s(f,p,d,v,e[c+14],23,-35309556),v=s(v,f,p,d,e[c+1],4,-1530992060),d=s(d,v,f,p,e[c+4],11,1272893353),p=s(p,d,v,f,e[c+7],16,-155497632),f=s(f,p,d,v,e[c+10],23,-1094730640),v=s(v,f,p,d,e[c+13],4,681279174),d=s(d,v,f,p,e[c],11,-358537222),p=s(p,d,v,f,e[c+3],16,-722521979),f=s(f,p,d,v,e[c+6],23,76029189),v=s(v,f,p,d,e[c+9],4,-640364487),d=s(d,v,f,p,e[c+12],11,-421815835),p=s(p,d,v,f,e[c+15],16,530742520),v=u(v,f=s(f,p,d,v,e[c+2],23,-995338651),p,d,e[c],6,-198630844),d=u(d,v,f,p,e[c+7],10,1126891415),p=u(p,d,v,f,e[c+14],15,-1416354905),f=u(f,p,d,v,e[c+5],21,-57434055),v=u(v,f,p,d,e[c+12],6,1700485571),d=u(d,v,f,p,e[c+3],10,-1894986606),p=u(p,d,v,f,e[c+10],15,-1051523),f=u(f,p,d,v,e[c+1],21,-2054922799),v=u(v,f,p,d,e[c+8],6,1873313359),d=u(d,v,f,p,e[c+15],10,-30611744),p=u(p,d,v,f,e[c+6],15,-1560198380),f=u(f,p,d,v,e[c+13],21,1309151649),v=u(v,f,p,d,e[c+4],6,-145523070),d=u(d,v,f,p,e[c+11],10,-1120210379),p=u(p,d,v,f,e[c+2],15,718787259),f=u(f,p,d,v,e[c+9],21,-343485551),v=o(v,n),f=o(f,r),p=o(p,i),d=o(d,h);return[v,f,p,d]}
                    function v(e){var t,c='',n=32*e.length;for(t=0;t<n;t+=8)
                    c+=String.fromCharCode(e[t>>5]>>>t%32&255);return c}
                    function f(e){var t,c=[];for(c[(e.length>>2)-1]=void 0,t=0;t<c.length;t+=1)
                    c[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)
                    c[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return c}
                    function _p(e){var t,c,n='';for(c=0;c<e.length;c+=1)
                    t=e.charCodeAt(c),n+='0123456789abcdef'.charAt(t>>>4&15)+'0123456789abcdef'.charAt(15&t);return n}
                    function d(e){return unescape(encodeURIComponent(e))}
                    function m(e){return function(e){return v(h(f(e),8*e.length))}(d(e))}
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu">
        <url><![CDATA[(?:haokan|baiduworld|sv)\.baidu\.com/(?:author/(?<id>[^/?&]+)|.*?author\?app_id=(?<id>\d+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <ckSign><![CDATA[BAIDUID]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://haokan.baidu.com/author/1668044200932811
                //https://haokan.baidu.com/author/c-I3bGTrL7GOjPqAW4mJfQ
                var url = window.external.url;
                var id = url.match(/(?:author\/|=)([^?&]+)/)[1];
                var cookie = window.external.getCookieEx(url, 'BAIDUID', 2500) || document.cookie;
                var headers = 'Referer: ' + url + '\r\nCookie: ' + cookie;
                var title = '', html = '';
                //视频
                var api_url = 'https://haokan.baidu.com/author/' + id + '?_format=json&rn=16&_api=1&ctime=';
                var ct = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 49 : 499;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + ct, headers, 50);
                    if (data.indexOf('results\":[{') == -1) {
                        hasMore = false;
                        break;
                    }
                    var jo = JSON.parse(data);
                    if (!title && jo.data.author_info)
                        title = jo.data.author_info.name;
                    for (var i = 0; i <= jo.data.video.results.length - 1; i++) {
                        var item = jo.data.video.results[i].content;
                        var video_url = 'https://haokan.baidu.com/v?vid=' + item.vid;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.poster + '\",duration:' + item.duration + ',date:' + item.publish_time + ',play:' + item.playcnt + ';\r\n';
                    }
                    if (!jo.data.video.has_more) {
                        hasMore = false;
                        break;
                    }

                    pidx++;
                    ct = jo.data.video.ctime;
                }
                //短视频
                if (!hasMore) {
                    api_url = 'https://haokan.baidu.com/web/author/listall?app_id=' + id + '&video_type=haokan%7CtabhubVideo&ctime=';
                    ct = 0;
                    while (true) {
                        var data = window.external.getHtmlCodeEx(api_url + ct, headers, 50);
                        if (data.indexOf('results\":[{') == -1)
                            break;
                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.data.results.length - 1; i++) {
                            var item = jo.data.results[i].content;
                            var video_url = 'https://haokan.baidu.com/v?vid=' + item.vid;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.poster + '\",duration:' + item.duration + ',date:' + item.publish_time + ',play:' + item.playcnt + ';\r\n';
                        }
                        if (!jo.data.has_more)
                            break;
                        ct = jo.data.ctime;
                    }
                }

                html = 'startPage:' + ct + ',hasMore:' + hasMore + ',' + 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu">
        <url><![CDATA[(?:haokan|baiduworld|sv)\.baidu\.com/.*?vid=([^&#]+).*?#p=\d+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://haokan.baidu.com/v?vid=13061915994560076826#p=0
                //https://haokan.baidu.com/v?vid=10530915345520085905&qq-pf-to=pcqq.temporaryc2c#p=0
                var url = window.external.url;
                var vid = url.match(/vid=([^&]+)/)[1];
                var api_url = 'https://haokan.baidu.com/v?_format=json&vid=' + vid;
                var data = window.external.getHtmlCode(api_url, url);
                var jo = JSON.parse(data);
                var curVideoMeta = jo.data.apiData.curVideoMeta;
                var title = curVideoMeta.column_info.title;
                var html = 'title:\"' + title + '\"$';
                var items = curVideoMeta.column_info.items;
                //var items = window.__PRELOADED_STATE__.curVideoMeta.column_info.items;
                for (var i = 0; i <= items.length - 1; i++) {
                    var item = items[i];
                    var video_url = 'https://haokan.baidu.com/v?vid=' + item.vid;
                    var v_title = item.title;
                    if (item.ext && item.ext.episodes)
                        v_title = item.ext.episodes + ' ' + v_title;
                    html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.poster + '\",duration:' + item.duration + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu" watchList="true">
        <url><![CDATA[(?:haokan|baiduworld|sv)\.baidu\.com/.*?vid=([^&]+).*?&collection_id=([^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)"]]></content>
        <jsCode><![CDATA[
            try {
                //https://haokan.baidu.com/v?vid=17109380699118130618&collection_id=9923978097342804395&
                var url = window.external.url;
                var vid = url.match(/vid=([^&]+)/)[1];
                var api_url = 'https://haokan.baidu.com/v?_format=json&vid=' + vid;
                var data = window.external.getHtmlCode(api_url, url);
                var jo = JSON.parse(data);
                var curVideoMeta = jo.data.apiData.curVideoMeta;
                var title = curVideoMeta.collection_info.title;
                var html = 'title:\"' + title + '\"$';
                var items = curVideoMeta.collection_info.video_info;
                for (var i = 0; i <= items.length - 1; i++) {
                    var item = items[i];
                    var video_url = 'https://haokan.baidu.com/v?vid=' + item.vid;
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.cover_src + '\";\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="hao123" redirect="true">
        <url><![CDATA[(?:haokan|baiduworld|sv)\.hao123\.com/(?:author/(?<id>\d+)|.*?author\?app_id=(?<id>\d+))]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)tplName.*?vid":"(?<url>[^"]+).*?publish_time":"(?<date>[^"]+).*?title":"(?<title>[^"]+).*?duration":"(?<duration>[^"]+).*?playcnt":"(?<play>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://haokan.hao123.com/author/1668044200932811
                var pl_url = window.location.href.replace('hao123', 'baidu');
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu">
        <url><![CDATA[(?:author|baijiahao)\.baidu\.com/(?:home/(?<id>\d+)|u\?app_id=(?<id>\d+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[BAIDUID]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://author.baidu.com/home/1545804016056250
                //https://author.baidu.com/home/1608787013884995
                //https://author.baidu.com/home/1606928674581916 9507
                //https://author.baidu.com/home/1698814359631975
                //https://baijiahao.baidu.com/u?app_id=1760182428476315&qq-pf-to=pcqq.group
                //不直找视频地址，拿高点的分辨率...https不行，用http
                var cookie = window.external.getCookieEx(window.location.href, 'BAIDUID', 1500) || document.cookie;
                var headers = 'User-Agent:  Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36\r\nReferer: ' + window.location.href + '\r\nCookie: ' + cookie;
                var title = document.title, html = '';
                //图片旋转验证
                if (!title) {
                    html = window.external.getHtmlCodeEx(window.external.url, headers);
                    title = html.match(/<title>([^<]*)/)[1];
                }
                html = 'title:\"' + title + '\"$'
                var api_url = 'http://mbd.baidu.com/webpage?tab=shipin&uk=' + window.runtime.user.uk + '&type=newhome&action=dynamic&format=jsonp&ctime=';
                var ct = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 49 : 499;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + ct, headers);
                    //again
                    if (data.indexOf('list\":[{') == -1) {
                        for (var i = 0; i <= 2; i++ ) {
                            data = window.external.getHtmlCodeEx(api_url + ct, headers, 1500);
                            if (data.indexOf('list\":[{') != -1)
                                break;
                        }
                    }
                    if (data.indexOf('list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    data = data.substring(9, data.length - 1);
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i].itemData;
                        var thumbnail = item.poster || item.imgSrc;
                        var video_url = item.video_src && item.video_src.https ? item.video_src.https : item.url;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + item.duration + ',date:' + (item.ctime || item.publish_at) + ';\r\n';
                    }
                    ct = jo.data.query.ctime;
                    pidx++;
                }

                html = 'startPage:' + ct + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu" redirect="true">
        <url><![CDATA[baidu\.com/ug_share/mbox/.*?share_url=[^&]+]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://mr.baidu.com/r/VggfvWDdv2?f=cp&u=7b38072f25ff87a2 -> https://mbd.baidu.com/ug_share/mbox/4a83aa9e65/share?product=default&tk=5ded975f29442229ea19a1e7d2a42def&share_url=https%3A%2F%2Fauthor.baidu.com%2Fhome%3Ftype%3Dprofile%26action%3Dprofile%26mthfr%3Dbox_share%26context%3D%257B%2522uk%2522%253A%2522exE63oaQFaDKmUQkxygzdg%2522%252C%2522from%2522%253A%2522ugc_share%2522%257D&domain=mbd.baidu.com

                //https://mbd.baidu.com/ug_share/mbox/4a83aa9e65/share?product=default&tk=2e3dc323e067083768be7c4686c8d12f&share_url=https%3A%2F%2Fauthor.baidu.com%2Fhome%3Ffrom%3Dfavor%26hdegrade%3D1%26context%3D%7B%22app_id%22%3A%221666088062124283%22%7D%26mthfr%3Dbox_share&domain=mbd.baidu.com
                var pl_url = decodeURIComponent(window.location.href.match(/share_url=([^&]+)/)[1]);
                if (pl_url.indexOf('context=') != -1) {
                    var context = pl_url.match(/context=([^&]+)/)[1];
                    if (context.indexOf('\"') != -1)
                        pl_url = pl_url.substring(0, pl_url.indexOf('context=')) + 'context=' + encodeURIComponent(context);
                }
                //document.body.innerHTML改变&，因此不用它
                window.external.receive('cr_playlist_url=' + pl_url + '$');
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu" delay="4500">
        <url><![CDATA[author\.baidu\.com/.*?context=]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[BAIDUID]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://author.baidu.com/home?context=%7B%22uk%22%3A%22-m1gEP9B1KvVZbxhD9spdA%22%7D
                //https://author.baidu.com/home?from=favor&hdegrade=1&context={"app_id":"1666088062124283"}&mthfr=box_share
                //不能用delegate，其涉及改变太多
                var cookie = window.external.getCookieEx(href, 'BAIDUID', 1500) || window.external.getCookieEx(href, 'H_WISE_SIDS', 1500);
                if (cookie.indexOf('BAIDUID=') != -1)
                    cookie = cookie.match(/BAIDUID=[^;]+/)[0];
                else if (cookie.indexOf('BAIDUID_BFESS=') != -1) {
                    cookie = cookie.match(/BAIDUID_BFESS=[^;]+/)[0];
                    cookie = cookie.replace('_BFESS', '');
                }
                var headers = 'Cookie: ' + cookie + '\r\nReferer: https://author.baidu.com/';
                var title = document.title, html = '';
                //图片旋转验证
                if (!title) {
                    html = window.external.getHtmlCodeEx(window.external.url, headers);
                    title = html.match(/<title>([^<]*)/)[1];
                }
                html = 'title:\"' + title + '\"$'
                var uk = (href.indexOf('uk\"') != -1) ? href.match(/uk\":\"([^\"]+)/)[1] : '';
                if (!uk && document.body.innerHTML.indexOf('uk\"') != -1)
                    uk = document.body.innerHTML.match(/uk\":\"([^\"]+)/)[1];
                var api_url = 'http://mbd.baidu.com/webpage?tab=shipin&num=30&uk=' + uk + '&source=pc&type=newhome&action=dynamic&format=jsonp&ctime=';
                var ct = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 19 : 499;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    //gzip故，须用xhr
                    var data = window.external.getHtmlCodeEx(api_url + ct, headers, 500);
                    if (!data) {
                        var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveObject('Microsoft.XMLHTTP');
                        xhr.open('GET', api_url + ct, false);
                        xhr.setRequestHeader('Cookie', cookie);
                        xhr.send(null);
                        data = xhr.responseText;
                    }
                    if (data.indexOf('list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    data = data.substring(9, data.length - 1);
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i].itemData;
                        var thumbnail = item.poster || item.imgSrc;
                        var video_url = item.video_src && item.video_src.https ? item.video_src.https : item.url;
                        //720p
                        if (item.rmb_videoInfoExt) {
                            var video = JSON.parse(item.rmb_videoInfoExt);
                            if (video.sc)
                                video_url = video.sc.scUrlHttps || video.sc.scUrlHttp;
                        }
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + item.duration + ',date:' + (item.ctime || item.publish_at) + ';\r\n';
                    }
                    if (!jo.data.hasMore) {
                        hasMore = false;
                        break;
                    }
                    ct = jo.data.query.ctime;
                    pidx++;
                }
                html = 'startPage:' + ct + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu" redirect="true">
        <url><![CDATA[author\.baidu\.com/.*?context=.*?app_id%22%3A%22(?<id>\d+)]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[BAIDUID]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://mr.baidu.com/r/kI36kaOglq?f=cp&u=e729fd2b7e2707a6
                //https://mr.baidu.com/r/FaIY6IOm9a?f=cp&u=73bc942bbb0d6edf 却是单个，因此做mr.baidu.com转向
                //https://author.baidu.com/home?type=profile&action=profile&mthfr=box_share&context=%7B%22from%22%3A%22ugc_share%22%2C%22app_id%22%3A%221658243924183102%22%7D
                var pl_url = window.location.href;
                if (window.runtime) {
                    if (window.runtime.app_id)
                        pl_url = 'https://author.baidu.com/home/' + window.runtime.app_id;
                    else if (window.runtime.user)
                        pl_url =  window.runtime.user.home_url
                }
                if (!pl_url) {
                    var href = decodeURIComponent(window.location.href);
                    if (href.match(/(\d{16,})/))
                        pl_url = 'https://author.baidu.com/home/' + href.match(/(\d{16,})/)[1];
                }
                window.external.receive('cr_playlist_url=' + pl_url + '$');
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu" watchList="true" delegate="true">
        <url><![CDATA[https?://baike\.baidu\.com/(?:item/(?<id>[^/?]+)|video.*Id=(?<id>\d+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://baike.baidu.com/item/%E7%A7%91%E5%AD%A6/5400107?fr=aladdin&qq-pf-to=pcqq.c2c
                //https://baike.baidu.com/item/%E8%AF%97%E7%BB%8F%C2%B7%E5%B0%8F%E9%9B%85?fromModule=lemma_search-box
                //https://baike.baidu.com/video?lemmaId=1478&secondId=25831602
                //不直找视频地址，拿高点的分辨率
                var url = window.external.url;
                var lid = url.match(/(?:\/|=)(\d+)/) ? url.match(/(?:\/|=)(\d+)/)[1] : '';
                var html = window.external.getHtmlCode(url);
                var title = html.match(/<title>([^<]+)/)[1].replace('_百度百科', '');
                if (!lid && html.indexOf('data-lemmaid') != -1)
                    lid = html.match(/data-lemmaid=\"([^\"]+)/)[1];
                var api_url = 'https://baike.baidu.com/api/second/video/list?lemmaId=' + lid;
                var data = window.external.getHtmlCode(api_url, url);
                var jo = JSON.parse(data);
                for (var i = 0; i <= jo.data.list.length - 1; i++) {
                    var item = jo.data.list[i].content;
                    //https://baike.baidu.com/video?lemmaId=1478&secondId=25831602
                    if (title == '秒懂百科' && i == 0 && jo.data.list[i].lemmas.length != 0)
                        title = jo.data.list[i].lemmas[0].lemmaTitle;
                    var video_url = item.playUrl.hls || item.playUrl.mp4;
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.cover.url + '\",duration:' + item.duration + ',date:' + jo.data.list[i].publishTime + ',play:' + jo.data.list[i].dynamic.viewCounts + ';\r\n';
                }
                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="baidu" delay="1500">
        <url><![CDATA[baidu\.com/.*?ucenter=ext.*?authorId%2522%253A%2522(?<id>[^%]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <ckSign><![CDATA[BAIDUID]]></ckSign>
        <jsCode><![CDATA[
            try {
                //全民小视频 //https://xspshare.baidu.com/feedvideoui/api?pd=author_share_mvideo&ucenter=ext%3D%257B%2522metiaId%2522%253A%2522V9YgIEvNpT9fOvMzt2ytmA%2522%252C%2522authorType%2522%253A%2522ugc%2522%252C%2522authorId%2522%253A%2522V9YgIEvNpT9fOvMzt2ytmA%2522%257D&qq-pf-to=pcqq.c2c
                //https://quanmin.hao222.com/feedvideoui/api?pd=author_share_mvideo&ucenter=ext%3D%257B%2522metiaId%2522%253A%25221633385804628065%2522%252C%2522authorType%2522%253A%2522media%2522%252C%2522authorId%2522%253A%2522BxN0m77QwlFmtruhiEGUBg%2522%257D
                var ext = decodeURIComponent(decodeURIComponent(window.external.url.match(/(ext[^&]+)/)[1]));
                var args = 'workspage=' + ext.replace('ugc', 'media') + '&refresh_state=2&pgext=';
                var headers = 'Content-Type: application/x-www-form-urlencoded; Charset=UTF-8\r\nUser-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1';
                var html = 'title:\"' + window.userMeta.username + '\"$';
                var pgext = '', idx = 0;
                while (true) {
                    var data = window.external.getPostResultEx('https://quanmin.baidu.com/mvideo/api', args + pgext, headers);
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.workspage.data.worksList.length - 1; i++) {
                        idx++;
                        var item = jo.workspage.data.worksList[i];
                        var vi = item.videoInfo;
                        html += 'v_title:\"' + (item.title || window.userMeta.username + idx)+ '\",video_url:\"' + item.playurl + '\",thumbnail:\"' + item.poster_exquisite + '\",duration:' + vi.duration + ',date:' + vi.publish_time + ',play:' + item.playcnt.count + ',like:' + item.likeInfo.count + ';\r\n';
                    }
                    jo = jo.workspage.data;
                    pgext = jo.ext;
                    if (!jo.hasMore)
                        break;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youtube" delay="500">
        <url><![CDATA[youtube\.com/.*?list=(?<id>[0-9A-Za-z-_]{10,})]]></url>
        <title><![CDATA[(?:title:"([^"]+)|<h3>(?<title>[^<]+)</h3>|"title":"([^"]+))]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",thumbnail:"(?<thumbnail>[^"]*)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),play:(?<play>[^;]+)|<tr>\s+<td\s+data-label="Image".*?src="(?<thumbnail>[^"]+).*?Title">\s+(?<title>[^<]+).*?v=(?<url>[^"]+).*?</tr>]]></content>
        <baseUrl><![CDATA[https://www.youtube.com/watch?v=]]></baseUrl>
        <jsCode><![CDATA[
            try {
                var html = '';
                //single page...https://www.youtube.com/playlist?list=PLA-9kehfPNSALTRPlPma_6P-21zBKfiBV
                if (window.ytInitialData && window.ytInitialData.contents &&
                    (JSON.stringify(window.ytInitialData.contents).indexOf('playlistPanelVideoRenderer') != -1 || JSON.stringify(window.ytInitialData.contents).indexOf('playlistVideoRenderer') != -1)) {
                    var playlist = window.ytInitialData.contents.twoColumnWatchNextResults ? window.ytInitialData.contents.twoColumnWatchNextResults.playlist.playlist : window.ytInitialData.contents.twoColumnBrowseResultsRenderer.tabs[0].tabRenderer.content.sectionListRenderer.contents[0].itemSectionRenderer.contents[0].playlistVideoListRenderer;
                    var pl_title = playlist.title || window.ytInitialData.metadata.playlistMetadataRenderer.title;
                    html = 'title:\"' + pl_title + '\"$'
                    for (var i = 0; i <= playlist.contents.length - 1; i++) {
                        var video = playlist.contents[i].playlistPanelVideoRenderer || playlist.contents[i].playlistVideoRenderer;
                        var duration = video.lengthText ? video.lengthText.simpleText : 0;
                        var play = video.videoInfo.runs[0].text;
                        html += 'v_title:\"' + video.title.simpleText.replace(/\"/g, '\'') + '\",thumbnail:\"' + video.thumbnail.thumbnails[video.thumbnail.thumbnails.length - 1].url + '\",video_url:\"' + video.videoId + '\",duration:' + duration + ',play:' + play + ';\r\n';
                    }

                    //multi pages...https://www.youtube.com/playlist?list=PLBHgMN3r4ZNwObXsF5soCCCh0bvBNpgN2
                    var pl_id = window.external.url.match(/list=([^&]+)/)[1];
                    var pl_url = 'https://www.youtube.com/playlist?list=' + pl_id;
                    var pl_html = window.external.getHtmlCodeEx(pl_url, 'User-Agent: ' + navigator.userAgent + '\r\nCookie: ' + document.cookie);
                    if (pl_html.indexOf('\"nextContinuationData\":{\"continuation\":') != -1) {
                        var client_name = document.head.innerHTML.match(/client\.name=(\d+)/)[1];
                        var client_version = document.head.innerHTML.match(/client.version=([^\\]+)/)[1];
                        var headers = 'User-Agent: ' + navigator.userAgent + '\r\X-YouTube-Client-Name: ' + client_name + '\r\X-YouTube-Client-Version: ' + client_version;
                        var ctoken = pl_html.match(/continuation\":\"([^\"]+)/)[1];
                        var itct = pl_html.match(/clickTrackingParams\":\"([^\"]+)/)[1];
                        var api_url = 'https://www.youtube.com/browse_ajax?ctoken=' + ctoken + '&continuation=' + ctoken + '&itct=' + itct;
                        var data = window.external.getHtmlCodeEx(api_url, headers);
                        while (true) {
                            var jo = JSON.parse(data)[1];
                            var playlist = jo.response.continuationContents.playlistVideoListContinuation;
                            for (var i = 0; i <= playlist.contents.length - 1; i++) {
                                var video = playlist.contents[i].playlistVideoRenderer;
                                var duration = video.lengthText ? video.lengthText.simpleText : 0;
                                var play = video.videoInfo.runs[0].text;
                                html += 'v_title:\"' + video.title.simpleText.replace(/\"/g, '\'') + '\",thumbnail:\"' + video.thumbnail.thumbnails[video.thumbnail.thumbnails.length - 1].url + '\",video_url:\"' + video.videoId + '\",duration:' + duration + ',play:' + play + ';\r\n';
                            }
                            if (!jo.response.continuationContents.playlistVideoListContinuation.continuations)
                                break;

                            var next_cd = jo.response.continuationContents.playlistVideoListContinuation.continuations[0].nextContinuationData;
                            ctoken = next_cd.continuation;
                            itct = next_cd.clickTrackingParams;
                            api_url = 'https://www.youtube.com/browse_ajax?ctoken=' + ctoken + '&continuation=' + ctoken + '&itct=' + itct;
                            data = window.external.getHtmlCodeEx(api_url, headers);
                        }
                    }
                }
                //https://music.youtube.com/playlist?list=RDCLAK5uy_nW_Xd94ynvL3pIdTApbNN11s-QrzsYU5U
                else if (window.external.url.indexOf('music') != -1) {
                    var data = window.external.getHtmlCode(window.external.url);
                    if (data && data.indexOf('musicResponsiveListItemRenderer') != -1) {
                        data = data.replace(/\\\\\"/g, '\"');
                        var pl_title = data.match(/musicDetailHeaderRenderer.*?text\":\"([^\"]+)/)[1];
                        html = 'title:\"' + pl_title + '\"$'
                        data = data.match(/(\"contents\":\[\{\"musicResponsiveListItemRenderer.*?\]),\"collapsedItemCount/)[1];
                        //JSON.parse有特殊字符问题，直解吧
                        var p = new RegExp('musicResponsiveListItemRenderer.*?videoId\":\"([^\"]+).*?text\":\"([^\"]+).*?musicResponsiveListItemFixedColumnRenderer.*?text\":\"([^\"]+)', 'gi');
                        while ((m = p.exec(data)) != null) {
                            var title = m[2] || '';
                            html += 'v_title:\"' + title.replace(/\"/g, '\'') + '\",thumbnail:\",video_url:\"' + m[1] + '\",duration:' + m[3] + ';\r\n';
                        }
                        data = data.substr(0, data.length - 1);
                    }
                }
                //others...
                if (!html) {
                    var pl_id = window.external.url.match(/list=([^&]+)/)[1];
                    var pl_url = 'https://www.youtube.com/playlist?list=' + pl_id;
                    var api_url = 'https://odownloader.com/download?q=' + encodeURIComponent(pl_url);
                    html = window.external.getHtmlCode(api_url, api_url);
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youtube">
        <url><![CDATA[youtube\.com/.*?search_query=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.youtube.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.youtube.com/results?search_query=%E9%A3%8E%E7%AD%9D
                var title = decodeURIComponent(window.location.href.match(/search_query=([^&]+)/)[1]);
                var html = 'title:\"' + title + '\"$';
                var args = {\"context\":{\"client\":{\"clientName\": \"WEB\",\"clientVersion\": \"2.20210120.08.00\"}},\"query\": title};
                var headers = 'Content-Type: application/json';
                var m = document.head.innerText.match(/INNERTUBE_API_KEY\":\"([^\"]+)/);
                var key = m ? m[1] : 'AIzaSyAO_FJ2SlqU8Q4STEHLGCilw_Y9_11qcW8';
                var api_url = 'https://www.youtube.com/youtubei/v1/search?key=' + key;
                var p = 0;
                while (true) {
                    if (p > 9)
                         break;

                    var data = window.external.getPostResultEx(api_url, JSON.stringify(args), headers);
                    var jo = JSON.parse(data);
                    try {
                        var videos = jo.contents ? jo.contents.twoColumnSearchResultsRenderer.primaryContents.sectionListRenderer.contents[0].itemSectionRenderer.contents : jo.onResponseReceivedCommands[0].appendContinuationItemsAction.continuationItems[0].itemSectionRenderer.contents;
                        for (var i = 0; i <= videos.length - 1; i++) {
                            //only get video
                            var item = videos[i].videoRenderer;
                            //only get video
                            if (!item)
                                continue;
                            html += 'v_title:\"' + item.title.runs[0].text.replace(/\"/g, '\'') + '\",thumbnail:\"' + item.thumbnail.thumbnails[0].url + '\",video_url:\"/watch?v=' + item.videoId + '\",duration:' + item.lengthText.simpleText + ';\r\n';
                        }
                    }
                    catch (ex) {
                        break;
                    }
                    if (data.indexOf('\"token\"') == -1)
                        break;

                    args.continuation = data.match(/\"token\":\s*\"([^\"]+)/)[1];
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="pexels">
        <url><![CDATA[pexels\.com/.*?@(?<id>[^/?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.pexels.com/zh-CN/@koko/?filter=videos
                //https://www.pexels.com/@koko/?filter=videos
                //https://www.pexels.com/zh-CN/@ambient-nature_-atmosphere-1682386/?filter=videos
                var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveObject('Microsoft.XMLHTTP');
                xhr.open('GET', window.external.url, false);
                xhr.setRequestHeader('Host', 'www.pexels.com');
                xhr.send(null);
                html = xhr.responseText;
                //有些电脑，还是拿不到，得到验证页代码：One more step
                var title = (html.indexOf('<h1') != -1) ? html.match(/<h1[^>]*>([^<]+)/)[1] : html.match(/<title>([^<]+)/)[1];
                var uid = html.match(/id\":\"([^\"]+)/)[1];
                html = 'title:\"' + title + '\"$';
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nsecret-key: H2jk9uKnhRmL6WPwh89zBezWvr\r\nReferer: ' + window.external.url;
                var api_url = 'https://www.pexels.com/en-us/api/v3/users/' + uid + '/media/recent?per_page=12&type=videos&page=';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCodeEx(api_url + p, headers);
                    if (data.indexOf('data\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        var video_url = 'https://player.vimeo.com/video/' + item.attributes.vimeo_id;
                        var title = item.attributes.title || video_url;
                        var thumbnail = item.attributes.video.thumbnail.large;
                        html += 'v_title:\"' + title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",date:' + item.attributes.updated_at + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="pexels" delegate="true">
        <url><![CDATA[pexels\.com/.*?search/videos/(?<id>[^/?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",date:(?<date>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.pexels.com/zh-CN/search/videos/%E6%98%A5%E5%A4%A9/?search_version=2
                var kw = window.external.url.match(/videos\/([^/]+)/)[1];
                var html = 'title:\"' + decodeURIComponent(kw) + '\"$';
                var headers = 'Referer: ' + window.external.url + '\r\nsecret-key: H2jk9uKnhRmL6WPwh89zBezWvr';
                var api_url = 'https://www.pexels.com/zh-cn/api/v3/search/videos?per_page=24&query=' + kw + '&page=';
                var p = parseInt(window.external.sp) || 1;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + p, headers);
                    if (data.indexOf('data\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        var video_url = 'https://player.vimeo.com/video/' + item.attributes.vimeo_id;
                        var title = item.attributes.title || video_url;
                        var thumbnail = item.attributes.video.thumbnail.large;
                        html += 'v_title:\"' + title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",date:' + item.attributes.updated_at + ';\r\n';
                    }
                    p++;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="nicovideo" delegate="true">
        <url><![CDATA[nicovideo\.jp/user/(?<id>[^/?]+)/video]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.nicovideo.jp/user/9084612/video?ref=pc_userpage_menu
                //https://www.nicovideo.jp/user/9084612/video?ref=pc_userpage_menu&page=2
                var url = window.external.url;
                var uid = url.match(/user\/([^\/]+)/)[1];
                var cookie = window.external.getCookieEx(url, 'nicosid', 2500);
                var headers = 'X-Frontend-Id: 6\r\nReferer: https://www.nicovideo.jp\r\nUser-Agent: ' + navigator.userAgent + '\r\nCookie: ' + cookie;
                var api_url = 'https://nvapi.nicovideo.jp/v3/users/' + uid + '/videos?sortKey=registeredAt&sortOrder=desc&pageSize=100&page=';
                var title= '', html = '';
                var p = (url.indexOf('page=') == -1) ? 1 : url.match(/page=([^&]+)/)[1];
                if (url.indexOf('page=') == -1) {
                    while (true) {
                        var data = window.external.getHtmlCodeEx(api_url + p, headers);
                        if (data.indexOf('items\":[{') == -1)
                            break;

                        if (!title) {
                            var jo = JSON.parse(data);
                            var item = jo.data.items[0].essential;
                            title = item.owner.name + ' 動画・シリーズ';
                        }
                        html += getPageHtml(data);
                        p++;
                    }
                }
                else {
                    var data = window.external.getHtmlCodeEx(api_url + p, headers);
                    var jo = JSON.parse(data);
                    var item = jo.data.items[0].essential;
                    title = item.owner.name + ' 動画・シリーズ';
                    html += getPageHtml(data);
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);

                //...
                function getPageHtml(data) {
                    var result = '';
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.items.length - 1; i++) {
                        var item = jo.data.items[i].essential;
                        var video_url = 'https://www.nicovideo.jp/watch/' + item.id + '?ref=pc_userpage_video';
                        var thumbnail = item.thumbnail.nHdUrl || item.thumbnail.largeUrl;
                        result += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + item.duration + ',play:' + item.count.view + ',like:' + item.count.like + ';\r\n';
                    }
                    return result;
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="lynda">
        <url><![CDATA[lynda\.com/(?:[^/]+/){2,3}(?<id>\d+-2)\.html?]]></url>
        <title><![CDATA[<title>([^<]+)</title>]]></title>
        <content><![CDATA[(?is)<div\s+class="row video-row">.*?<a.*?href="(?<url>[^"]+).*?>(?<title>[^<]+).*?<span\s+class="video-duration">(?<duration>[^<]+)</span>]]></content>
    </item>
    <item domain="audiomack" crpj="true" redirect="true" delegate="true">
        <url><![CDATA[audiomack\.com/\w+/album/(?<id>[^/]+)]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[]]></content>
        <jsCode><![CDATA[
            try {
                //https://audiomack.com/flytunezcom/album/tha-tour-part-2-mixtape
                var pl_url = window.external.url.replace(/(\w+)\/(album)/, '$2/$1');
                document.body.innerHTML = 'title:\"' + pl_url + '\",cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="twitter" delegate="true">
        <url><![CDATA[(?:twitter\.com/\w+/media$|twitter\.com/(?<id>\w+)$)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://twitter.com/Enezator
                //https://twitter.com/Enezator/media
                var url = window.external.url;
                var user = url.match(/com\/([^\/]+)/)[1];
                var cookie = window.external.getCookieEx(url, 'auth_token', 2500);
                if (cookie.indexOf('ct0') != -1) {
                    var headers = 'x-csrf-token: ' + cookie.match(/ct0=([^;]+)/)[1] + '\r\nauthorization: Bearer AAAAAAAAAAAAAAAAAAAAANRILgAAAAAAnNwIzUejRCOuH5E6I8xnZz4puTs%3D1Zv7ttfk8LF81IUq16cHjhLTvJu4FA33AGWWjCpTnA\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                    var api_url = 'https://twitter.com/i/api/graphql/qRednkZG-rn1P6b48NINmQ/UserByScreenName?variables=%7B%22screen_name%22%3A%22' + user + '%22%2C%22withSafetyModeUserFields%22%3Atrue%7D&features=%7B%22hidden_profile_likes_enabled%22%3Afalse%2C%22responsive_web_graphql_exclude_directive_enabled%22%3Atrue%2C%22verified_phone_label_enabled%22%3Afalse%2C%22subscriptions_verification_info_verified_since_enabled%22%3Atrue%2C%22highlights_tweets_tab_ui_enabled%22%3Atrue%2C%22creator_subscriptions_tweet_preview_api_enabled%22%3Atrue%2C%22responsive_web_graphql_skip_user_profile_image_extensions_enabled%22%3Afalse%2C%22responsive_web_graphql_timeline_navigation_enabled%22%3Atrue%7D';
                    var data = window.external.getHtmlCodeEx(api_url, headers);
                    var uid = data.match(/rest_id\":\"([^\"]+)/)[1];
                    api_url = (url.indexOf('/media') == -1) ? 'https://twitter.com/i/api/graphql/Uuw5X2n3tuGE_SatnXUqLA/UserTweets?variables=' : 'https://twitter.com/i/api/graphql/M-nyKYlaEAgFNDfIynbvWg/UserMedia?variables=';
                    var title = uid;
                    if (url.indexOf('/media') == -1)
                        title += 'Media Tweets by ' + uid;
                    var html = 'title:\"' + title + '\"$';
                    var cursor = window.external.sp || '';
                    if (cursor == 0)
                        cursor = '';
                    var pmax = (window.external.sp != undefined) ? 19 : 199;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var args = (url.indexOf('/media') == -1) ? '%7B%22userId%22%3A%22' + uid + '%22%2C%22count%22%3A20%2C%22cursor%22%3A%22' + cursor + '%22%2C%22includePromotedContent%22%3Afalse%2C%22withClientEventToken%22%3Afalse%2C%22withBirdwatchNotes%22%3Afalse%2C%22withVoice%22%3Atrue%2C%22withV2Timeline%22%3Atrue%7D&features=%7B%22rweb_lists_timeline_redesign_enabled%22%3Atrue%2C%22responsive_web_graphql_exclude_directive_enabled%22%3Atrue%2C%22verified_phone_label_enabled%22%3Afalse%2C%22creator_subscriptions_tweet_preview_api_enabled%22%3Atrue%2C%22responsive_web_graphql_timeline_navigation_enabled%22%3Atrue%2C%22responsive_web_graphql_skip_user_profile_image_extensions_enabled%22%3Afalse%2C%22tweetypie_unmention_optimization_enabled%22%3Atrue%2C%22responsive_web_edit_tweet_api_enabled%22%3Atrue%2C%22graphql_is_translatable_rweb_tweet_is_translatable_enabled%22%3Atrue%2C%22view_counts_everywhere_api_enabled%22%3Atrue%2C%22longform_notetweets_consumption_enabled%22%3Atrue%2C%22tweet_awards_web_tipping_enabled%22%3Afalse%2C%22freedom_of_speech_not_reach_fetch_enabled%22%3Atrue%2C%22standardized_nudges_misinfo%22%3Atrue%2C%22tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled%22%3Atrue%2C%22longform_notetweets_rich_text_read_enabled%22%3Atrue%2C%22longform_notetweets_inline_media_enabled%22%3Atrue%2C%22responsive_web_enhance_cards_enabled%22%3Afalse%7D' :
                            '%7B%22userId%22%3A%22' + uid + '%22%2C%22count%22%3A20%2C%22cursor%22%3A%22' + cursor + '%22%2C%22includePromotedContent%22%3Atrue%2C%22withQuickPromoteEligibilityTweetFields%22%3Atrue%2C%22withVoice%22%3Atrue%2C%22withV2Timeline%22%3Atrue%7D&features=%7B%22rweb_lists_timeline_redesign_enabled%22%3Atrue%2C%22responsive_web_graphql_exclude_directive_enabled%22%3Atrue%2C%22verified_phone_label_enabled%22%3Afalse%2C%22creator_subscriptions_tweet_preview_api_enabled%22%3Atrue%2C%22responsive_web_graphql_timeline_navigation_enabled%22%3Atrue%2C%22responsive_web_graphql_skip_user_profile_image_extensions_enabled%22%3Afalse%2C%22tweetypie_unmention_optimization_enabled%22%3Atrue%2C%22responsive_web_edit_tweet_api_enabled%22%3Atrue%2C%22graphql_is_translatable_rweb_tweet_is_translatable_enabled%22%3Atrue%2C%22view_counts_everywhere_api_enabled%22%3Atrue%2C%22longform_notetweets_consumption_enabled%22%3Atrue%2C%22tweet_awards_web_tipping_enabled%22%3Afalse%2C%22freedom_of_speech_not_reach_fetch_enabled%22%3Atrue%2C%22standardized_nudges_misinfo%22%3Atrue%2C%22tweet_with_visibility_results_prefer_gql_limited_actions_policy_enabled%22%3Atrue%2C%22longform_notetweets_rich_text_read_enabled%22%3Atrue%2C%22longform_notetweets_inline_media_enabled%22%3Atrue%2C%22responsive_web_enhance_cards_enabled%22%3Afalse%7D';
                        var data = window.external.getHtmlCodeEx(api_url + args, headers);
                        if (data.indexOf('entries\":[{') == -1) {
                            hasMore = false;
                            break;
                        }

                        jo = JSON.parse(data);
                        var items = jo.data.user.result.timeline_v2.timeline.instructions[0].entries || jo.data.user.result.timeline_v2.timeline.instructions[1].entries;
                        for (var i = 0; i <= items.length - 1; i++) {
                            var item = items[i];
                            if (item.content.entryType == 'TimelineTimelineItem') {
                                var legacy = item.content.itemContent.tweet_results.result.legacy;
                                if (legacy && legacy.extended_entities) {
                                    var media0 = legacy.extended_entities.media[0];
                                    if (media0.video_info) {
                                        var title = legacy.full_text;
                                        if (title.indexOf('http') != -1)
                                            title = title.substring(0, title.indexOf('http')).trim();
                                        var thumbnail = media0.media_url_https;
                                        var duration = media0.video_info.duration_millis / 1000;
                                        var videos = media0.video_info.variants;
                                        var video_url = videos[videos.length - 1].url;
                                        var date = legacy.created_at;
                                        var play = media0.mediaStats ? media0.mediaStats.viewCount : 0;
                                        html += 'v_title:\"' + title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + duration + ',date:' + date + ',play:' + play + ';\r\n';
                                    }
                                }
                            }
                            else if (item.content.entryType == 'TimelineTimelineCursor')
                                cursor = item.content.value;
                        }
                        pidx++;
                    }
                    html = 'startPage:' + cursor + ',hasMore:' + hasMore + ',' + html;
                    window.external.receive(html);
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="instagram" delegate="true">
        <url><![CDATA[instagram.com/(?<id>(?!reel)[^/?&]{3,})/?(?:[^/]+/?)?$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]*)",date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <ckSign><![CDATA[csrftoken]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.instagram.com/kourtneykardash/
                //https://www.instagram.com/yoona.fandc/channel/
                //https://www.instagram.com/kourtneykardash/reels/
                //https://www.instagram.com/reel/CosDnQNAMbv/ 单个
                //https://instagram.com/dj_de_los_70_80_y_90?igshid=NTc4MTIwNjQ2YQ==
                var url = window.external.url;
                var user = url.match(/com\/([^\/?&]+)/)[1];
                var cookie = window.external.getCookieEx(url, 'datr', 2500) || window.external.getCookieEx(url, 'csrftoken', 2500);
                var headers = 'X-IG-App-ID: 936619743392459\r\nUser-Agent: ' + navigator.userAgent + '\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                var api_url = 'https://www.instagram.com/api/v1/users/web_profile_info/?username=' + user;
                var data = window.external.getHtmlCodeEx(api_url, headers);
                var jo = JSON.parse(data);
                var uid = jo.data.user.id;
                var title = jo.data.user.full_name;
                var html = 'title:\"' + title + '\"$';
                api_url = 'https://www.instagram.com/api/v1/feed/user/' + uid + '/?count=12&max_id=';
                var max_id = window.external.sp || '';
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + max_id, headers);
                    if (data.indexOf('items\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    jo = JSON.parse(data);
                    for (var i = 0; i <= jo.items.length - 1; i++) {
                        var item = jo.items[i];
                        var video_url = 'https://www.instagram.com/reel/' + item.code;
                        var title = item.caption ? item.caption.text : video_url;
                        if (title.indexOf('\n') != -1)
                            title = title.substring(0, title.indexOf('\n'));
                        title = title.replace(/\"/g, '\'');
                        var thumbnail = item.carousel_media ? item.carousel_media[0].image_versions2.candidates[0].url : '';
                        var date = item.caption ? item.caption.created_at : 0;
                        html += 'v_title:\"' + title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",date:' + date + ',like:' + item.like_count + ';\r\n';
                    }
                    if (!jo.more_available) {
                        hasMore = false;
                        break;
                    }

                    max_id = jo.next_max_id
                    pidx++;
                }

                html = 'startPage:' + max_id + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" delay="1500">
        <url><![CDATA[bilibili\.com/(?<id>\d+)/video\??]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://space.bilibili.com/19577966/video
                var url = window.external.url;
                var mid = url.match(/(\d+)\/video/)[1];
                var tid = url.indexOf('tid') != -1 ? url.match(/tid=([^&]+)/)[1] : 0;
                //...
                var c = (n = '4a1d4479a1ea4146bc7552eea71c28e9' + 'fa5812e23a204d10b332dc24d992432d',
                    r = [],
                    [46, 47, 18, 2, 53, 8, 23, 32, 15, 50, 10, 31, 58, 3, 45, 35, 27, 43, 5, 49, 33, 9, 42, 19, 29, 28, 14, 39, 12, 38, 41, 13, 37, 48, 7, 16, 24, 55, 40, 61, 26, 17, 0, 1, 60, 51, 30, 4, 22, 25, 54, 21, 56, 59, 6, 63, 57, 62, 11, 36, 20, 34, 44, 52].forEach((function (t) {
                            n.charAt(t) && r.push(n.charAt(t))
                        })),
                    r.join('').slice(0, 32));
                var s = Math.round(Date.now() / 1e3);
                //只user-agent即可... 2023.6.15加ck
                var cookie = window.external.getCookieEx(url, 'buvid3', 500);
                var headers = 'Cookie: ' + cookie + '\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.5414.75 Safari/537.36';
                //https://space.bilibili.com/18701109/video 为避免此类，第一个视频为其它用户制作，而取到非本up的名字
                var title = '', html = '';
                //第一页亦全解析
                if (url.indexOf('pn=') == -1 || url.indexOf('pn=1&') != -1) {
                    var p = parseInt(window.external.sp) || 1;
                    var pmax = (window.external.sp != undefined) ? 49 : 99;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var args = 'mid=' + mid + '&platform=web&pn=' + p + '&ps=30&tid=' + tid + '&web_location=1550101';
                        args += '&w_rid=' + md5(args + '&wts=' + s + c) + '&wts=' + s;
                        var api_url = 'https://api.bilibili.com/x/space/wbi/arc/search?' + args;
                        var data = window.external.getHtmlCodeEx(api_url, headers, 500);
                        if (data.indexOf('vlist\":[{') == -1) {
                            for (var i = 0; i <= 2; i++) {
                                data = window.external.getHtmlCodeEx(api_url, headers, 500);
                                if (data.indexOf('vlist\":[{') != -1)
                                    break;
                            }
                        }
                        if (data.indexOf('vlist\":[{') == -1) {
                            hasMore = false;
                            break;
                        }

                        html += getPageHtml(data);
                        p++;
                        pidx++;
                    }
                    html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                }
                else {
                    var p = url.match(/pn=(\d+)/)[1];
                    document.title = document.title.replace(' - ', ' p' + p + ' - ');
                    var args = 'mid=' + mid + '&platform=web&pn=' + p + '&ps=30&tid=' + tid + '&web_location=1550101';
                    args += '&w_rid=' + md5(args + '&wts=' + s + c) + '&wts=' + s;
                    var api_url = 'https://api.bilibili.com/x/space/wbi/arc/search?' + args;
                    var data = window.external.getHtmlCodeEx(api_url, headers);
                    if (data.indexOf('vlist\":[{') == -1) {
                        for (var i = 0; i <= 2; i++) {
                            data = window.external.getHtmlCodeEx(api_url, headers, 500);
                            if (data.indexOf('vlist\":[{') != -1)
                                break;
                        }
                    }
                    if (data.indexOf('vlist\":[{') != -1)
                        html += 'title:\"' + title + '\"$' + getPageHtml(data);
                }
                window.external.receive(html);

                //...
                function getPageHtml(data) {
                    var result = '';
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.vlist.length - 1; i++) {
                        var item = jo.data.list.vlist[i];
                        if (!title)
                            title = item.author;
                        result += 'id=' + item.bvid + ',v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.bvid + '\",thumbnail:\"' + item.pic + '\",duration:' + item.length + ',date:' + item.created + ',play:' + item.play + ';\r\n';
                    }
                    return result;
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" redirect="true">
        <url><![CDATA[bilibili\.com/(?<id>\d+)/?$]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://space.bilibili.com/580267569/
                //https://space.bilibili.com/14110780
                var url = window.external.url;
                if (url[url.length - 1] != '/')
                    url += '/';
                document.body.innerHTML = 'cr_playlist_url=' + url + 'video$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" redirect="true">
        <url><![CDATA[bilibili\.com/(?<id>\d+)\?]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://space.bilibili.com/59157476?spm_id_from=333.788.b_765f7570696e666f.2
                var uid = window.external.url.match(/com\/(\d+)/)[1];
                document.body.innerHTML = 'cr_playlist_url=https://space.bilibili.com/' + uid + '/video$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" watchList="true" delegate="true" delay="500">
        <url><![CDATA[bilibili\.com/video/(?:av|BV)(?<id>[^/?]+).*?[?&]p=\d+]]></url>
        <title><![CDATA[title"?:"([^"]+)]]></title>
        <content><![CDATA[(?is)(?:v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)|\{.*?page":(?<url>\d+),.*?part":"(?<title>[^"]+)","duration":(?<duration>\d+).*?\})]]></content>
        <baseUrl><![CDATA[https?://(?:www\.)?bilibili\.com/.*?p=]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //直取源码在有些用户机子上不返回结果，由crpj取；正则后段内容，对应主页视频列表中列表，不可去。且title亦加双引
                //https://www.bilibili.com/video/BV1wb411p715?p=2
                //https://www.bilibili.com/video/av76315580?t=39&p=10
                //https://www.bilibili.com/video/av19377766/?p=2
                var html = window.external.getHtmlCode(window.external.url);
                var title = html.match(/<h1[^>]+>([^<]+)/) ? html.match(/<h1[^>]+>([^<]+)/)[1] : '';
                var data = html.match(/__INITIAL_STATE__=(.*?)\};\(function/)[1] + '}';
                var jo = JSON.parse(data);
                html = '';
                if (jo.videoData && jo.videoData.pages.length > 1) {
                    title = title || jo.videoData.title;
                    var pages = jo.videoData.pages;
                    for (var i = 0; i <= pages.length - 1; i++) {
                        var item = pages[i];
                        html += 'v_title:\"' + item.part.replace(/\"/g, '\'') + '\",video_url:\"' + item.page + '\",duration:' + item.duration + ';\r\n';
                    }
                }
                //https://www.bilibili.com/video/BV1av411W7kX/?spm_id_from=333.788
                //https://www.bilibili.com/video/BV145411U7md/?spm_id_from=333.788
                //https://www.bilibili.com/video/BV1Da411P7mR/?spm_id_from=333.788&vd_source=27e2a09c5b084e1c7a7abe96e939e67e
                if (jo.sectionsInfo && jo.sectionsInfo.sections.length != 0) {
                    title = jo.sectionsInfo.title;
                    for (var i = 0; i <= jo.sectionsInfo.sections.length - 1; i++) {
                        var episodes = jo.sectionsInfo.sections[i].episodes;
                        for (var j = 0; j <= episodes.length - 1; j++) {
                            var item = episodes[j];
                            var video_url = 'https://www.bilibili.com/video/' + item.bvid;
                            html += 'v_title:\"' + (item.title || item.page.part) + '\",video_url:\"' + video_url + '\",duration:' + item.page.duration + ';\r\n';
                        }
                    }
                }

                html = 'title:\"' + title + '\"\$' + html + '$error=列表信息获取错误。$';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true">
        <url><![CDATA[bilibili\.com/bangumi/media/\w+]]></url>
        <title><![CDATA[<meta\s+content="([^"]+)"\s+property="og:title">]]></title>
        <content><![CDATA[(?is)\{"aid".*?"cover":"(?<thumbnail>[^"]+).*?long_title":"(?<title>[^"]+)","share_url":"(?<url>[^"]+)]]></content>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                var season_id= window.__INITIAL_STATE__.mediaInfo.season_id;
                var url = 'https://api.bilibili.com/pgc/web/season/section?season_id=' + season_id;
                var data = window.external.getHtmlCode(url);
                document.body.innerHTML += '$' + data;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" watchList="true" delay="4500">
        <url><![CDATA[bilibili\.com/bangumi/play/(?<id>\w+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.bilibili.com/bangumi/play/ep435203?bsource=baidu_aladdin
                var mediaInfo = window.__INITIAL_STATE__ ? window.__INITIAL_STATE__.mediaInfo : undefined;
                if (!mediaInfo) {
                    var html = external.getHtmlCode(window.external.url);
                    var js = html.match(/mediaInfo\":(.*?),\"sectionsMap/)[1];
                    mediaInfo = JSON.parse(js);
                }
                var title = mediaInfo.season_title;
                var html = 'title:\"' + title + '\"$';
                var items = window.__INITIAL_STATE__ ? window.__INITIAL_STATE__.epList : mediaInfo.episodes;
                for (var i = 0; i <= items.length - 1; i++) {
                    var item = items[i];
                    var video_url = 'https://www.bilibili.com/video/' + item.bvid + '?cid=' + item.cid;
                    var v_title = item.titleFormat + ' ' + (item.longTitle || item.long_title);
                    html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + (item.duration / 1000) + ',date:' + item.pub_time + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            alert(ex);
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" watchList="true" delay="4500">
        <url><![CDATA[bilibili\.com/cheese/play/(?<id>\w+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.bilibili.com/cheese/play/ep5746
                var url = window.external.url;
                var ep_id = parseInt(url.match(/ep([^?&]+)/)[1]);
                var api_url = 'https://api.bilibili.com/pugv/view/web/season?ep_id=' + ep_id;
                var data = window.external.getHtmlCode(api_url, url);
                var jo = JSON.parse(data);
                var title = jo.data.title;
                var html = 'title:\"' + title + '\"$';
                for (var i = 0; i <= jo.data.episodes.length - 1; i++) {
                    var item = jo.data.episodes[i];
                    var video_url = 'https://www.bilibili.com/cheese/play/ep' + item.id;
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.release_date + ',play:' + item.play + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true">
        <url><![CDATA[bilibili\.com/(?<id>\d+)/channel/(?:\w*)?detail\?\w*id=\d+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://space.bilibili.com/19577966/channel/detail?cid=94947
                //https://space.bilibili.com/19577966/channel/seriesdetail?sid=1312788&ctype=0
                //https://space.bilibili.com/1678535/channel/collectiondetail?sid=172171
                var url = window.external.url;
                var m = url.match(/(\d+)\/channel.*?id=(\d+)/);
                var mid = m[1];
                var id = m[2];
                var api_url = 'https://api.bilibili.com/x/space/channel/video?mid=' + mid + '&cid=' + id + '&ps=50&pn=';
                if (url.indexOf('seriesdetail') != -1)
                    api_url = 'https://api.bilibili.com/x/series/archives?mid=' + mid + '&series_id=' + id + '&ps=50&pn=';
                else if (url.indexOf('collectiondetail') != -1)
                    api_url = 'https://api.bilibili.com/x/polymer/space/seasons_archives_list?mid=' + mid + '&season_id=' + id + '&page_size=30&page_num=';
                var title = (document.getElementsByClassName('item cur').length != 0) ? document.getElementsByClassName('item cur')[0].innerText : '';
                if (!title) {
                    var data = window.external.getHtmlCode('https://api.bilibili.com/x/space/wbi/acc/info?mid=' + mid);
                    if (data.indexOf('name\":') != -1)
                        title = JSON.parse(data).data.name;
                    data = window.external.getHtmlCode('https://api.bilibili.com/x/series/series?series_id=' + id);
                    if (data.indexOf('name\":') != -1)
                        title += ' ' + JSON.parse(data).data.meta.name;
                }
                var html = '';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('archives\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.data.meta ? jo.data.meta.name : (jo.data.list ? jo.data.list.name : '');
                    var archives = jo.data.archives || jo.data.list.archives;
                    for (var i = 0; i <= archives.length - 1; i++) {
                        var item = archives[i];
                        var play = item.stat ? item.stat.view : 0;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.bvid + '\",duration:' + item.duration + ',date:' + item.pubdate + ',play:' + play + ';\r\n';
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" redirect="true">
        <url><![CDATA[bilibili\.com/medialist/play/(?<id>[^/]+)$]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)play":(?<play>[^,]+).*?pic":"(?<thumbnail>[^"]+).*?"title":"(?<title>[^"]+).*?created":(?<date>[^,]+).*?length":"(?<duration>[^"]+).*?bvid":"(?<url>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.bilibili.com/medialist/play/383861324
                var uid = window.location.href.match(/play\/([^/]+)$/)[1];
                document.body.innerHTML = 'cr_playlist_url=https://space.bilibili.com/' + uid + '/video$'
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true">
        <url><![CDATA[bilibili\.com/medialist/[^/]+/ml(?<id>[^?/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)\{"id".*?"title":"(?<title>[^"]+).*?cover":"(?<thumbnail>[^"]+).*?duration":(?<duration>\d+).*?pubtime":(?<date>[^,]+).*?bvid":"(?<url>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.bilibili.com/medialist/play/ml1048258548/p1
                //https://www.bilibili.com/medialist/detail/ml414541623?type=1
                var title = document.getElementsByClassName('media-title').length != 0 ? document.getElementsByClassName('media-title')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                var mid = window.external.url.match(/ml([^?/]+)/)[1];
                //get ids
                var ids = '';
                var p = 1, idx = 0;
                var api_url = 'https://api.bilibili.com/x/v3/fav/resource/ids?media_id=' + mid;
                var data = window.external.getHtmlCode(api_url);
                if (data.indexOf('data') != -1) {
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        ids += item.id + ':' + item.type + ',';
                        //每20个取一次
                        if (idx >= 19 || i == jo.data.length - 1) {
                            api_url = 'https://api.bilibili.com/x/v3/fav/resource/infos?resources=' + encodeURIComponent(ids);
                            html += window.external.getHtmlCode(api_url);
                            if (!title && html.indexOf('\"name\"') != -1)
                                title = html.match(/name\":\"([^\"]*)/)[1];
                            idx = 0;
                            ids = '';
                        }
                        else
                            idx++;
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true">
        <url><![CDATA[bilibili\.com/medialist/[^/]+/watchlater]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)\{"id".*?cover":"(?<thumbnail>[^"]+).*?duration":(?<duration>\d+).*?"title":"(?<title>[^"]+)","type.*?bv_id":"(?<url>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.bilibili.com/medialist/play/watchlater/p1
                var cookie = window.external.getCookie(window.location.href) || document.cookie;
                if (cookie.indexOf('DedeUserID') != -1) {
                    var uid = cookie.match(/DedeUserID=([^;]+)/)[1];
                    var data = window.external.getHtmlCode('https://space.bilibili.com/' + uid);
                    var title = data.match(/<title>([^<]+)\s+-\s+/)[1] + ' - 稍后再看';
                    var api_url = 'https://api.bilibili.com/x/v1/medialist/resource/list?type=2&biz_id=' + uid + '&offset_index=0&offset=0&from=web&first_page=true&ps=20&page_direction=false&sort_desc=0';
                    data = window.external.getHtmlCode(api_url, window.location.href);

                    var jo = JSON.parse(data);
                    if (jo.data) {
                        var html = 'title:\"' + title + '\"$' + data;
                        while (true) {
                            api_url = 'https://api.bilibili.com/x/v1/medialist/resource/list?type=2&biz_id=' + uid + '&offset=' + jo.data.nextOffset + '&from=web&first_page=false&ps=20&page_direction=false&sort_desc=0'
                            data = window.external.getHtmlCode(api_url, window.location.href);
                            html += data;
                            jo = JSON.parse(data);
                            if (!jo.data.hasMore)
                               break;
                        }
                        window.external.receive(html);
                    }
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true">
        <url><![CDATA[search\.bilibili\.com/.*?keyword=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //全局搜索
                //https://search.bilibili.com/all?keyword=%E8%B5%B6%E6%B5%B7
                //https://search.bilibili.com/all?keyword=%E8%B5%B6%E6%B5%B7&order=pubdate&page=2&o=36
                var url = window.external.url;
                var kw = url.match(/keyword=([^&]+)/)[1];
                var order = url.indexOf('order=') != -1 ? url.match(/order=([^&]+)/)[1] : '';
                var o = url.indexOf('o=') != -1 ? url.match(/o=([^&]+)/)[1] : 0;
                var title = decodeURIComponent(kw), html = '';
                if (url.indexOf('page=') == -1) {
                    var p = 1, total = 99;
                    while (true) {
                        if (p > total)
                            break;
                        var api_url = 'https://api.bilibili.com/x/web-interface/search/type?page_size=42&order=' + order + '&keyword=' + kw + '&dynamic_offset=' + o + '&search_type=video&page=' + p;
                        var data = window.external.getHtmlCode(api_url, url);
                        if (data.indexOf('result\":[{') == -1)
                            break;

                        html += getPageHtml(data);
                        total = parseInt(data.match(/numPages\":([^,]+)/)[1]);
                        o += 36;
                        p++;
                    }
                }
                else {
                    var p = url.match(/page=([^&]+)/)[1];
                    title += ' p' + p;
                    var api_url = 'https://api.bilibili.com/x/web-interface/search/type?page_size=42&order=' + order + '&keyword=' + kw + '&dynamic_offset=' + o + '&search_type=video&page=' + p;
                    var data = window.external.getHtmlCode(api_url, url);
                    if (data.indexOf('result\":[{') != -1)
                        html += getPageHtml(data);
                }
                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);

                //...
                function getPageHtml(data) {
                    var jo = JSON.parse(data);
                    var result = '';
                    for (var i = 0; i <= jo.data.result.length - 1; i++) {
                        var item = jo.data.result[i];
                        var title = item.title.replace(/<[^>]+>/g, '').replace(/\"/g, '\'');
                        result += 'v_title:\"' + title + '\",video_url:\"' + item.bvid + '\",thumbnail:\"' + item.pic + '\",duration:' + item.duration + ',date:' + item.pubdate + ',play:' + item.play + ';\r\n';
                    }
                    return result;
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true">
        <url><![CDATA[space\.bilibili\.com/.*?keyword=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //个人主页搜索
                //https://space.bilibili.com/19577966/search/video?keyword=%E8%8A%B1
                //https://space.bilibili.com/19577966/search/video?tid=211&keyword=%E8%8A%B1&order=pubdate
                var href = window.location.href;
                var mid = href.match(/\/(\d+)\//)[1];
                var tid = href.indexOf('tid') != -1 ? href.match(/tid=([^&]+)/)[1] : 0;
                var kw = href.match(/keyword=([^&]+)/)[1];
                var title = document.getElementById('h-name') ? document.getElementById('h-name').innerText : document.title;
                title += '_' + kw;
                var html = '';
                var headers = 'Referer: ' + window.external.url + '\r\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/113.0.0.0 Safari/537.36';
                //...
                var c = (n = '4a1d4479a1ea4146bc7552eea71c28e9' + 'fa5812e23a204d10b332dc24d992432d',
                    r = [],
                    [46, 47, 18, 2, 53, 8, 23, 32, 15, 50, 10, 31, 58, 3, 45, 35, 27, 43, 5, 49, 33, 9, 42, 19, 29, 28, 14, 39, 12, 38, 41, 13, 37, 48, 7, 16, 24, 55, 40, 61, 26, 17, 0, 1, 60, 51, 30, 4, 22, 25, 54, 21, 56, 59, 6, 63, 57, 62, 11, 36, 20, 34, 44, 52].forEach((function (t) {
                            n.charAt(t) && r.push(n.charAt(t))
                        })),
                    r.join('').slice(0, 32));
                var s = Math.round(Date.now() / 1e3);
                if (href.indexOf('pn=') == -1) {
                    var p = 1;
                    while (true) {
                        var args = 'keyword=' + kw + '&mid=' + mid + '&platform=web&pn=' + p + '&ps=30&tid=' + tid + '&web_location=1550101';
                        args += '&w_rid=' + md5(args + '&wts=' + s + c) + '&wts=' + s;
                        var api_url = 'https://api.bilibili.com/x/space/wbi/arc/search?' + args;
                        var data = window.external.getHtmlCodeEx(api_url, headers);
                        if (data.indexOf('vlist\":[{') == -1)
                            break;

                        html += getPageHtml(data);
                        p++;
                    }
                }
                else {
                    var p = href.match(/pn=([^&]+)/)[1];
                    title += ' p' + p;
                    var args = 'keyword=' + kw + '&mid=' + mid + '&platform=web&pn=' + p + '&ps=30&tid=' + tid + '&web_location=1550101';
                    args += '&w_rid=' + md5(args + '&wts=' + s + c) + '&wts=' + s;
                    var api_url = 'https://api.bilibili.com/x/space/wbi/arc/search?' + args;
                    var data = window.external.getHtmlCodeEx(api_url, headers);
                    if (data.indexOf('vlist\":[{') != -1)
                        html += getPageHtml(data);
                }
                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);

                //...
                function getPageHtml(data) {
                    var jo = JSON.parse(data);
                    var result = '';
                    for (var i = 0; i <= jo.data.list.vlist.length - 1; i++) {
                        var item = jo.data.list.vlist[i];
                        result += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.bvid + '\",thumbnail:\"' + item.pic + '\",duration:' + item.length + ',date:' + item.created + ',play:' + item.play + ';\r\n';
                    }
                    return result;
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" delay="2500">
        <url><![CDATA[bilibili\.com/(?<id>\d+)/favlist\??]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://space.bilibili.com/440697835/favlist
                var uid = window.location.href.match(/(\d+)\/favlist/)[1];
                var title = '', html = '';
                var cookie = window.external.getCookie('https://www.bilibili.com');
                if (!cookie)
                    cookie = window.external.getCookieEx('https://www.bilibili.com', 'SESSDATA', 2500);
                var headers = 'Referer: ' + window.location.href + '\r\nCookie: ' + cookie;
                var api_url = 'https://api.bilibili.com/x/v3/fav/folder/created/list-all?up_mid=' + uid;
                var data = window.external.getHtmlCodeEx(api_url, headers);
                var mid = (window.location.href.indexOf('fid') != -1) ? window.location.href.match(/fid=([^&]+)/)[1] : data.match(/\"id\":([^,]+)/)[1];
                api_url = 'https://api.bilibili.com/x/v3/fav/resource/list?media_id=' + mid + '&ps=20&keyword=&order=mtime&type=0&tid=0&jsonp=jsonp&pn=';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCodeEx(api_url + p, headers);
                    if (data.indexOf('medias\":[{') == -1)
                        break;

                    if (!title)
                        title = data.match(/\"name\":\"([^\"]+)/)[1];
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.medias.length - 1; i++) {
                        var item = jo.data.medias[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.bvid + '\",duration:' + item.duration + ',date:' + item.pubtime + ',play:' + item.cnt_info.play + ';\r\n';
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" delay="2500">
        <url><![CDATA[bilibili\.com/watchlater/#/list]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)\{"aid.*?pic":"(?<thumbnail>[^"]+).*?title":"(?<title>[^"]+).*?duration":(?<duration>[^,]+).*?bvid":"(?<url>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.bilibili.com/video/]]></baseUrl>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                var api_url = 'https://api.bilibili.com/x/v2/history/toview/web?jsonp=jsonp&_=' + Date.now();
                var data = window.external.getHtmlCode(api_url, window.location.href);
                document.body.innerHTML = 'title:\"稍后再看\"$' + data;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" delay="500">
        <url><![CDATA[h\.bilibili\.com/(?<id>\d+)]]></url>
        <title><![CDATA[<div\s+class="description[^>]+>([^<]+)</div>]]></title>
        <content><![CDATA[(?is)<img\s+src="(?<thumbnail>.*?/(?<title>\w+)\.j[^"]+).*?track-name="detail_big"\s+data-photo-imager-src="(?<url>[^"]+)">]]></content>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
    </item>
    <item domain="bilibili" crpj="true" delay="500">
        <url><![CDATA[bilibili\.com/(?<id>\d+)/album\??]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)img_src":"(?<url>(?<thumbnail>.*?/(?<title>\w+)\.[jwpg][^"]+))"]]></content>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                var title = document.getElementById('h-name').innerText + '-相簿';
                var userId = window.external.url.match(/\/(\d+)\//)[1];
                var url = 'https://api.vc.bilibili.com/link_draw/v1/doc/doc_list?uid=' + userId + '&page_size=30&&biz=all&page_num=';
                var p = 0;
                var html = 'title:\"' + title + '\"$'
                while (true) {
                    var data = window.external.getHtmlCode(url + p);
                    if (data.indexOf('items\":[{') == -1)
                        break;

                    html += data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" crpj="true" delay="500">
        <url><![CDATA[bilibili\.com/video/(?<id>(?:av|BV)[^/?#&]+).*?#iv]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)"]]></content>
        <ckSign><![CDATA[SESSDATA]]></ckSign>
        <jsCode><![CDATA[
            try {
                //互动视频 https://www.bilibili.com/video/av64006660
                var href = window.location.href;
                var base_url = 'https://www.bilibili.com/' + href.match(/video\/[^\/?#]+/)[0];
                var title = window.__INITIAL_STATE__ && window.__INITIAL_STATE__.videoData ? window.__INITIAL_STATE__.videoData.title : document.title;
                var html = 'title:\"' + title + '\"$'
                var args = 'id=cid:1&', id_args = ''
                if (window.__INITIAL_STATE__ && window.__INITIAL_STATE__.aid)
                    id_args= 'aid=' + window.__INITIAL_STATE__.aid;
                else if (href.indexOf('/av') != -1)
                    id_args= 'aid=' + href.match(/av(\d+)/)[1];
                else if (href.indexOf('/BV') != -1)
                    id_args= 'bvid=' + href.match(/BV[^\/#]+/)[0];
                else
                    return;
                args += id_args;
                var api_url = 'https://api.bilibili.com/x/player.so?' + args;
                var data = window.external.getHtmlCode(api_url, href);
                if (data.indexOf('graph_version') == -1)
                    return;

                var cids = '';
                var gv = data.match(/graph_version\":([^,]+)/)[1];
                api_url = 'https://api.bilibili.com/x/stein/nodeinfo?' + id_args + '&graph_version=' + gv;
                html += getChioceVideo();
                window.external.receive(html);

                //...
                function getChioceVideo(option, cid, node_id) {
                    var node_url = node_id ? api_url + '&node_id=' + node_id : api_url;
                    var data = window.external.getHtmlCode(node_url, href);
                    var jo = JSON.parse(data);
                    if (!cid)
                        cid = jo.data.story_list[0].cid;
                    var v_title = jo.data.title;
                    if (option) {
                        var re = new RegExp(jo.data.title + '$');
                        if (!re.test(option))
                            v_title = option + '>' + v_title;
                    }
                    var result = 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + base_url + '#cid=' + cid + '\";\r\n';
                    //递归分支
                    if (data.indexOf('choices') != -1) {
                        var choices = jo.data.edges.choices;
                        for (var i = 0; i <= choices.length - 1; i++) {
                            var choice = choices[i];
                            //避免死循环
                            if (cids.indexOf(choice.cid) != -1)
                                continue;
                            cids +=',' + choice.cid;
                            result += getChioceVideo(choice.option, choice.cid, choice.node_id);
                        }
                    }
                    return result;
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" delay="4500">
        <url><![CDATA[bilibili\.com/festival/.*?bvid=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:(?<thumbnail>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.bilibili.com/festival/arknights2022?bvid=BV1aY411b7wx&spm_id_from=333.999.0.0
                var title = window.__INITIAL_STATE__.title;
                var html = 'title:\"' + title + '\"$';
                for (var i = 0; i <= window.__INITIAL_STATE__.sectionEpisodes.length - 1; i++) {
                    var item = window.__INITIAL_STATE__.sectionEpisodes[i];
                    var video_url = 'https://www.bilibili.com/video/' + item.bvid + '#cid=' + item.cid;
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:' + item.cover + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="bilibili" delay="500">
        <url><![CDATA[bilibili\.com/creator-detail/.*?mid=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),play:(?<play>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://cool.bilibili.com/creator-detail/video?mid=1285374920&up_from=1&biz_from=3
                //https://cool.bilibili.com/creator-detail/video?mid=582074190&up_from=1&biz_from=3
                var url = window.external.url;
                var args = url.substring(url.indexOf('?') + 1);
                var api_url = 'https://cool.bilibili.com/x/co-create/user/info?' + args + '&t=' + Date.now();
                var data = window.external.getHtmlCode(api_url, url);
                var jo = JSON.parse(data);
                var html = 'title:\"' + jo.data.name + '\"$';

                var p = parseInt(window.external.sp) || 1;
                var pmax = 199;
                var pidx = 0;
                var hasMore = true;
                args += '&ps=15&material_type=19&pn=';
                while (true) {
                    if (pidx > pmax)
                        break;
                    var api_url = 'https://cool.bilibili.com/x/co-create/user/material_list?' + args + p + '&t=' + Date.now();
                    var data = window.external.getHtmlCode(api_url, url);
                    if (data.indexOf('material_list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.material_list.length - 1; i++) {
                        var item = jo.data.material_list[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.videopre_url + '\",thumbnail:\"' + item.cover + '\",duration:' + item.duration + ',play:' + item.used_count + ';\r\n';
                    }
                    p++;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="acfun" watchList="true" delay="500">
        <url><![CDATA[acfun\.cn/v/(?<id>\w+\d+)_\d+]]></url>
        <title><![CDATA[<h1\s+class="title">(?:<span>)?([^<]+)]]></title>
        <content><![CDATA[(?is)<li\s+title="(?<title>[^"]+)"\s+class="single-p.*?data-href="(?<url>[^"]+).*?duration="(?<duration>[^"]+).*?date="(?<date>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.acfun.cn]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.acfun.cn/v/ac11449015_2   已下架
                //https://www.acfun.cn/v/ac15429966_2
                var ul = undefined;
                for (var i = 0; i <= document.getElementsByTagName('ul').length - 1; i++) {
                    var cn = document.getElementsByTagName('ul')[i].className;
                    if (cn.indexOf('scroll-div') != -1) {
                        ul = document.getElementsByTagName('ul')[i];
                        break;
                    }
                }
                if (ul) {
                    for (var i = 0; i <= ul.childElementCount - 1; i++) {
                        var li = ul.childNodes[i];
                        var vl = window.pageInfo.videoList || window.bangumiList.items;
                        for (var j = 0; j <= vl.length - 1; j++) {
                            var item = vl[j];
                            var title = li.title || li.innerText.trim();
                            if (item.title == title || item.episodeName == title) {
                                var duration = item.durationMillis ? item.durationMillis / 1000 : 0;
                                li.setAttribute('duration', duration);
                                li.setAttribute('title', title);
                                li.setAttribute('date', item.uploadTime);
                                break;
                            }
                        }
                    }
                }
                if (document.body.innerHTML.indexOf('应版权方要求视频已下架') != -1)
                    document.body.innerHTML += '$error=抱歉，应版权方要求视频已下架$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="acfun" watchList="true" redirect="true">
        <url><![CDATA[acfun\.cn/bangumi/(?<id>[a-z]+\d+)_\d+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",date:(?<date>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.acfun.cn]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.acfun.cn/bangumi/aa6000986_36188_1709075
                //https://www.acfun.cn/bangumi/aa6000575_36188_1701302
                var bid = window.location.href.match(/bangumi\/([a-z]+\d+)/)[1];
                var pl_url = 'https://www.acfun.cn/bangumi/' + bid;
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="acfun" delay="500">
        <url><![CDATA[acfun\.cn/bangumi/(?<id>[a-z]+\d+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",date:(?<date>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.acfun.cn]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.acfun.cn/bangumi/aa6000575
                var title = window.pageInfo ? window.pageInfo.bangumiTitle : '';
                var html = 'title:\"' + title + '\"$';
                for (var i = 0; i <= window.bangumiList.items.length - 1; i++) {
                    var item = window.bangumiList.items[i];
                    if (!title)
                        title = item.bangumiTitle;
                    var video_url = '/bangumi/aa' + item.bangumiId + '_36188_' + item.itemId;
                    html += 'v_title:\"' + item.episodeName + ' ' + item.title + '\",video_url:\"' + video_url + '\",date:' + item.updateTime + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="acfun" crpj="true" delay="500">
        <url><![CDATA[acfun\.cn/u/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<a.*?href="(?<url>[^"]+).*?<img[^.>]+src="(?<thumbnail>[^"]+).*?title\s+line"[^>]*>(?<title>[^<]+).*?date">(?<date>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.acfun.cn]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.acfun.cn/u/13606113
                //https://www.acfun.cn/u/10901236 1w+视频
                var title = document.body.innerHTML.match(/data-username=\"([^\"]+)/)[1];
                var uid = window.location.href.match(/u\/(\d+)/)[1];
                var api_url = 'https://www.acfun.cn/u/' + uid + '?quickViewId=ac-space-video-list&reqID=3&ajaxpipe=1&type=video&order=newest&pageSize=20';
                var p = parseInt(window.external.sp) || 1;
                var pmax = (window.external.sp != undefined) ? 49 : 99;
                var pidx = 0;
                var hasMore = true;
                var html = 'title:\"' + title + '\"$';
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCode(api_url + '&page=' + p + '&t=' + Date.now(), window.location.href);
                    if (data.indexOf('css\":[]') != -1) {
                        hasMore = false;
                        break;
                    }

                    data = data.replace(/\\\\\"/g, '\"');
                    html += data;
                    p++;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="acfun" crpj="true" delay="500">
        <url><![CDATA[acfun\.cn/a/.*?(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.acfun.cn/v/ac]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //window.location.href会至官网域名
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerText : document.title;
                var aid = window.external.url.match(/a\/.*?(\d+)/)[1];
                var api_url = 'https://www.acfun.cn/rest/pc-direct/arubamu/content/list?size=30&arubamuId=' + aid + '&page='
                var p = 1;
                var html = 'title:\"' + title + '\"$';
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, window.location.href);
                    if (data.indexOf('contents\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.contents.length - 1; i++) {
                        var item = jo.contents[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.resourceId + '\",thumbnail:\"' + item.coverImage + '\",duration:' + (item.duration / 1000) + ',date:' + item.createTime + ',play:' + item.viewsCount + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" delay="500">
        <url><![CDATA[163\.com/(?:special/(?:[^/]+/(?<id>[^.]+)\.html?|(?<id>[^/]+))|.*?courseintro\?.*[/F](?<id>[^.]+)\.html?)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)(?:<td\s+class="u-ctitle">\s*(?<title>[^<]+)\s*<a\s+href="(?<url>[^"]+)">(?<describe>[^<]+).*?(?:<img[^>]+src="(?<thumbnail>[^"]+)"|\s*)|href="(?<url>[^"]+).*?jj">(?<title>[^<]+).*?thide">(?<describe>[^<]+)<)]]></content>
        <jsCode><![CDATA[
            try {
                var title = document.title;
                if (document.getElementsByClassName('content-title').length != 0)
                    title = document.getElementsByClassName('content-title')[0].innerText;
                else if (document.getElementsByTagName('h1').length >= 2)
                    title = document.getElementsByTagName('h1')[1].innerText;
                else if (document.getElementsByTagName('h2').length != 0)
                    title = document.getElementsByTagName('h2')[0].innerText;
                var html = 'title:\"' + title + '\"$'

                var setText = true;
                var emt = document.getElementById('list2');
                if (emt)
                    html += emt.outerHTML;
                else if (document.getElementsByClassName('flistw').length != 0) {
                    html += document.getElementsByClassName('flistw')[0].outerHTML;
                    setText = false;
                }
                else if (window.__NUXT__) {
                    var pid = window.__NUXT__.data[0].plid;
                    var baseUrl = 'http://open.163.com/newview/movie/free?pid=' + pid + '&mid=';
                    var videoList = window.__NUXT__.data[0].movieInfoList;
                    for (var i = 0; i <= videoList.length - 1; i++)
                        html += '<td class=\"u-ctitle\">【第' + (parseInt(i) + 1) + '集】<a href=\"' + baseUrl + videoList[i].mid + '\">' + videoList[i].title + '</a>';
                }

                if (setText)
                    document.body.innerText = html;
                else
                    document.body.innerHTML= html;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" watchList="true" delay="500">
        <url><![CDATA[163\.com/movie/\d{4}/\d+/.*/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                var title = window.__NUXT__.data[0].title;
                var html = 'title:\"' + title + '\"$'
                if (window.__NUXT__) {
                    var videoList = window.__NUXT__.state.movie.moiveList
                    for (var i = 0; i <= videoList.length - 1; i++) {
                        var item = videoList[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.webUrl + '\",thumbnail:\"' + item.imgPath + '\",duration:' + item.mLength + ';\r\n';
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" delay="1500">
        <url><![CDATA[163\.com/news/sub/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://c.m.163.com/news/sub/T1573191804274.html?spss=newsapp
                //https://c.m.163.com/news/sub/T1618988382432.html?spss=adap_pc
                var c={stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}};var i={stringToBytes:function(t){for(var n=[],e=0;e<t.length;e++)
                n.push(255&t.charCodeAt(e));return n},bytesToString:function(t){for(var n=[],e=0;e<t.length;e++)
                n.push(String.fromCharCode(t[e]));return n.join('')},};var r={rotl:function(t,n){return t<<n|t>>>32-n},endian:function(t){if(t.constructor==Number)
                return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var n=0;n<t.length;n++)
                t[n]=r.endian(t[n]);return t},bytesToWords:function(t){for(var n=[],e=0,r=0;e<t.length;e++,r+=8)
                n[r>>>5]|=t[e]<<24-r%32;return n},wordsToBytes:function(t){for(var n=[],e=0;e<32*t.length;e+=8)
                n.push(t[e>>>5]>>>24-e%32&255);return n},bytesToHex:function(t){for(var n=[],e=0;e<t.length;e++)
                n.push((t[e]>>>4).toString(16)),n.push((15&t[e]).toString(16));return n.join('')},};var a=function(t,n){t.constructor==String?t=n&&'binary'===n.encoding?c.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var e=r.bytesToWords(t),u=8*t.length,s=1732584193,f=-271733879,l=-1732584194,d=271733878,h=0;h<e.length;h++)
                e[h]=16711935&(e[h]<<8|e[h]>>>24)|4278255360&(e[h]<<24|e[h]>>>8);e[u>>>5]|=128<<u%32,e[14+(64+u>>>9<<4)]=u;var p=a._ff,v=a._gg,g=a._hh,y=a._ii;for(h=0;h<e.length;h+=16){var m=s,w=f,b=l,x=d;f=y(f=y(f=y(f=y(f=g(f=g(f=g(f=g(f=v(f=v(f=v(f=v(f=p(f=p(f=p(f=p(f,l=p(l,d=p(d,s=p(s,f,l,d,e[h+0],7,-680876936),f,l,e[h+1],12,-389564586),s,f,e[h+2],17,606105819),d,s,e[h+3],22,-1044525330),l=p(l,d=p(d,s=p(s,f,l,d,e[h+4],7,-176418897),f,l,e[h+5],12,1200080426),s,f,e[h+6],17,-1473231341),d,s,e[h+7],22,-45705983),l=p(l,d=p(d,s=p(s,f,l,d,e[h+8],7,1770035416),f,l,e[h+9],12,-1958414417),s,f,e[h+10],17,-42063),d,s,e[h+11],22,-1990404162),l=p(l,d=p(d,s=p(s,f,l,d,e[h+12],7,1804603682),f,l,e[h+13],12,-40341101),s,f,e[h+14],17,-1502002290),d,s,e[h+15],22,1236535329),l=v(l,d=v(d,s=v(s,f,l,d,e[h+1],5,-165796510),f,l,e[h+6],9,-1069501632),s,f,e[h+11],14,643717713),d,s,e[h+0],20,-373897302),l=v(l,d=v(d,s=v(s,f,l,d,e[h+5],5,-701558691),f,l,e[h+10],9,38016083),s,f,e[h+15],14,-660478335),d,s,e[h+4],20,-405537848),l=v(l,d=v(d,s=v(s,f,l,d,e[h+9],5,568446438),f,l,e[h+14],9,-1019803690),s,f,e[h+3],14,-187363961),d,s,e[h+8],20,1163531501),l=v(l,d=v(d,s=v(s,f,l,d,e[h+13],5,-1444681467),f,l,e[h+2],9,-51403784),s,f,e[h+7],14,1735328473),d,s,e[h+12],20,-1926607734),l=g(l,d=g(d,s=g(s,f,l,d,e[h+5],4,-378558),f,l,e[h+8],11,-2022574463),s,f,e[h+11],16,1839030562),d,s,e[h+14],23,-35309556),l=g(l,d=g(d,s=g(s,f,l,d,e[h+1],4,-1530992060),f,l,e[h+4],11,1272893353),s,f,e[h+7],16,-155497632),d,s,e[h+10],23,-1094730640),l=g(l,d=g(d,s=g(s,f,l,d,e[h+13],4,681279174),f,l,e[h+0],11,-358537222),s,f,e[h+3],16,-722521979),d,s,e[h+6],23,76029189),l=g(l,d=g(d,s=g(s,f,l,d,e[h+9],4,-640364487),f,l,e[h+12],11,-421815835),s,f,e[h+15],16,530742520),d,s,e[h+2],23,-995338651),l=y(l,d=y(d,s=y(s,f,l,d,e[h+0],6,-198630844),f,l,e[h+7],10,1126891415),s,f,e[h+14],15,-1416354905),d,s,e[h+5],21,-57434055),l=y(l,d=y(d,s=y(s,f,l,d,e[h+12],6,1700485571),f,l,e[h+3],10,-1894986606),s,f,e[h+10],15,-1051523),d,s,e[h+1],21,-2054922799),l=y(l,d=y(d,s=y(s,f,l,d,e[h+8],6,1873313359),f,l,e[h+15],10,-30611744),s,f,e[h+6],15,-1560198380),d,s,e[h+13],21,1309151649),l=y(l,d=y(d,s=y(s,f,l,d,e[h+4],6,-145523070),f,l,e[h+11],10,-1120210379),s,f,e[h+2],15,718787259),d,s,e[h+9],21,-343485551),s=s+m>>>0,f=f+w>>>0,l=l+b>>>0,d=d+x>>>0}
                return r.endian([s,f,l,d])};a._ff=function(t,n,e,r,i,o,c){var a=t+(n&e|~n&r)+(i>>>0)+c;return(a<<o|a>>>32-o)+n},a._gg=function(t,n,e,r,i,o,c){var a=t+(n&r|e&~r)+(i>>>0)+c;return(a<<o|a>>>32-o)+n},a._hh=function(t,n,e,r,i,o,c){var a=t+(n^e^r)+(i>>>0)+c;return(a<<o|a>>>32-o)+n},a._ii=function(t,n,e,r,i,o,c){var a=t+(e^(n|~r))+(i>>>0)+c;return(a<<o|a>>>32-o)+n};

                var title = (document.getElementsByTagName('h3').length != 0) ? document.getElementsByTagName('h3')[0].innerText : document.title;
                var uid = window.location.href.match(/sub\/([^.]+)/)[1];
                var api_url = 'https://c.m.163.com/nc/subscribe/list/' + uid + '/video/';
                var html = 'title:\"' + title + '\"$';
                var p = 0;
                while (true) {
                    var c = Date.now();
                    var t = uid + 'video' + p + '20' + c;
                    var e = r.bytesToHex(r.wordsToBytes(a(t)));
                    var data = window.external.getHtmlCode(api_url + p + '-20.html?w=' + c + '&sign=' + e, window.location.href, 500);
                    if (data.indexOf('tab_list\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var n = 0; n <= jo.tab_list.length - 1; n++) {
                        var v = jo.tab_list[n].videoinfo;
                        if (!v)
                            continue;
                        //m3u8无水印
                        var video_url = v.m3u8Hd_url || v.mp4Hd_url || v.m3u8_url || v.mp4_url;
                        html += 'v_title:\"' + v.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + v.cover + '\",duration:' + v.length + ',date:' + v.ptime + ',play:' + v.playCount + ';\r\n';
                    }
                    //0..20..40..
                    p += 20;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" delay="1500">
        <url><![CDATA[163\.com/newview/movie/courseintro\?newurl=(?<id>[^&]+)]]></url>
        <title><![CDATA["content-title[^>]+>([^<]+)]]></title>
        <content><![CDATA[(?is)<div\s*class="list-content.*?<span.*?>(?<title>[^<]+).*?href="(?<url>[^"]+)]]></content>
        <baseUrl><![CDATA[https://open.163.com]]></baseUrl>
        <headers><![CDATA[User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.82 Safari/537.36]]></headers>
        <jsCode><![CDATA[
            try {
                //https://open.163.com/newview/movie/courseintro?newurl=MAEBT595K
                //https://open.163.com/newview/movie/courseintro?newurl=FG7GHL52H
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" delay="1500">
        <url><![CDATA[163\.com/.*?(?:album|artist)\?id=(?<id>[^&]+)$]]></url>
        <title><![CDATA[<h2[^>]+>([^<]+)]]></title>
        <content><![CDATA[(?is)<li><a\s+href="(?<url>[^"]+)">(?<title>[^<]+)]]></content>
        <baseUrl><![CDATA[https://music.163.com/#]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://music.163.com/#/album?id=85760163
                //50条
                //https://music.163.com/#/artist?id=8922
                var url = window.external.url.replace('/#', '');
                document.getElementsByTagName('html')[0].innerHTML = window.external.getHtmlCode(url);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" delay="1500">
        <url><![CDATA[163\.com/.*?playlist\?id=(?<id>[^&]+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)"]]></content>
        <jsCode><![CDATA[
            try {
                //https://music.163.com/#/playlist?id=5199155506
                //https://music.163.com/playlist?id=5199155506
                var pid = href.match(/id=([^&]+)/)[1];
                var cookie = window.external.getCookieEx(href, 'csrfToken', 2500);
                var ct = (cookie.indexOf('csrfToken') != -1) ? cookie.match(/csrfToken=([^;]+)/)[1] : '';
                var p = { id: pid, total: true, limit: 10000, n: 10000, offset: 0, csrf_token: ct };
                var m = '00e0b509f6259df8642dbc35662901477df22677ec152b5ff68ace615bb7b725152b3ab17a876aea8a5aa76d2e417629ec4ee341f56135fccf695280104e0312ecbda92557c93870114af6c9d05c4f7f0c3685b7a46bee255932575cce10b424d813cfe4875d3e82047b97ddef52741d546b8e289dc6935b3ece0462db0a22b8e7';
                var r = window.asrsea(JSON.stringify(p), '010001', m, '0CoJUm6Qyw8W8jud');
                var args = 'params=' + encodeURIComponent(r.encText) + '&encSecKey=' + encodeURIComponent(r.encSecKey);
                var api_url = 'http://music.163.com/weapi/v3/playlist/detail';
                cookie = window.external.getCookieEx(href, 'MUSIC_U', 2500) || cookie || document.cookie;
                var headers = 'Content-Type: application/x-www-form-urlencoded\r\nReferer: ' + window.external.url + '\r\nCookie: ' + cookie;
                var data = window.external.getPostResultEx(api_url, args, headers);
                var jo = JSON.parse(data);
                var html = 'title:\"' + jo.playlist.name + '\"$';
                //前10个
                for (var i = 0; i <= jo.playlist.tracks.length - 1; i++) {
                    var item = jo.playlist.tracks[i];
                    var video_url = 'https://music.163.com/#/song?id=' + item.id;
                    html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\";\r\n';
                }
                //last...
                for (var i = 0; i <= jo.playlist.trackIds.length - 1; i++) {
                    var item = jo.playlist.trackIds[i];
                    var video_url = 'https://music.163.com/#/song?id=' + item.id;
                    if (html.indexOf(video_url) != -1)
                        continue;
                    html += 'v_title:\"' + video_url + '\",video_url:\"' + video_url + '\";\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" delay="1500">
        <url><![CDATA[163\.com/.*?artist/mv\?id=(?<id>[^&]+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li>.*?src="(?<thumbnail>[^"]+).*?href="(?<url>[^"]+)"\s+class="tit[^>]+>(?<title>[^<]+)]]></content>
        <baseUrl><![CDATA[https://music.163.com/#]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://music.163.com/#/artist/mv?id=8922
                var mid = window.external.url.match(/\?id=([^&]+)/)[1];
                var api_url = 'https://music.163.com/artist/mv?id=' + mid + '&limit=12&offset=';
                var title = '', html = '';
                var p = 0;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('u-cover u-cover-7') == -1)
                        break;
                    if (!title)
                        title = data.match(/<h2[^>]+>([^<]+)/)[1] + 'MV';
                    html += data.substring(data.indexOf('8922\">') + 6, data.indexOf('pagerBox') - 10) + '\r\n';
                    p += 12;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="163" crpj="true" watchList="true" delegate="true" delay="1500">
        <url><![CDATA[163\.com/newview/.*?pid=(?<id>[^&]+)&mid=[^&]+]]></url>
        <title><![CDATA[<title>([^-]+)]]></title>
        <content><![CDATA[(?is)\{mid:.*?title:"(?<title>[^"]+).*?mLength:(?<duration>[^,]+).*?webUrl:"(?<url>[^"]+).*?hits:(?<play>[^,]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://open.163.com/newview/movie/free?pid=M8LI1JCE6&mid=M8LI1P309
                //imgPath有些是变量，不行
                var html = window.external.getHtmlCode(window.external.url);
                var title = html.match(/video-title\"[^>]+>([^<]+)/)[1];
                html = html.replace(/\\u002F/g, '/').replace('title:U', 'title:\"' + title + '\"');
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[qq\.com/vplus/(?<id>\w+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)vid":"(?<url>[^"]+).*?duration":"(?<duration>[^"]+).*?pic_640x360":"(?<thumbnail>[^"]+).*?title":"(?<title>[^"]+)]]></content>
        <baseUrl><![CDATA[http://v.qq.com/x/page/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //http://v.qq.com/vplus/342318567
                var title = USER_INFO.name;
                var url = 'http://access.video.qq.com/pc_client/GetUserVidListPage?vappid=50662744&vsecret=64b037e091deae75d3840dbc5d565c58abe9ea733743bbaf&stUserId=' + USER_INFO.number + '&page_size=20&page_index=';
                var p = 1;
                var html = 'title:\"' + title + '\"$';
                while (true) {
                    var data = window.external.getHtmlCode(url + p);
                    data = data.replace(/\",\"map/g, '.html?\",\"map');
                    if (data.indexOf('\"iErrCode\":0') == -1)
                        break;

                    html += data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[qq\.com/[^/]+/videoplus(?:.*?vuid=(?<id>[^#]+)|/(?<id>[^/]+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[http://v.qq.com/x/page/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://v.qq.com/biu/videoplus?vuid=1486798423
                //http://v.qq.com/s/videoplus/406792155
                //https://v.qq.com/biu/videoplus?vuid=412879469
                var title = document.getElementsByClassName('top_title').length != 0? document.getElementsByClassName('top_title')[0].innerText : document.title;
                //IE兼容性
                if (title == 'version_upgrade') {
                    var data = window.external.getHtmlCode(window.external.url);
                    title = data.match(/<h3[^>]*>([^<]+)/)[1];
                    document.body.innerHTML = data;
                }

                var html = 'title:\"' + title + '\"$';
                vuid = document.body.innerHTML.match(/ vuid=\"([^\"]+)/)[1];
                var args = '{\"page_params\":{\"page_type\":\"channel_operation\",\"page_id\":\"personal_feed_page_web\",\"vuid\":\"' + vuid + '\"},\"has_cache\":0}';
                var headers = 'Content-Type: application/json\r\nReferer: https://v.qq.com\r\nCookie: video_platform=2; vversion_name=8.3.95.0';
                var api_url= 'https://pbaccess.video.qq.com/trpc.universal_backend_service.page_server_rpc.PageServer/GetPageData';
                while (true) {
                    var data = window.external.getPostResultEx(api_url, args, headers);
                    if (data.indexOf('module_datas\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    //须得判断此，否则不会结束
                    if (!jo.data.has_next_page)
                        break;
                    var items = jo.data.module_list_datas[0].module_datas;
                    for (var i = 0; i <= items.length - 1; i++) {
                        var item = JSON.parse(items[i].item_data_lists.item_datas[0].complex_json);
                        var video = item.videos[0];
                        var v_title = decodeURIComponent(escape(window.atob(video.videoAttr.title)));
                        var video_url = 'https://v.qq.com/x/page/' + atob(video.videoBase.vid) + '.html';
                        html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + video.videoAttr.time + ',date:' + item.base.time + ',play:' + video.videoAttr.playNum + ';\r\n';
                    }
                    var pc = JSON.stringify(jo.data.next_page_context);
                    args = '{\"page_params\":{\"page_type\":\"channel_operation\",\"page_id\":\"personal_feed_page_web\",\"vuid\":\"' + vuid + '\"},\"has_cache\":0,\"page_context\":' + pc + '}';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[qq\.com/.*?home\?vcuid=(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[http://v.qq.com/x/page/]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://v.qq.com/biu/creator/home?vcuid=9000020171
                //https://v.qq.com/biu/creator/home?vcuid=9000110053&folder_id=mzc00100f0veddw
                var title = document.getElementsByTagName('h3').length != 0? document.getElementsByTagName('h3')[0].innerText : document.title;
                //IE兼容性
                if (title == 'version_upgrade') {
                    var data = window.external.getHtmlCode(window.external.url);
                    title = data.match(/<h3>([^<]+)/)[1];
                }
                var url = window.external.url;
                var vcuid = url.match(/vcuid=(\d+)/)[1];
                var base_url='https://pbaccess.video.qq.com/trpc.creator_center.header_page.personal_page/GetUserVideoList?vcuid=' + vcuid + '&page_size=30&list_type=1&page=';
                var is_folder = false;
                if (url.indexOf('folder_id') != -1) {
                    is_folder = true;
                    var fid = url.match(/folder_id=([^&]+)/)[1];
                    base_url= 'https://pbaccess.video.qq.com/trpc.creator_center.folder.DetailPage/GetVideos?origin=1&folder_id=' + fid + '&page=';
                }
                var html = 'title:\"' + title + '\"$';
                var p = parseInt(window.external.sp) || 0;
                if (p == 0)
                    p = 1;
                var pmax = (window.external.sp != undefined) ? 49 : 99;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCode(base_url + p, url, 500);
                    if (!is_folder && data.indexOf('\"list\":[{') == -1 || is_folder && data.indexOf('\"videos\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    var items = !is_folder ? jo.data.data.list : jo.data.videos;
                    for (var i = 0; i <= items.length - 1; i++) {
                        var item = items[i];
                        var play = item.play_count || item.play_cnt;
                        play = play.replace('次播放', '');
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.vid + '.html\",duration:' + item.duration + ',date:' + item.upload_time + ',play:' + play + ';\r\n';
                    }

                    p++;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" crpj="true" redirect="true">
        <url><![CDATA[qq\.com/.*?mix.html\?vcuid=(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://m.v.qq.com/doki/personal/mix.html?vcuid=9000143815
                var pl_url = 'https://v.qq.com/biu/creator/home?' + window.external.url.match(/vcuid=[^&]+/)[0];
                document.body.innerHTML = 'title:\"' + pl_url + '\",cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" crpj="true">
        <url><![CDATA[qq\.com/detail/\w/(?<id>\w+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)pic":"(?<thumbnail>[^"]*).*?playUrl":"(?:.*?url=)?(?<url>[^"]+).*?title":"(?<title>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                var title = document.body.innerHTML.match(/info:title\">([^<]+)<\/a>/)[1];
                var id = window.external.url.match(/\/(\w+)\.html?/)[1];
                var html = 'title:\"' + title + '\"$';
                //normal
                //https://v.qq.com/detail/m/m441e3rjq9kwpsc.html
                //https://v.qq.com/detail/s/sdp001uffzr2rjq.html from iqiyi，因此plname=空可解，非是=qq，其url为https://v.qq.com/search_redirect.html?url=https://www.iqiyi.com/v_19rrh4ohvw.html?vfm=m_103_txsp此类
                if (document.getElementsByClassName('slt_list').length == 0) {
                    var api_url = 'https://s.video.qq.com/get_playsource?id=' + id + '&plat=2&type=4&data_type=2&video_type=9&range=1-9999&plname=&otype=json&num_mod_cnt=20&callback=_jsonp&_t=' + Date.now();
                    html += window.external.getHtmlCode(api_url, window.external.url);
                }
                //year & month
                else {
                    var years = document.getElementsByClassName('slt_list')[0].innerText.split('\n').filter(function(item) { return item.trim() != ''});
                    var base_url = 'https://s.video.qq.com/get_playsource?id=' + id + '&plat=2&type=4&data_type=3&video_type=10&plname=&otype=json&callback=_jsonp&_t=' + Date.now();
                    for (var i = 0; i <= years.length - 1; i++) {
                        var y = years[i].trim();
                        for (var m = 12; m >= 1; m--) {
                            var api_url = base_url + '&year=' + y + '&month=' + m;
                            var data = window.external.getHtmlCode(api_url, window.external.url);
                            if (data.indexOf('PlaylistItem\":{') != -1)
                                html += data;
                        }
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" watchList="true" crpj="true" delegate="true">
        <url><![CDATA[qq\.com/\w/cover/(?<id>\w+)/\w+\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]*)]]></content>
        <jsCode><![CDATA[
            try {
                //https://v.qq.com/x/cover/mzc00200k12f5gi/s0033w5isu7.html
                //https://v.qq.com/x/cover/mzc00200zfxryzs/p00343dzkyn.html
                //https://v.qq.com/x/cover/y0jueuihog64xhb/u00442553up.html 316集
                //https://v.qq.com/x/cover/ceusrubximxm0g8/d0023mrtaq9.html 95集
                var url = window.external.url;
                var html = window.external.getHtmlCode(url);
                var title = html.match(/\"title\":\"([^\"]+)/)[1];
                var lid = (html.indexOf('lid=') != -1) ? html.match(/lid=(?:&cid=)?([^&]*)/)[1] : '';
                html = 'title:\"' + title + '\"$';
                var cid = url.match(/cover\/([^/]+)/)[1];
                var vid = url.match(/cover\/[^/]+\/([^.]+)/)[1];
                var headers = 'Content-Type: application/json\r\nCookie: vversion_name=8.2.95\r\nReferer: https://v.qq.com/';
                var api_url = 'https://pbaccess.video.qq.com/trpc.universal_backend_service.page_server_rpc.PageServer/GetPageData?video_appid=3000010&vplatform=2';
                var p = 0;
                var lvid = '';
                while (true) {
                    var b = p * 60 + 1, e = p * 60 + 60;
                    var pc = 'episode_begin=' + b + '&episode_end=' + e + '&episode_step=60&page_num=' + p + '&page_size=60';
                    var args = '{\"page_params\":{\"req_from\":\"web_vsite\",\"page_id\":\"vsite_episode_list\",\"page_type\":\"detail_operation\",\"cid\":\"' + cid + '\",\"vid\":\"' + vid + '\",\"lid\":\"' + lid + '\",\"page_size\":\"60\",\"page_context\":\"' + pc + '\"}}';
                    var data = window.external.getPostResultEx(api_url, args, headers);
                    //2021.09.24测试，它可以一直取下去，因此再加cid判断
                    if (data.indexOf('module_list_datas\":[{') == -1 || data.indexOf(cid) == -1) {
                        //lid不为空不行？https://v.qq.com/x/cover/mzc00200ilydv1a/x0033pef1cg.html
                        args = '{\"page_params\":{\"req_from\":\"web_vsite\",\"page_id\":\"vsite_episode_list\",\"page_type\":\"detail_operation\",\"cid\":\"' + cid + '\",\"vid\":\"' + vid + '\",\"lid\":\"\",\"page_size\":\"60\",\"page_context\":\"' + pc + '\"}}';
                        data = window.external.getPostResultEx(api_url, args, headers);
                    }
                    if (data.indexOf('module_list_datas\":[{') == -1 || data.indexOf(cid) == -1)
                        break;
                    if (lvid && data.indexOf(lvid) != -1) {
                        args = '{\"page_params\":{\"req_from\":\"web_vsite\",\"page_id\":\"vsite_episode_list\",\"page_type\":\"detail_operation\",\"cid\":\"' + cid + '\",\"vid\":\"' + vid + '\",\"lid\":\"' + lid + '\",\"page_size\":\"60\",\"page_context\":\"\"}}';
                        data = window.external.getPostResultEx(api_url, args, headers);
                    }
                    //https://v.qq.com/x/cover/mzc00200fl1xds9/c31349ay0zm.html 14集
                    if (lvid && data.indexOf(lvid) != -1)
                        break;
                    var jo = JSON.parse(data);
                    var items = jo.data.module_list_datas[0].module_datas[0].item_data_lists.item_datas;
                    lvid = items[0].item_params.vid;
                    //https://v.qq.com/x/cover/mzc00371kp5x3yx/g3369aegzg9.html 不置空取不到开始
                    if (html.indexOf(lvid) != -1)
                        break;

                    for (var i = 0; i <= items.length - 1; i++) {
                        var ip = items[i].item_params;
                        //if (ip.is_trailer != '0')
                        //    continue;
                        var video_url = 'https://v.qq.com/x/cover/' + ip.cid + '/' + ip.vid + '.html';
                        html += 'v_title:\"' + (ip.play_title || ip.union_title || ip.title) + '\",video_url:\"' + video_url + '\",duration:' + ip.duration + ',date:' + ip.publish_date + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" crpj="true">
        <url><![CDATA[qq\.com/portal/(?:mv_lib\.html?|.*?t=mv)]]></url>
        <title><![CDATA[<title>(.+?)</title>]]></title>
        <content><![CDATA[(?is)<li\s+class="mv_list__item".*?<img.*?src="//(?<thumbnail>[^"]+).*?<a\s+title="(?<title>[^"]+).*?href="(?<url>[^"]+)]]></content>
    </item>
    <item domain="qq" crpj="true">
        <url><![CDATA[qq\.com/\w+/r?yqq/(?:album(?:Detail)?|singer|playlist|)/(?<id>\w+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li.*?txt"><a[^>]+href="(?<url>[^"]+)">(?<title>[^<]+).*?songlist__time">(?<duration>[^<]+)</div>.*?</li>]]></content>
        <baseUrl><![CDATA[https://y.qq.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://y.qq.com/n/ryqq/singer/001stwbx0IVxzs
                //https://y.qq.com/n/ryqq/albumDetail/000She381Ikavc
                //https://y.qq.com/n/ryqq/playlist/8446210949
                var title = document.getElementsByTagName('h1').length > 1 ? document.getElementsByTagName('h1')[1].innerText : document.title;
                var html = 'title:\"' + title + '\"$' + document.getElementsByClassName('songlist__list')[0].innerHTML;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[qq\.com/\w+/person\.html\?userid=(?<id>[^&]+)]]></url>
        <title><![CDATA[person-name">([^<]+)</div>]]></title>
        <content><![CDATA[(?is)tvBoard".*?imageUrl":"(?<thumbnail>[^"]+).*?vid":"(?<url>[^"]+).*?title":"(?<title>[^"]+).*?duration":(?<duration>[^}]+)]]></content>
        <baseUrl><![CDATA[base_url=([^$]+)]]></baseUrl>
        <jsCode><![CDATA[
            try {
                var uid = window.location.href.match(/userid=([^&]+)/)[1];
                var base_url = 'https://huoguo.qq.com/m/video.html?userid=' + uid + '&id=';
                var api_url = 'https://hgaccess.video.qq.com/huoguo/user_work_list?vappid=49109510&vsecret=c1202d7f3ba41f86cdd2d3d1082605b4ed764c21e29520f3&callback=func&raw=1';
                var pc = '\"\"';
                var html = 'base_url=' + base_url + '$';
                while (true) {
                    var args = '{\"account\":{\"id\":\"' + uid + '\",\"type\":50},\"pageContext\":' + pc + ',\"countReg\":true}';
                    var data = window.external.getPostResultEx(api_url, args);
                    data = data.replace('\"offset\"', '\\\"offset\\\"');
                    data = data.replace('\"page_size\"', '\\\"page_size\\\"');
                    data = data.replace('\"time\"', '\\\"time\\\"');
                    data = data.replace('\"last_node_id\":\"', '\\\"last_node_id\\\":\\\"');
                    data = data.replace('\",\"last_node_score\"', '\\\",\\\"last_node_score\\\"');
                    data = data.replace('\"top_vid_set\"', '\\\"top_vid_set\\\"');
                    var jo = JSON.parse(data);
                    html += JSON.stringify(jo.data.collections);
                    if (!jo.data.hasNextPage)
                        break;
                    pc = JSON.stringify(jo.data.pageContext);
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[qq\.com/course/(?<id>\d+)(?:\?q.*?)?$]]></url>
        <title><![CDATA[<h4[^>]+>([^<]+)</h4>]]></title>
        <content><![CDATA[(?is)<li\s+class="js-task.*?(?<url>\?taid=\d+).*?text">(?<title>[^<]+)</h5>]]></content>
        <baseUrl><![CDATA[^.*?/course/\d+]]></baseUrl>
        <jsCode><![CDATA[
            try {
                var html = document.getElementById('js-study-task-list').innerHTML;
                html = html.replace(/taid=\"/g, '?taid=');
                document.body.innerText = html;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" watchList="true">
        <url><![CDATA[qq\.com/course/(?<id>\d+)\?taid=\d+]]></url>
        <title><![CDATA[<h4[^>]+>([^<]+)</h4>]]></title>
        <content><![CDATA[(?is)<li\s+class="js-task.*?(?<url>taid=\d+).*?text">(?<title>[^<]+)</h5>]]></content>
        <baseUrl><![CDATA[^.*?/course/\d+\?]]></baseUrl>
    </item>
    <item domain="qq" crpj="true">
        <url><![CDATA[qq\.com/\w+/search.*?q=([^&]+)]]></url>
        <title><![CDATA[<title>([^-]+)-腾讯视频</title>]]></title>
        <content><![CDATA[(?is)<div\s+class="result_item.*?href="(?<url>[^"]+).*?figure_info">(?<duration>[^<]+).*?title_txt=(?<title>[^"]+)]]></content>
    </item>
    <item domain="qq" delay="1500">
        <url><![CDATA[qq\.com/usershare.*?id=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //2022.10.11此方式电脑端失效，手机抓包，更新解析
                //https://usercenter.html5.qq.com/usershare?type=9&id=qeh_8995416&tabType=1
                //https://usercenter.html5.qq.com/usershare?type=15&id=puin_1001001669035&tabType=11&token=...
                var title = window._renderData_.userCenter.userHeaderData.toUserInfo.sNickName;
                var uid = window._renderData_.userCenter.userId
                var type = window._renderData_.userCenter.accountType;
                var ttype = 11; //11，取其视频，而非 window._renderData_.userCenter.tabType;
                var lt = '', vid = window.external.sp;
                if (vid == undefined || vid == '0')
                    vid = '';
                var args = 'id=' + uid + '&accountType=' + type + '&feedType=0';
                args = '{\"id\":\"' + uid + '\",\"type\":\"' + type +'\",\"tabType\":\"' + ttype + '\",\"count\":20,\"extInfo\":{\"lastTime\":\"' + lt + '\",\"video\":\"' + vid + '\"}}';
                var html = 'title:\"' + title + '\"$';
                var pmax = (window.external.sp != undefined) ? 39 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getPostResult('https://usercenter.html5.qq.com/getUserCenterInfo', args, 'application/json', window.location.href, 200);
                    //只取有视频之链接。无视的，此信息："context":{"lastTime":"1639989948","article":"59761c0438252952"}},
                    if (data.indexOf('items\":[{') == -1 || data.indexOf('video\":\"') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    lt = jo.data.context.lastTime;
                    vid = jo.data.context.video;
                    for (var i = 0; i <= jo.data.items.length - 1; i++) {
                        var item = jo.data.items[i];
                        var date = item.expandInfo.feed_time;
                        var ju = JSON.parse(item.uiJson);
                        var video_url = ju.bottom.sharedUrl;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:0,date:' + date + ';\r\n';
                    }
                    args = '{\"id\":\"' + uid + '\",\"type\":\"' + type +'\",\"tabType\":\"' + ttype + '\",\"count\":20,\"extInfo\":{\"lastTime\":\"' + lt + '\",\"video\":\"' + vid + '\"}}';
                    pidx++;
                }
                html = 'startPage:' + vid + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[qq\.com/mobile/qqliveProfile\?mediaid=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://m.om.qq.com/mobile/qqliveProfile?mediaid=Mzil6YTKKXM39iKU8HLKd35A0
                var mid = window.external.url.match(/mediaid=([^&]+)/)[1];
                var api_url = 'https://m.om.qq.com/author/GetUserDesc?userid=' + mid + '&r=' + Date.now();
                var data = window.external.getHtmlCode(api_url);
                var jo = JSON.parse(data);
                var title = jo.data.name;
                var cookie = window.external.getCookieEx(window.external.url, 'omagent-session-id', 2500);
                if (cookie) {
                    var osid = cookie.match(/omagent-session-id=([^;]+)/)[1];
                    var html = 'title:\"' + title + '\"$';
                    var headers = 'Content-Type: application/json\r\nCookie: ' + cookie + '\r\nReferer: ' + window.external.url;
                    var p = 1;
                    while (true) {
                        var args = '{\"media_id\":\"' + mid + '\",\"atype\":1,\"pagination\":{\"page\":' + p + ',\"limit\":10},\"r\":' + Date.now() + ',\"g_tk\":' + djb(osid) + '}';
                        var data = window.external.getPostResultEx('https://m.om.qq.com/qqlive/GetArticleListOut', args, headers);
                        if (data.indexOf('result\":\"{') == -1)
                            break;

                        var jo = JSON.parse(data);
                        jo = JSON.parse(jo.data.result);
                        var videos = jo.articles;
                        for (var i = 0; i <= videos.length - 1; i++) {
                            var video = videos[i];
                            jo = JSON.parse(video.Fvideo.replace(/\\\\\"/g, '\"'));
                            html += 'v_title:\"' + video.Ftitle.replace(/\"/g, '\'') + '\",video_url:\"' + video.Furl + '\",duration:' + jo.duration + ',date:' + video.Fpub_time + ';\r\n';
                        }
                        p++;
                    }
                    window.external.receive(html);
                }

                //...
                function djb(e) {
                    for (var t = 5381, n = 0, r = e.length; n < r; ++n)
                        t += (t << 5) + e.charCodeAt(n);
                    return 2147483647 & t
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" delegate="true">
        <url><![CDATA[weishi\.qq\.com/weishi/personal/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]+),video_url:(?<url>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://h5.weishi.qq.com/weishi/personal/1524501680277894/wspersonal?_wv=1&id=1524501680277894
                var pid = window.external.url.match(/personal\/([^/]+)/)[1];
                var attach_info = '';
                var args = 'type=1&person_id=' + pid + '&format=json&attach_info=';
                var api_url = 'https://h5.weishi.qq.com/webapp/json/weishi/WSGetPersonalPage?';
                var title = '', html = '';
                while (true) {
                    var data = '';
                    try {
                        //NetworkError?
                        var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveObject('Microsoft.XMLHTTP');
                        xhr.open('GET', api_url + args + attach_info, false);
                        xhr.send(null);
                        data = xhr.responseText;
                    }
                    catch (ex) {
                        data = window.external.getHtmlCode(api_url + args + attach_info, window.external.url);
                    }
                    if (data.indexOf('feeds\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.data.profile.person.nick;
                    var feeds = jo.data.feeds;
                    for (var i = 0; i <= feeds.length - 1; i++) {
                        var feed = feeds[i];
                        var video_url = 'https://h5.weishi.qq.com/weishi/feed/' + feed.id + '/wsfeed?wxplay=1&id=' + feed.id;
                        html += 'v_title:\"' + feed.feed_desc.replace(/\"/g, '\'') + '\",duration:' + (feed.video.duration / 1000) + ',video_url:' + video_url + ',date:' + feed.createtime + ';\r\n';
                    }
                    if (jo.data.is_finished)
                        break;
                    attach_info = encodeURIComponent(jo.data.attach_info);
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" delegate="true">
        <url><![CDATA[weishi\.qq\.com/.*?/wspersonal.*?id=(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://isee.weishi.qq.com/ws/app-pages/wspersonal/index.html?_wv=1&id=1534078572730074&spid=1549933666537029&id=1534078572730074&spid=1534078572730074
                var pid = window.external.url.match(/id=([^&]+)/)[1];
                var headers = 'Content-Type: application/json\r\nUser-Agent: ' + navigator.userAgent + '\r\nReferer: https://isee.weishi.qq.com/';
                var args = '{\"attach_info\":\"\",\"type\":1,\"person_id\":\"' + pid + '\"}';
                var title = '', html = '';
                var c = 0;
                while (true) {
                    //有客户机子，慢极，用xhr，不限超时时间
                    var data = '';
                    try {
                        //NetworkError?
                        var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveObject('Microsoft.XMLHTTP');
                        xhr.open('POST', 'https://h5.weishi.qq.com/webapp/json/weishi/WSGetPersonalPage?g_tk=', false);
                        xhr.setRequestHeader('Content-Type', 'application/json');
                        xhr.send(args);
                        data = xhr.responseText;
                    }
                    catch (ex) {
                        data = window.external.getPostResult('https://h5.weishi.qq.com/webapp/json/weishi/WSGetPersonalPage?g_tk=', args);
                    }
                    if (data.indexOf('feeds\":[{') == -1) {
                        for (var i = 0; i <= 2; i++) {
                            data = window.external.getPostResult('https://h5.weishi.qq.com/webapp/json/weishi/WSGetPersonalPage?g_tk=', args);
                            if (data.indexOf('feeds\":[{') != -1)
                                break;
                            delay(200);
                        }
                    }
                    if (data.indexOf('feeds\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.feeds.length - 1; i++) {
                        var item = jo.data.feeds[i];
                        if (!title)
                            title = item.poster.nick;
                        var thumbnail = (item.images.length != 0) ? item.images[0].url : '';
                        //不取直下地址以避免失效
                        var video_url = 'https://h5.weishi.qq.com/weishi/feed/' + item.id + '/wsfeed?wxplay=1&id=' + item.id;
                        html += 'v_title:\"' + item.feed_desc.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + (item.video.duration / 1000) + ',date:' + item.createtime + ',play:' + item.playNum + ';\r\n';
                    }
                    if (jo.data.is_finished)
                        break;
                    var ai = jo.data.attach_info.replace(/\\/g, '\\\\').replace(/\"/g, '\\\\\"');
                    args = '{\"attach_info\":\"' + ai + '\",\"type\":1,\"person_id\":\"' + pid + '\"}';
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" watchList="true" delegate="true" redirect="true">
        <url><![CDATA[weixin\.qq\.com/\w/(?<id>[^/]+).*?#p=\d+]]></url>
        <title><![CDATA[<h[12][^>]*>([^<]+)]]></title>
        <content><![CDATA[(?:<iframe[^>]+cover="(?<thumbnail>[^"]*)"[^>]+src="(?<url>[^"]+)[^>]+title="(?<title>[^"]+)|<td.*?href="(?<url>[^"]+).*?data-src="(?<thumbnail>[^"]+))]]></content>
        <jsCode><![CDATA[
            try {
                //v1.8.6.x，软件中判断。p=以做标记
                //https://mp.weixin.qq.com/s/in6vCgihvhq8QeSvHOS7jw
                //https://mp.weixin.qq.com/s/lEHGH77odjbqgfkedOxhjw 表格形式
                var html = window.external.getHtmlCode(window.external.url);
                var pl_url = html.match(/og:url\"\s*content=\"([^\"]+)/)[1].replace(/&amp;/g, '&');
                pl_url = pl_url.match(/http.*?sn=[^&]+/)[0];
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" watchList="true" delay="2500">
        <url><![CDATA[weixin\.qq\.com/\w\?.*?__biz=(?<id>[^/&]+)]]></url>
        <title><![CDATA[<h[12][^>]*>([^<]+)]]></title>
        <content><![CDATA[(?:<iframe[^>]+cover="(?<thumbnail>[^"]*)"[^>]+src="(?<url>[^"]+)[^>]+title="(?<title>[^"]+)|<td.*?href="(?<url>[^"]+).*?data-src="(?<thumbnail>[^"]+))]]></content>
        <jsCode><![CDATA[
            try {
                //https://mp.weixin.qq.com/s?__biz=Mzg2NzUyMjk1MQ==&mid=2247484294&idx=1&sn=ecd0acec3a19282d7caa9e34e04195d4
                //https://mp.weixin.qq.com/s?__biz=MzA5MjIyMDUxNg==&mid=2650035622&idx=4&sn=5049d7df2f79d052be1156cc370cb24f 表格
                //https://mp.weixin.qq.com/s?__biz=MzA4NTIyMjMyMw==&idx=1&mid=2653167332&sn=db2f206564d12331a2bfcd9ab730a696 信息于页面中，js
                var html = document.body.innerHTML;
                var title = document.body.innerHTML.match(/<h[12][^>]*>([^<]+)<\/h[12]>/)[1];
                var url = window.external.url;
                if (window.videoPageInfos && document.getElementsByTagName('iframe').length != 0) {
                    html = html.match(/<h[12][^>]*>[^<]+<\/h[12]>/)[0] + '\r\n$';
                    var frames = document.getElementsByTagName('iframe');
                    for (var i = 0; i <= frames.length - 1; i++) {
                        var frame = frames[i];
                        //https://mp.weixin.qq.com/s?__biz=Mzg2NzU5ODE3Ng==&mid=2247487579&idx=3&sn=2314a551bd847535d93b35a34505ca15
                        if (frame.previousElementSibling && frame.previousElementSibling.tagName.toLowerCase() == 'strong')
                            title = frame.previousElementSibling.innerText;
                        //https://mp.weixin.qq.com/s/tVD-aQ9tjMsakmUDyaCcsg
                        else {
                            var p = frame.parentElement;
                            while (p) {
                                if (p.previousElementSibling && p.previousElementSibling.tagName.toLowerCase() == 'p') {
                                    if (p.previousElementSibling.innerText)
                                        title = p.previousElementSibling.innerText;
                                    break;
                                }
                                p = p.parentElement;
                            }
                        }
                        var video_url = url + '&vid=' + frame.dataset.mpvid;
                        html += '<iframe data-cover=\"' + decodeURIComponent(frame.dataset.cover) + '\" data-src=\"' + video_url + '\" title=\"' + title + '\">\r\n';
                    }
                }
                else if (document.body.innerHTML.indexOf('<td') == -1)
                    html += '<iframe data-cover=\"\" data-src=\"' + url + '\" title=\"' + title + '\">\r\n';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq">
        <url><![CDATA[weixin\.qq\.com/.*?album_id=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://mp.weixin.qq.com/mp/appmsgalbum?__biz=MzkwNDE5MzE1Nw==&action=getalbum&album_id=1691971530290692101&from_msgid=2247484422&from_itemidx=1&nolastread=1#wechat_redirect
                //https://mp.weixin.qq.com/mp/appmsgalbum?__biz=Mzg3MzY2OTIxMQ==&action=getalbum&album_id=2018420367328903168&channel_session_id=&sessionid=svr_514c273e845&scene=168&subscene=136
                var aid = window.external.url.match(/album_id=([^&]+)/)[1];
                var title = document.title;
                var bm = 0, bi = 0;
                var base_url = 'https://mp.weixin.qq.com/mp/appmsgalbum?action=paging&album_id=' + aid + '&count=20&';
                var html = '';
                while (true) {
                    var api_url = base_url + 'begin_msgid=' + bm + '&begin_itemidx=' + bi;
                    var data = window.external.getHtmlCode(api_url, window.external.url);
                    if (data.indexOf('article_list\":[]') != -1)
                        break;

                    var jo = JSON.parse(data);
                    if (!title) {
                        if (jo.getalbum_resp.public_tag_info)
                            title = jo.getalbum_resp.public_tag_info.tag_name;
                        else if (jo.getalbum_resp.base_info)
                            title = jo.getalbum_resp.base_info.title;
                    }
                    var al = jo.getalbum_resp.article_list;
                    bm = al[al.length - 1].msgid;
                    bi = al[al.length - 1].itemidx;
                    for (var i = 0; i <= al.length - 1; i++) {
                        var item = al[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",duration:' + item.video_duration + ',date:' + item.create_time + ';\r\n';
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" watchList="true">
        <url><![CDATA[sports\.qq\.com/.*?game\.html?\?mid=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://sports.qq.com/kbsweb/game.htm?mid=100002:20211728
                var mid = window.external.url.match(/mid=([^&]+)/)[1];
                var api_url = 'https://matchweb.sports.qq.com/kbs/matchDetail?mid=' + mid + '&callback=';
                var data = window.external.getHtmlCode(api_url, window.external.url);
                var jo = JSON.parse(data);
                var title = jo.data.matchInfo.title;
                api_url = 'https://matchweb.sports.qq.com/kbs/matchVideoAll?mid=' + mid + '&callback=';
                data = window.external.getHtmlCode(api_url, window.external.url);
                jo = JSON.parse(data);
                var html = 'title:\"' + title + '\"$';
                //集锦
                for (var i = 0; i <= jo.data.totalList.length - 1; i++) {
                    var item = jo.data.totalList[i];
                    var video_url = 'https://v.qq.com/x/page/' + item.vid + '.html';
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.checkUpTime + ',play:' + item.view + ';\r\n';
                }
                //回放
                for (var i = 0; i <= jo.data.playbackList.length - 1; i++) {
                    var item = jo.data.playbackList[i];
                    var video_url = 'https://v.qq.com/x/page/' + item.vid + '.html';
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.checkUpTime + ',play:' + item.view + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qq" delegate="true">
        <url><![CDATA[inews\.qq\.com/u/(?<id>[^?&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://view.inews.qq.com/u/8QMZ23dY5Iwbujo%3D?devid=2551A67C-16F2-44E4-B6CD-D85A704B7554&qimei=1c3f859fc25f2d4f414cc42c000013b15b07
                var html = '', title = '';
                var uid = window.external.url.match(/u\/([^?&]+)/)[1];
                //视频
                var api_url = 'https://r.inews.qq.com/share/getSubNewsMixedList?guestSuid=' + uid + '&tabId=om_video&offset_info=';
                var offset = '';
                while (true) {
                    var data = window.external.getHtmlCode(api_url + offset, window.external.url);
                    if (data.indexOf('newslist\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.newslist.length - 1; i++) {
                        var item = jo.newslist[i];
                        if (!title)
                             title = item.uinnick;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",duration:' + item.video_channel.video.duration + ',date:' + item.time + ',play:' + item.video_channel.video.playcount + ';\r\n';
                    }
                    offset = jo.offsetInfo;
                }
                //小视频
                api_url = 'https://r.inews.qq.com/share/getSubNewsMixedList?guestSuid=' + uid + '&tabId=om_miniVideo&offset_info=';
                offset = '';
                while (true) {
                    var data = window.external.getHtmlCode(api_url + offset, window.external.url);
                    if (data.indexOf('newslist\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.newslist.length - 1; i++) {
                        var item = jo.newslist[i];
                        if (!title)
                             title = item.uinnick;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",duration:' + item.video_channel.video.duration + ',date:' + item.time + ',play:' + item.video_channel.video.playcount + ';\r\n';
                    }
                    offset = jo.offsetInfo;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" crpj="true">
        <url><![CDATA[youku\.com/(?:\w/|profile\?uid=)(?<id>[^/&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://i.youku.com/u/UODI1MDA0NzgzNg==
                //https://i.youku.com/i/UNTU5Njc3MTA5Ng==/videos?spm=a2hzp.8244740.0.0
                //https://m.youku.com/profile?uid=UODI1MDA0NzgzNg==&callApp=1&callVideo=true&sharekey=32b0698a249bc5e6556f5b77d30bea885&qq-pf-to=pcqq.group
                //https://www.youku.com/profile/index/?spm=a2h0c.8166622.PhoneSokuPgc_1.dportrait&uid=UNjYxMDM3MjAwMA==
                //为避免优酷反扒导致页面解析取不到缩略图，这里的是小缩略图，用它
                //ns故，不再设计分页
                var title = '', html = '';
                var href = window.location.href;
                var uid = href.indexOf('uid=') != -1 ? href.match(/uid=([^&]+)/)[1] : href.match(/\/\w\/([^?\/]+)/)[1];
                uid = encodeURIComponent(uid);
                var p = 1, ns = '';
                while (true) {
                    var api_url = 'https://www.youku.com/profile/profile-data?type=video&pageNo=' + p + '&nextSession=' + ns + '&uid=' + uid + '&_=' + Date.now();
                    var data = window.external.getHtmlCode(api_url, href);
                    if (data.indexOf('moduleList\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    var cl = jo.data.componentList;
                    if (!title) {
                        for (var i = 0; i <= cl.length - 1; i++) {
                            if (cl[i].componentId == 'pc-profile-user') {
                                title = cl[i].moduleList[0].data.nickName;
                                break;
                            }
                        }
                    }
                    for (var i = 0; i <= cl.length - 1; i++) {
                        if (cl[i].componentId == 'pc-profile-video') {
                            for (var j = 0; j <= cl[i].moduleList.length - 1; j++) {
                                var item = cl[i].moduleList[j].data;
                                html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"https:' + item.videoLink + '\",duration:' + item.summary + ',date:' + item.subTitle + ';\r\n';
                            }
                            ns = encodeURIComponent(cl[i].nextSession);
                            break;
                        }
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" redirect="true">
        <url><![CDATA[youku\.com/profile/.*?uid=(?<id>[^/&]+)]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)<div\s+class="v-thumb.*?img\s+src="(?<thumbnail>[^"]+).*?<a[^>]+href="(?<url>[^"]+)[^>]+title="(?<title>[^"]+)(?:.*?v-time">(?<duration>[^<]+))?(?:.*?v-publishtime">(?<date>[^<]*))?]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.youku.com/profile/index/?spm=a2hbt.13141534.1_1.1&uid=UMTQyODQ0MzE2&qq-pf-to=pcqq.c2c
                var uid = window.location.href.match(/uid=([^&]+)/)[1];
                document.body.innerHTML = 'cr_playlist_url=https://i.youku.com/i/' + uid + '/videos?$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" crpj="true">
        <url><![CDATA[youku\.com/show/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)p-thumb"><a\s+title="(?<title>[^"]+)"\s+href="//(?<url>[^"]+).*?<img[^>]+src="(?<thumbnail>[^"]+).*?<span>(?<duration>[^<]+)</span>]]></content>
        <jsCode><![CDATA[
            try {
                //https://list.youku.com/show/id_zbd438d506a4911e4b522.html
                //https://list.youku.com/show/id_z5eefbfbd40db817a11ef.html?qq-pf-to=pcqq.c2c
                var title = document.body.innerHTML.match(/<\/a>：([^<]+)/)[1];
                var html = 'title:\"' + title + '\"$';
                var showid = PageConfig.showid;
                var api_url = 'https://list.youku.com/show/module?id=' + showid + '&tab=showInfo&callback=jq&_=' + Date.now();
                var data = window.external.getHtmlCode(api_url);
                data = data.substring('window.jq && jq('.length, data.length - 2);
                data = JSON.stringify(JSON.parse(data));
                var matchs = document.body.innerHTML.match(/reload_[^\"]+/g);
                for (var i = 0; i <= matchs.length - 1; i++) {
                    var reload = matchs[i];
                    api_url = 'https://list.youku.com/show/point?id=' + showid + '&callback=jq&stage=' + reload + '&_=' + Date.now();
                    data = window.external.getHtmlCode(api_url);
                    data = data.substring('window.jq && jq('.length, data.length - 2);
                    data = JSON.stringify(JSON.parse(data));
                    data = data.replace(/\\\\\"/g, '\"');
                    html += data;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" crpj="true" redirect="true">
        <url><![CDATA[youku\.com/v_nextstage/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[]]></content>
        <jsCode><![CDATA[
            try {
                //https://v.youku.com/v_nextstage/id_efbfbd66efbfbd365eef.html?spm=a2h0c.8166622.PhoneSokuProgram_1.dtitle
                //https://v.youku.com/v_nextstage/id_deea83b06b3f42ed8255.html?spm=a2h0c.8166622.PhoneSokuProgram_1.dtitle
                document.body.innerHTML = 'cr_playlist_url=' + window.location.href + '$'
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" watchList="true" crpj="true" delay="0">
        <url><![CDATA[youku\.com/v_show/id_.*?\.html?.*(?<!f=\d+&)s=(?<id>.*?)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)(?:<(?:a|div)\s+title=['"](?<title>.*?)['"]\s+class.*?href="(?<url>[^"]+)(?:.*?summary">(?<duration>[^<]+))?|v_title:"(?<title>[^"]*)",video_url:(?<url>[^;]*))]]></content>
        <jsCode><![CDATA[
            try {
                //https://v.youku.com/v_show/id_XNTIwMjMxMDYwNA==.html?spm=a2h0c.8166622.PhoneSokuProgram_1.3&lang=%E6%99%AE%E9%80%9A%E8%AF%9D&s=aced57b4be314ac98f17
                //<div title='对妻子"肉麻"聊天的报复行为 两个月胎儿的姓氏争夺战 130103'...https://v.youku.com/v_show/id_XNDk3MDYwMDU2.html?spm=a2hbt.13141534.1_2.1&s=89c6b47a2d3d11e2b2ac
                var url = window.external.url;
                var title = document.getElementsByClassName('new-title-name').length != 0 ? document.getElementsByClassName('new-title-name')[0].innerText : '';
                var cookie = window.external.getCookieEx(url, '_m_h5_tk', 2500) || window.external.getCookieEx(url, 'x5sec', 2500);
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nCookie: ' + cookie;
                var html = '', uid = '';
                if (!title) {
                    html = window.external.getHtmlCodeEx(url, headers);
                    uid = html.match(/userId:\s*'([^']+)/) ? html.match(/userId:\s*'([^']+)/)[1] : '';
                    title = (html.indexOf('irAlbumName') != -1) ? html.match(/<meta\s+name=\"irAlbumName\"\s+content=\"([^\"]+)\"/)[1] : '未知';
                    html = '';
                }

                var tw = undefined;
                //无分页剧集
                if (document.getElementsByClassName('new-box-anthology-tags noflex').length == 0) {
                    //单页 https://v.youku.com/v_show/id_XMzA0MjIzMTQ4.html?spm=a2hbt.13141534.app.5~5!2~5!2~5~5~5!2~5~5!2~5!2~5!2~5~A!2&s=cc006aec962411de83b1
                    if (document.getElementsByClassName('new-box-anthology-items').length != 0)
                        html += document.getElementsByClassName('new-box-anthology-items')[0].innerHTML;
                    //只有精彩周边或记录片 https://v.youku.com/v_show/id_XMjgyODc0OTE2OA==.html?spm=a2hbt.13141534.1_3.d_1_5&s=0f0c7e5efd0b11e4b5ce
                    //https://v.youku.com/v_show/id_XNTEzNDEyMDU4MA==.html?s=2ca0cec2c5cf11e29498&s=2ca0cec2c5cf11e29498
                    else if (document.getElementsByClassName('anthology-content').length != 0)
                        html += document.getElementsByClassName('anthology-content')[0].innerHTML;
                }
                //验证码阻止或剧集分页，硬解 https://v.youku.com/v_show/id_XMTEyMDI2NjM2.html?spm=a2h0c.8166622.PhoneSokuProgram_2.dselectbutton_4&showid=cbffd26c962411de83b1 老三国演义
                //记录片：https://v.youku.com/v_show/id_XMzk2ODg0Nzc3Mg==.html?spm=a2hje.13141534.app.5~5!7~A&scm=20140719.rcmd.239118.show_e2753d6ba22948e5b1b3&s=e2753d6ba22948e5b1b3
                if (!html) {
                    var vid = url.match(/id_([^.]+)/)[1];
                    var sid = url.match(/s=([^&]+)/)[1];
                    var ak = 24679788;
                    var tk = (cookie.indexOf('_m_h5_tk') != -1) ? cookie.match(/_m_h5_tk=([^;]+)/)[1].split('_')[0] : '';
                    var t = Date.now();
                    var cna = cookie.indexOf('cna') ? cookie.match(/cna=([^;]+)/)[1] : '';
                    var api_url = 'https://acs.youku.com/h5/mtop.youku.columbus.gateway.new.execute/1.0/?jsv=2.7.0&appKey=' + ak + '&t=' + t;
                    var start = 1, hasMore = true;
                    while (true) {
                        var args = '{\"ms_codes\":\"2019030100\",\"params\":\"{\\\\\"biz\\\\\":true,\\\\\"scene\\\\\":\\\\\"component\\\\\",\\\\\"utdid\\\\\":\\\\\"' + cna + '\\\\\",\\\\\"userId\\\\\":\\\\\"' + uid + '\\\\\",\\\\\"platform\\\\\":\\\\\"pc\\\\\",\\\\\"nextSession\\\\\":\\\\\"{\\\\\\\\\\\\\\\"componentId\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"46276\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"level\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"2\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"itemPageNo\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"lastItemIndex\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"dataSourceType\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"episode\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"group\\\\\\\\\\\\\\\":\\\\\\\\\\\\\\\"0\\\\\\\\\\\\\\\",\\\\\\\\\\\\\\\"itemStartStage\\\\\\\\\\\\\\\":' + start + ',\\\\\\\\\\\\\\\"itemEndStage\\\\\\\\\\\\\\\":' + (start + 30 - 1) + '}\\\\\",\\\\\"videoId\\\\\":\\\\\"' + vid + '\\\\\",\\\\\"showId\\\\\":\\\\\"' + sid + '\\\\\"}\",\"system_info\":\"{\\\\\"os\\\\\":\\\\\"pc\\\\\",\\\\\"device\\\\\":\\\\\"pc\\\\\",\\\\\"ver\\\\\":\\\\\"1.0.0\\\\\",\\\\\"appPackageKey\\\\\":\\\\\"pcweb\\\\\",\\\\\"appPackageId\\\\\":\\\\\"pcweb\\\\\"}\"}';
                        var s = ys(tk + '&' + t + '&' + ak + '&' + args);
                        var data = window.external.getHtmlCodeEx(api_url + '&sign=' + s + '&data=' + encodeURIComponent(args), headers);
                        if (data.indexOf('session') == -1)
                            break;

                        var jo = JSON.parse(data);
                        var nodes = jo.data['2019030100'].data.nodes;
                        for (var i = 0; i <= nodes.length - 1; i++) {
                            var item = nodes[i].data;
                            var video_url = 'https://v.youku.com/v_show/id_' + item.action.value + '.html?';
                            if (html.indexOf(video_url) != -1) {
                                hasMore = false;
                                break;
                            }
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:' + video_url + ';\r\n';
                        }
                        //check...
                        //不谁，若剧集刚好30集
                        //var js = JSON.parse(jo.data['2019030100'].data.data.session)
                        //if (js.lastItemIndex != 30)
                        //    break;
                        if (!hasMore)
                            break;

                        start += 30;
                    }
                }
                if (!html)
                    html = window.external.getHtmlCodeEx(url, headers);
                html = 'title:\"' + title + '\"$error=请在程序[在线视频]中打开此链接，若提示验证手动做下验证后重试。$' + html;

                //做语言替换
                if (url.indexOf('lang=') != -1 && html.indexOf('lang=') == -1) {
                    var lang = url.match(/lang=[^&]+/)[0];
                    html = html.replace(/html\?/g, 'html?' + lang + '&');
                }
                window.external.receive(html);

                //...
                function ys(e){
                    function t(e,t){return e<<t|e>>>32-t}
                    function n(e,t){var n,r,i,o,a;return i=2147483648&e,o=2147483648&t,a=(1073741823&e)+(1073741823&t),(n=1073741824&e)&(r=1073741824&t)?2147483648^a^i^o:n|r?1073741824&a?3221225472^a^i^o:1073741824^a^i^o:a^i^o}
                    function r(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return e&t|~e&n}
                    (r,i,o),a),c)),n(t(e,s),r)}
                    function i(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return e&n|t&~n}
                    (r,i,o),a),c)),n(t(e,s),r)}
                    function o(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return e^t^n}
                    (r,i,o),a),c)),n(t(e,s),r)}
                    function a(e,r,i,o,a,s,c){return e=n(e,n(n(function(e,t,n){return t^(e|~n)}
                    (r,i,o),a),c)),n(t(e,s),r)}
                    function s(e){var t,n='',r='';for(t=0;3>=t;t++)
                    n+=(r='0'+(e>>>8*t&255).toString(16)).substr(r.length-2,2);return n}
                    var c,l,u,d,f,p,h,m,v,y;for(y=function(e){for(var t,n=e.length,r=n+8,i=16*((r-r%64)/64+1),o=new Array(i-1),a=0,s=0;n>s;)
                    a=s%4*8,o[t=(s-s%4)/4]=o[t]|e.charCodeAt(s)<<a,s++;return a=s%4*8,o[t=(s-s%4)/4]=o[t]|128<<a,o[i-2]=n<<3,o[i-1]=n>>>29,o}
                    (e=function(e){e=e.replace(/\r\n/g,'\n');for(var t='',n=0;n<e.length;n++){var r=e.charCodeAt(n);128>r?t+=String.fromCharCode(r):r>127&&2048>r?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}
                    return t}
                    (e)),p=1732584193,h=4023233417,m=2562383102,v=271733878,c=0;c<y.length;c+=16)
                    l=p,u=h,d=m,f=v,p=r(p,h,m,v,y[c+0],7,3614090360),v=r(v,p,h,m,y[c+1],12,3905402710),m=r(m,v,p,h,y[c+2],17,606105819),h=r(h,m,v,p,y[c+3],22,3250441966),p=r(p,h,m,v,y[c+4],7,4118548399),v=r(v,p,h,m,y[c+5],12,1200080426),m=r(m,v,p,h,y[c+6],17,2821735955),h=r(h,m,v,p,y[c+7],22,4249261313),p=r(p,h,m,v,y[c+8],7,1770035416),v=r(v,p,h,m,y[c+9],12,2336552879),m=r(m,v,p,h,y[c+10],17,4294925233),h=r(h,m,v,p,y[c+11],22,2304563134),p=r(p,h,m,v,y[c+12],7,1804603682),v=r(v,p,h,m,y[c+13],12,4254626195),m=r(m,v,p,h,y[c+14],17,2792965006),p=i(p,h=r(h,m,v,p,y[c+15],22,1236535329),m,v,y[c+1],5,4129170786),v=i(v,p,h,m,y[c+6],9,3225465664),m=i(m,v,p,h,y[c+11],14,643717713),h=i(h,m,v,p,y[c+0],20,3921069994),p=i(p,h,m,v,y[c+5],5,3593408605),v=i(v,p,h,m,y[c+10],9,38016083),m=i(m,v,p,h,y[c+15],14,3634488961),h=i(h,m,v,p,y[c+4],20,3889429448),p=i(p,h,m,v,y[c+9],5,568446438),v=i(v,p,h,m,y[c+14],9,3275163606),m=i(m,v,p,h,y[c+3],14,4107603335),h=i(h,m,v,p,y[c+8],20,1163531501),p=i(p,h,m,v,y[c+13],5,2850285829),v=i(v,p,h,m,y[c+2],9,4243563512),m=i(m,v,p,h,y[c+7],14,1735328473),p=o(p,h=i(h,m,v,p,y[c+12],20,2368359562),m,v,y[c+5],4,4294588738),v=o(v,p,h,m,y[c+8],11,2272392833),m=o(m,v,p,h,y[c+11],16,1839030562),h=o(h,m,v,p,y[c+14],23,4259657740),p=o(p,h,m,v,y[c+1],4,2763975236),v=o(v,p,h,m,y[c+4],11,1272893353),m=o(m,v,p,h,y[c+7],16,4139469664),h=o(h,m,v,p,y[c+10],23,3200236656),p=o(p,h,m,v,y[c+13],4,681279174),v=o(v,p,h,m,y[c+0],11,3936430074),m=o(m,v,p,h,y[c+3],16,3572445317),h=o(h,m,v,p,y[c+6],23,76029189),p=o(p,h,m,v,y[c+9],4,3654602809),v=o(v,p,h,m,y[c+12],11,3873151461),m=o(m,v,p,h,y[c+15],16,530742520),p=a(p,h=o(h,m,v,p,y[c+2],23,3299628645),m,v,y[c+0],6,4096336452),v=a(v,p,h,m,y[c+7],10,1126891415),m=a(m,v,p,h,y[c+14],15,2878612391),h=a(h,m,v,p,y[c+5],21,4237533241),p=a(p,h,m,v,y[c+12],6,1700485571),v=a(v,p,h,m,y[c+3],10,2399980690),m=a(m,v,p,h,y[c+10],15,4293915773),h=a(h,m,v,p,y[c+1],21,2240044497),p=a(p,h,m,v,y[c+8],6,1873313359),v=a(v,p,h,m,y[c+15],10,4264355552),m=a(m,v,p,h,y[c+6],15,2734768916),h=a(h,m,v,p,y[c+13],21,1309151649),p=a(p,h,m,v,y[c+4],6,4149444226),v=a(v,p,h,m,y[c+11],10,3174756917),m=a(m,v,p,h,y[c+2],15,718787259),h=a(h,m,v,p,y[c+9],21,3951481745),p=n(p,l),h=n(h,u),m=n(m,d),v=n(v,f);return(s(p)+s(h)+s(m)+s(v)).toLowerCase()
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" crpj="true">
        <url><![CDATA[youku\.com/albumlist/show[?/]id[=_](?<id>[^&.]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<div.*?<a\s+title="(?<title>[^"]+)"\s+href="(?<url>[^"]+).*?<span>(?<duration>[^<]+)]]></content>
        <jsCode><![CDATA[
            try {
                var title = (document.getElementsByClassName('pl-title').length != 0) ? document.getElementsByClassName('pl-title')[0].innerText : document.title;
                var id = document.body.innerHTML.match(/data-id=\"([^\"]+)/)[1];
                var asc = document.body.innerHTML.match(/data-ascending=\"([^\"]+)/)[1];
                var api_url = 'https://list.youku.com/albumlist/items?id=' + id + '&size=20&callback=jq&ascending=' + asc + '&page=';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    data = data.substring('window.jq && jq('.length, data.length - 2);
                    data = JSON.stringify(JSON.parse(data));
                    data = JSON.stringify(JSON.parse(data));
                    if (data.indexOf('html\":\"<') != -1)
                        break;
                    var jo = JSON.parse(data);
                    html += jo.html;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="youku" watchList="true" crpj="true">
        <url><![CDATA[youku\.com/v_show/id_.*?\.html?.*&f=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<div.*?<a\s+href="(?<url>[^"]+).*?(?:title|alt)="(?<title>[^"]+).*?(?:span>|summary\">)(?<duration>[^<]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://v.youku.com/v_show/id_XNTkxMzc1MTUy.html?spm=a2hbt.13141534.1_2.d_1_25&f=26466730&scm=20140719.apircmd.46307.video_XNTkxMzc1MTUy
                //https://list.youku.com/albumlist/items?id=' + id + '&size=20&callback=jq&page='在某些电脑上取不到了
                var title = document.body.innerHTML.match(/playlistTitle\":\"([^\"]+)/)[1];
                var id = window.PageConfig.folderId;
                var api_url = 'https://list.youku.com/albumlist/items?id=' + id + '&size=20&callback=jq&page=';
                var html = 'title:\"' + title + '\"$';
                if (document.getElementsByClassName('anthology-content').length != 1)
                    html += document.getElementsByClassName('anthology-content')[0].innerHTML;
                else {
                    var p = 1;
                    while (true) {
                        var data = window.external.getHtmlCode(api_url + p);
                        data = data.substring('window.jq && jq('.length, data.length - 2);
                        data = JSON.stringify(JSON.parse(data));
                        if (data.indexOf('html\":\"<') != -1)
                            break;
                        var jo = JSON.parse(data);
                        html += jo.html;
                        p++;
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" crpj="true" delay="2500">
        <url><![CDATA[iqiyi\.com/(?:u/(?<id>\d+)/videos|\w+/space/(?<id>[^/]+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^;]+)]]></content>
        <total><![CDATA[total:([^,]+)]]></total>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <headers><![CDATA[User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1]]></headers>
        <jsCode><![CDATA[
            try {
                //https://www.iqiyi.com/u/1469219878/videos
                var page_url = '', api_url = '';
                var entries = window.performance.getEntriesByType('resource');
                //为避免影响下面i函数，此处for中皆置以let
                for (let i = 0; i <= entries.length - 1; i++) {
                    var e = entries[i].name;
                    if (e.indexOf('get_videos.action?') != -1 || e.indexOf('get_small_videos.action?') != -1)
                        page_url = e;
                    else if (e.indexOf('episode_info.action?') != -1)
                        api_url = e;
                }

                if (page_url && api_url) {
                    page_url = page_url.replace(/&timestamp=[^&]+/, '').replace(/&page=.+/, '');
                    api_url = api_url.replace(/&timestamp=[^&]+/, '').replace(/&qipuIds=.+/, '') + '&qipuIds=';

                    var total = 0;
                    var title = document.getElementsByClassName('person-name').length != 0 ? document.getElementsByClassName('person-name')[0].innerText : document.title;
                    title += (window.location.href.indexOf('videoShort') != -1) ? '-短视频' : '';
                    var html = 'title:\"' + title + '\"$';
                    var pg = parseInt(window.external.sp) || 1;
                    var pmax = (window.external.sp != undefined) ? 49 : 99;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var ts = Date.now();
                        var args = 'GET' + sortArgs(page_url.replace('https://', '') + '&page=' + pg + '&size=28&timestamp=' + ts) + 'QMK8e4agKNWEppKU';
                        var page_url2 = page_url + '&page=' + pg + '&size=28&timestamp=' + ts + '&sign=' + _sign(args);
                        var data = window.external.getHtmlCode(page_url2);
                        if (!data)
                            break;

                        var jo = JSON.parse(data);
                        hasMore = false;
                        if (jo.data) {
                            if (total == 0)
                                total = jo.data.totalNum || jo.data.storedNum;
                            hasMore = jo.data.hasMore == 1 || jo.data.tvids && jo.data.tvids.length != 0;
                            if (jo.data.sort && jo.data.sort.flows.length != 0 || jo.data.tvids) {
                                //sort...
                                var ids = '', vids = [];
                                if (jo.data.sort) {
                                    function dec(x, y) {
                                        return y.qipuId - x.qipuId;
                                    }
                                    jo.data.sort.flows.sort(dec);
                                    for (let i = 0; i <= jo.data.sort.flows.length - 1; i++) {
                                        vids[i] = jo.data.sort.flows[i].qipuId;
                                        ids += jo.data.sort.flows[i].qipuId + ',';
                                    }
                                    for (let i = 0; i <= jo.data.sort.flows.length - 1; i++)
                                        ids += jo.data.sort.flows[i].qipuId + ',';
                                }
                                else {
                                    vids = jo.data.tvids;
                                    for (var i = 0; i <= jo.data.tvids.length - 1; i++)
                                        ids += jo.data.tvids[i] + ',';
                                }
                                ids = ids.substr(0, ids.length - 1);
                                args = 'GET' + sortArgs(api_url.replace('https://', '') + ids + '&timestamp=' + ts) + 'QMK8e4agKNWEppKU';
                                data = window.external.getHtmlCode(api_url + ids + '&timestamp=' + ts + '&sign=' + _sign(args));
                                jo = JSON.parse(data);
                                if (jo.data) {
                                    for (let i = 0; i <= vids.length - 1; i++) {
                                        var item = jo.data[vids[i]];
                                        var thumbnail = ''; //item.videoThumbnail...下载问题，先置其为空
                                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",duration:' + item.playTime + ',video_url:' + item.pageUrl + ',date:' + item.timeCreate + ';\r\n';
                                    }
                                }
                            }
                        }
                        if (!hasMore)
                            break;

                        pg++;
                        pidx++;
                        hasMore = true;
                    }

                    html = 'total:' + total + ',startPage:' + pg + ',hasMore:' + hasMore + ',' + html.replace(/480_270/g, '1920_1080');
                    window.external.receive(html);
                }

                //...
                function sortArgs(url){var args=url.substring(url.indexOf('?')+1);var lt=args.split('&').sort();return url.substring(0,url.indexOf('?')+1)+lt.join('&');}
                function _sign(e){
                    return _(y(e));
                    function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}
                    function a(e,t){return e<<t|e>>>32-t}
                    function s(e,t,n,r,o,s){return i(a(i(i(t,e),i(r,s)),o),n)}
                    function u(e,t,n,r,o,i,a){return s(t&n|~t&r,e,t,o,i,a)}
                    function c(e,t,n,r,o,i,a){return s(t&r|n&~r,e,t,o,i,a)}
                    function f(e,t,n,r,o,i,a){return s(t^n^r,e,t,o,i,a)}
                    function l(e,t,n,r,o,i,a){return s(n^(t|~r),e,t,o,i,a)}
                    function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,o,a,s,d=1732584193,p=-271733879,h=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)
                    r=d,o=p,a=h,s=g,d=u(d,p,h,g,e[n],7,-680876936),g=u(g,d,p,h,e[n+1],12,-389564586),h=u(h,g,d,p,e[n+2],17,606105819),p=u(p,h,g,d,e[n+3],22,-1044525330),d=u(d,p,h,g,e[n+4],7,-176418897),g=u(g,d,p,h,e[n+5],12,1200080426),h=u(h,g,d,p,e[n+6],17,-1473231341),p=u(p,h,g,d,e[n+7],22,-45705983),d=u(d,p,h,g,e[n+8],7,1770035416),g=u(g,d,p,h,e[n+9],12,-1958414417),h=u(h,g,d,p,e[n+10],17,-42063),p=u(p,h,g,d,e[n+11],22,-1990404162),d=u(d,p,h,g,e[n+12],7,1804603682),g=u(g,d,p,h,e[n+13],12,-40341101),h=u(h,g,d,p,e[n+14],17,-1502002290),p=u(p,h,g,d,e[n+15],22,1236535329),d=c(d,p,h,g,e[n+1],5,-165796510),g=c(g,d,p,h,e[n+6],9,-1069501632),h=c(h,g,d,p,e[n+11],14,643717713),p=c(p,h,g,d,e[n],20,-373897302),d=c(d,p,h,g,e[n+5],5,-701558691),g=c(g,d,p,h,e[n+10],9,38016083),h=c(h,g,d,p,e[n+15],14,-660478335),p=c(p,h,g,d,e[n+4],20,-405537848),d=c(d,p,h,g,e[n+9],5,568446438),g=c(g,d,p,h,e[n+14],9,-1019803690),h=c(h,g,d,p,e[n+3],14,-187363961),p=c(p,h,g,d,e[n+8],20,1163531501),d=c(d,p,h,g,e[n+13],5,-1444681467),g=c(g,d,p,h,e[n+2],9,-51403784),h=c(h,g,d,p,e[n+7],14,1735328473),p=c(p,h,g,d,e[n+12],20,-1926607734),d=f(d,p,h,g,e[n+5],4,-378558),g=f(g,d,p,h,e[n+8],11,-2022574463),h=f(h,g,d,p,e[n+11],16,1839030562),p=f(p,h,g,d,e[n+14],23,-35309556),d=f(d,p,h,g,e[n+1],4,-1530992060),g=f(g,d,p,h,e[n+4],11,1272893353),h=f(h,g,d,p,e[n+7],16,-155497632),p=f(p,h,g,d,e[n+10],23,-1094730640),d=f(d,p,h,g,e[n+13],4,681279174),g=f(g,d,p,h,e[n],11,-358537222),h=f(h,g,d,p,e[n+3],16,-722521979),p=f(p,h,g,d,e[n+6],23,76029189),d=f(d,p,h,g,e[n+9],4,-640364487),g=f(g,d,p,h,e[n+12],11,-421815835),h=f(h,g,d,p,e[n+15],16,530742520),p=f(p,h,g,d,e[n+2],23,-995338651),d=l(d,p,h,g,e[n],6,-198630844),g=l(g,d,p,h,e[n+7],10,1126891415),h=l(h,g,d,p,e[n+14],15,-1416354905),p=l(p,h,g,d,e[n+5],21,-57434055),d=l(d,p,h,g,e[n+12],6,1700485571),g=l(g,d,p,h,e[n+3],10,-1894986606),h=l(h,g,d,p,e[n+10],15,-1051523),p=l(p,h,g,d,e[n+1],21,-2054922799),d=l(d,p,h,g,e[n+8],6,1873313359),g=l(g,d,p,h,e[n+15],10,-30611744),h=l(h,g,d,p,e[n+6],15,-1560198380),p=l(p,h,g,d,e[n+13],21,1309151649),d=l(d,p,h,g,e[n+4],6,-145523070),g=l(g,d,p,h,e[n+11],10,-1120210379),h=l(h,g,d,p,e[n+2],15,718787259),p=l(p,h,g,d,e[n+9],21,-343485551),d=i(d,r),p=i(p,o),h=i(h,a),g=i(g,s);return[d,p,h,g]}
                    function p(e){var t,n='',r=32*e.length;for(t=0;t<r;t+=8)
                    n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}
                    function h(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)
                    n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)
                    n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}
                    function g(e){return p(d(h(e),8*e.length))}
                    function m(e,t){var n,r,o=h(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=d(o,8*e.length)),n=0;n<16;n+=1)
                    i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=d(i.concat(h(t)),512+8*t.length),p(d(a.concat(r),640))}
                    function _(e){var t,n,r='0123456789abcdef',o='';for(n=0;n<e.length;n+=1)
                    t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}
                    function v(e){return unescape(encodeURIComponent(e))}
                    function y(e){return g(v(e))}
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" crpj="true">
        <url><![CDATA[iqiyi\.com/u/(?<id>\d+)/feeds]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <headers><![CDATA[User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1]]></headers>
        <jsCode><![CDATA[
            try {
                //https://www.iqiyi.com/u/1469219878/feeds
                var url = window.external.url;
                var uid = url.match(/u\/([^\/]+)/)[1];
                var cookie = window.external.getCookieEx(window.external.url, 'P00007', 4500) || document.cookie;
                var ac = cookie ? cookie.match(/P00007=([^;]+)/)[1] : '';
                var did = (cookie.indexOf('QC006') != -1) ? cookie.match(/QC006=([^;]+)/)[1] : '';
                var dfp = (cookie.indexOf('__dfp') != -1) ? cookie.match(/__dfp=([^@;]+)/)[1] : '';
                var args = 'agenttype=118&agentversion=10.7.5&authcookie=' + ac + '&dfp=' + dfp + '&iqiyi_uid=' + uid + '&m_device_id=' + did + '&timestamp=' + Date.now();
                var e = 'GETiqiyihao.iqiyi.com/iqiyihao/home.action?' + args + 'NZrFGv72GYppTUxO';
                var api_url = 'https://iqiyihao.iqiyi.com/iqiyihao/home.action?' + args + '&sign=' + _sign(e);
                var data = window.external.getHtmlCode(api_url, url);
                var title = JSON.parse(data).data.name + ' 动态';
                var html = 'title:\"' + title + '\"$';
                var start = 0;
                while (true) {
                    var t = Date.now();
                    args = 'agenttype=118&agentversion=10.7.5&authcookie=' + ac + '&dfp=' + dfp + '&fuid=' + uid + '&m_device_id=' + did + '&page=df_0_0:dv_' + start + '_0&timestamp=' + t;
                    e = 'GETiqiyihao.iqiyi.com/iqiyihao/entity/get_dynamic_ids.action?' + args + 'NZrFGv72GYppTUxO';
                    api_url = 'https://iqiyihao.iqiyi.com/iqiyihao/entity/get_dynamic_ids.action?' + args + '&sign=' + _sign(e);
                    data = window.external.getHtmlCode(api_url, url);
                    if (!data.match(/qipuIds\":\[\d+/))
                        break;
                    var ids = data.match(/\[(\d+[^\]]+)/)[1];
                    args = 'agenttype=118&agentversion=10.7.5&authcookie=' + ac + '&dfp=' + dfp + '&ids=' + ids + '&m_device_id=' + did + '&ownerUid=' + uid  + '&timestamp=' + t;
                    e = 'GETiqiyihao.iqiyi.com/iqiyihao/entity/get_entity_by_ids.action?' + args + 'NZrFGv72GYppTUxO';
                    api_url = 'https://iqiyihao.iqiyi.com/iqiyihao/entity/get_entity_by_ids.action?' + args + '&sign=' + _sign(e);
                    data = window.external.getHtmlCode(api_url, url);
                    if (data.indexOf('data\":{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    //sort...
                    var vids = ids.split(',');
                    for (var k in vids) {
                        var item = jo.data[vids[k]].object;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.pageUrl + '\",duration:' + item.playTime + ',date:' + item.timeCreate + ';\r\n';
                    }
                    start += 10;
                }
                window.external.receive(html);

                //...
                function sortArgs(url){var args=url.substring(url.indexOf('?')+1);var lt=args.split('&').sort();return url.substring(0,url.indexOf('?')+1)+lt.join('&');}
                function _sign(e){
                    return _(y(e));
                    function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}
                    function a(e,t){return e<<t|e>>>32-t}
                    function s(e,t,n,r,o,s){return i(a(i(i(t,e),i(r,s)),o),n)}
                    function u(e,t,n,r,o,i,a){return s(t&n|~t&r,e,t,o,i,a)}
                    function c(e,t,n,r,o,i,a){return s(t&r|n&~r,e,t,o,i,a)}
                    function f(e,t,n,r,o,i,a){return s(t^n^r,e,t,o,i,a)}
                    function l(e,t,n,r,o,i,a){return s(n^(t|~r),e,t,o,i,a)}
                    function d(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var n,r,o,a,s,d=1732584193,p=-271733879,h=-1732584194,g=271733878;for(n=0;n<e.length;n+=16)
                    r=d,o=p,a=h,s=g,d=u(d,p,h,g,e[n],7,-680876936),g=u(g,d,p,h,e[n+1],12,-389564586),h=u(h,g,d,p,e[n+2],17,606105819),p=u(p,h,g,d,e[n+3],22,-1044525330),d=u(d,p,h,g,e[n+4],7,-176418897),g=u(g,d,p,h,e[n+5],12,1200080426),h=u(h,g,d,p,e[n+6],17,-1473231341),p=u(p,h,g,d,e[n+7],22,-45705983),d=u(d,p,h,g,e[n+8],7,1770035416),g=u(g,d,p,h,e[n+9],12,-1958414417),h=u(h,g,d,p,e[n+10],17,-42063),p=u(p,h,g,d,e[n+11],22,-1990404162),d=u(d,p,h,g,e[n+12],7,1804603682),g=u(g,d,p,h,e[n+13],12,-40341101),h=u(h,g,d,p,e[n+14],17,-1502002290),p=u(p,h,g,d,e[n+15],22,1236535329),d=c(d,p,h,g,e[n+1],5,-165796510),g=c(g,d,p,h,e[n+6],9,-1069501632),h=c(h,g,d,p,e[n+11],14,643717713),p=c(p,h,g,d,e[n],20,-373897302),d=c(d,p,h,g,e[n+5],5,-701558691),g=c(g,d,p,h,e[n+10],9,38016083),h=c(h,g,d,p,e[n+15],14,-660478335),p=c(p,h,g,d,e[n+4],20,-405537848),d=c(d,p,h,g,e[n+9],5,568446438),g=c(g,d,p,h,e[n+14],9,-1019803690),h=c(h,g,d,p,e[n+3],14,-187363961),p=c(p,h,g,d,e[n+8],20,1163531501),d=c(d,p,h,g,e[n+13],5,-1444681467),g=c(g,d,p,h,e[n+2],9,-51403784),h=c(h,g,d,p,e[n+7],14,1735328473),p=c(p,h,g,d,e[n+12],20,-1926607734),d=f(d,p,h,g,e[n+5],4,-378558),g=f(g,d,p,h,e[n+8],11,-2022574463),h=f(h,g,d,p,e[n+11],16,1839030562),p=f(p,h,g,d,e[n+14],23,-35309556),d=f(d,p,h,g,e[n+1],4,-1530992060),g=f(g,d,p,h,e[n+4],11,1272893353),h=f(h,g,d,p,e[n+7],16,-155497632),p=f(p,h,g,d,e[n+10],23,-1094730640),d=f(d,p,h,g,e[n+13],4,681279174),g=f(g,d,p,h,e[n],11,-358537222),h=f(h,g,d,p,e[n+3],16,-722521979),p=f(p,h,g,d,e[n+6],23,76029189),d=f(d,p,h,g,e[n+9],4,-640364487),g=f(g,d,p,h,e[n+12],11,-421815835),h=f(h,g,d,p,e[n+15],16,530742520),p=f(p,h,g,d,e[n+2],23,-995338651),d=l(d,p,h,g,e[n],6,-198630844),g=l(g,d,p,h,e[n+7],10,1126891415),h=l(h,g,d,p,e[n+14],15,-1416354905),p=l(p,h,g,d,e[n+5],21,-57434055),d=l(d,p,h,g,e[n+12],6,1700485571),g=l(g,d,p,h,e[n+3],10,-1894986606),h=l(h,g,d,p,e[n+10],15,-1051523),p=l(p,h,g,d,e[n+1],21,-2054922799),d=l(d,p,h,g,e[n+8],6,1873313359),g=l(g,d,p,h,e[n+15],10,-30611744),h=l(h,g,d,p,e[n+6],15,-1560198380),p=l(p,h,g,d,e[n+13],21,1309151649),d=l(d,p,h,g,e[n+4],6,-145523070),g=l(g,d,p,h,e[n+11],10,-1120210379),h=l(h,g,d,p,e[n+2],15,718787259),p=l(p,h,g,d,e[n+9],21,-343485551),d=i(d,r),p=i(p,o),h=i(h,a),g=i(g,s);return[d,p,h,g]}
                    function p(e){var t,n='',r=32*e.length;for(t=0;t<r;t+=8)
                    n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}
                    function h(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)
                    n[t]=0;var r=8*e.length;for(t=0;t<r;t+=8)
                    n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}
                    function g(e){return p(d(h(e),8*e.length))}
                    function m(e,t){var n,r,o=h(e),i=[],a=[];for(i[15]=a[15]=void 0,o.length>16&&(o=d(o,8*e.length)),n=0;n<16;n+=1)
                    i[n]=909522486^o[n],a[n]=1549556828^o[n];return r=d(i.concat(h(t)),512+8*t.length),p(d(a.concat(r),640))}
                    function _(e){var t,n,r='0123456789abcdef',o='';for(n=0;n<e.length;n+=1)
                    t=e.charCodeAt(n),o+=r.charAt(t>>>4&15)+r.charAt(15&t);return o}
                    function v(e){return unescape(encodeURIComponent(e))}
                    function y(e){return g(v(e))}
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" delay="4500">
        <url><![CDATA[iqiyi\.com/(?<id>a_[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)(?:<li.*?img[^>]+src="(?<thumbnail>[^"]+).*?(?:alt|title)="(?<title>[^"]+).*?\s+href="(?<url>[^"]+)[^>]+>.*?</li>|v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+))]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.iqiyi.com/a_19rrhairjl.html
                //https://www.iqiyi.com/a_19rrgymbhp.html
                var title = document.title;
                if (title.indexOf('-') != -1)
                    title = title.substr(0, document.title.indexOf('-'));
                var html = '';
                //分类别去取可能什么都返回不了，改为只取当前类的，即[全部]
                var app = document.getElementById('album_pic_paging');
                //页码在下面...https://www.iqiyi.com/a_19rrhr9x35.html
                if (app && app.style.display == 'block') {
                    var completed = false;
                    function interval() {
                        html += document.getElementById('albumpic-showall-wrap').innerHTML;
                        var lastChild = app.lastChild;
                        if (lastChild.className != 'noPage') {
                            lastChild.click();
                            setTimeout(interval, 2500);
                        }
                        else
                            completed = true;
                    }
                    setTimeout(interval, 2500)
                    while (!completed)
                        window.external.doEvents();
                }
                else {
                    //https://www.iqiyi.com/a_19rrhavtc9.html
                    //https://www.iqiyi.com/a_28xq44y92rd.html
                    //比如http://www.iqiyi.com/a_19rrk0snvl.html，1025集...889-942之间丢失
                    html = document.body.innerHTML;
                    var aid = html.match(/playPageInfo=.*?albumId\":([^,]+)/) ? html.match(/playPageInfo=.*?albumId\":([^,]+)/)[1] : '';
                    if (html.match(/playPageInfo=.*?albumName\":([^,]+)/))
                        title = html.match(/playPageInfo=.*?albumName\":([^,]+)/)[1];
                    //https://www.iqiyi.com/a_vczbutaql9.html
                    if (!aid) {
                        html = window.external.getHtmlCode(window.external.url);
                        aid = html.match(/aid:'([^']+)/) ? html.match(/aid:'([^']+)/)[1] : html.match(/albumId:\s+\"([^\"']+)/) ? html.match(/albumId:\s+\"([^\"']+)/)[1] : 0;
                        title = html.match(/wallName=\"([^\"]+)/i) ? html.match(/wallName=\"([^\"]+)/i)[1] : title;
                        if (!title && html.indexOf('main-title') != -1)
                            title = html.match(/main-title\">.*?title=\"([^\"]+)/)[1];
                    }
                    var year = html.match(/data-year=\"(\d+)\"/) ? html.match(/data-year=\"(\d+)\"/)[1] : '';
                    var rid = html.match(/rId\":\s*\"([^\"]+)/) ? html.match(/rId\":\s*\"([^\"]+)/)[1] : '';
                    var cid = html.match(/\"cid\":(\d+)/) ? html.match(/\"cid\":(\d+)/)[1] : '';
                    html = '';
                    var api_url = 'https://pcw-api.iqiyi.com/albums/album/avlistinfo?aid=' + aid + '&size=30&callback=&page=';
                    var p = 1;
                    while (true) {
                        var data = window.external.getHtmlCode(api_url + p);
                        if (data.indexOf('\"epsodelist\":[{') == -1 && data.indexOf('\"updateprevuelist\":[{') == -1)
                            break;

                        var jo = JSON.parse(data);
                        if (data.indexOf('\"epsodelist\":[{') != -1) {
                            for (var i = 0; i <= jo.data.epsodelist.length - 1; i++) {
                                var item = jo.data.epsodelist[i];
                                var video_url = item.playUrl.replace('http:', 'https:');
                                var v_title = item.subtitle || item.name;
                                html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.publishTime + ';\r\n';
                            }
                        }
                        //预告
                        if (data.indexOf('\"updateprevuelist\":[{') != -1) {
                            for (var i = 0; i <= jo.data.updateprevuelist.length - 1; i++) {
                                var item = jo.data.updateprevuelist[i];
                                var video_url = item.playUrl.replace('http:', 'https:');
                                var v_title = item.subtitle || item.name;
                                html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.publishTime + ';\r\n';
                            }
                        }
                        p++;
                    }
                    //https://www.iqiyi.com/a_1v19ea66wr1.html
                    if (!html) {
                        if (!year) {
                            html = window.external.getHtmlCode(window.external.url);
                            year = html.match(/data-year=\"(\d+)\"/) ? html.match(/data-year=\"(\d+)\"/)[1] : '';
                            if (!cid)
                                cid = html.match(/cid:\s*\"(\d+)/) ? html.match(/cid:\s*\"(\d+)/)[1] : '';
                            html = '';
                        }
                        if (year) {
                            api_url = 'https://pcw-api.iqiyi.com/album/source/svlistinfo?cid=' + cid + '&sourceid=' + aid + '&timelist=' + year;
                            var data = window.external.getHtmlCode(api_url, url);
                            if (data.indexOf('data\":{') != -1) {
                                var jo = JSON.parse(data);
                                var items = jo.data[year];
                                for (var i = 0; i <= items.length - 1; i++) {
                                    var item = items[i];
                                    var video_url = item.playUrl.replace('http:', 'https:');
                                    var v_title = item.subtitle || item.name;
                                    html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.period + ';\r\n';
                                }
                            }
                        }
                    }
                    //https://www.iqiyi.com/a_csh1i60g6h.html
                    if (!html && rid) {
                        api_url = 'https://lequ-qfe.iqiyi.com/api/nc/mixin/mixinResources/' + rid + '?locale=zh';
                        var data = window.external.getHtmlCode(api_url, url);
                        if (data.indexOf('mixinVideo') != -1) {
                            var jo = JSON.parse(data);
                            var items = jo.data.items;
                            for (var i = 0; i <= items.length - 1; i++) {
                                var item = items[i].mixinVideo;
                                var video_url = item.url.replace('http:', 'https:');
                                var v_title = item.shortTitle || item.subtitle;
                                html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',date:' + item.period + ';\r\n';
                            }
                        }
                    }
                }
                if (!html && document.getElementsByClassName('piclist-wrapper').length != 0)
                    html = document.getElementsByClassName('piclist-wrapper')[0].innerHTML;
                //https://www.iqiyi.com/a_19rrhm2aop.html
                //https://www.iqiyi.com/a_19k3t37j9h9.html#curid=5630101274373600_f0d7ac56da83007af324f50e3a8e4e1c
                if (!html && document.getElementById('lequ-play-list')) {
                    var ul = document.getElementById('lequ-play-list');
                    for (var i = 0; i <= ul.childElementCount - 1; i++) {
                        var li = ul.childNodes[i];
                        //构建可识别的...
                        var video_url = 'https://m.iqiyi.com/mp/sharePlay.html?tvid=' + li.getAttribute('data-tvid');
                        li.setAttribute('img_src', li.getAttribute('data-imageurl'));
                        li.getElementsByTagName('a')[0].setAttribute('href', video_url);
                    }
                    html = ul.innerHTML;
                }

                //避免模板影响
                if (html.indexOf('<textarea') != -1)
                    html = html.substr(0, html.indexOf('<textarea'));
                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" updateTitle="true">
        <url><![CDATA[tw\.iqiyi\.com/(?<id>a_[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)tvId.*?(?:subtitle":"(?<describe>[^"]+).*?)?name":"(?<title>[^"]+).*?playUrl":"(?<url>[^"]+).*?duration":"(?<duration>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.iqiyi.com/a_19rrhairjl.html
                var title = document.title.substr(0, document.title.indexOf('-'));
                var html = 'title:\"' + title + '\"$';
                var data = window.external.getHtmlCode(window.external.url);
                var aid = 0;
                if (window.Q && window.Q.PageInfo && window.Q.PageInfo.playPageInfo)
                    aid = window.Q.PageInfo.playPageInfo.albumId;
                if (!aid)
                    aid = data.match(/aid:'([^']+)/) ? data.match(/aid:'([^']+)/)[1] : data.match(/albumId:\s+\"([^\"']+)/) ? data.match(/albumId:\s+\"([^\"']+)/)[1] : 0;
                var api_url = 'https://pcw-api.iqiyi.com/albums/album/avlistinfo?aid=' + aid + '&locale=zh_tw&size=30&callback=&page=';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, window.location.href, 500);
                    if (data.indexOf('\"epsodelist\":[]') != -1)
                        break;

                    html += data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" delay="4500">
        <url><![CDATA[iqiyi\.com/playlist(?<id>[^.]+).html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.iqiyi.com/playlist446324502.html
                //https://www.iqiyi.com/playlist1951253402.html
                var title = (document.getElementsByTagName('h2').length != 0) ? document.getElementsByTagName('h2')[0].innerText : document.title.substr(0, document.title.indexOf('-'));
                var html = 'title:\"' + title + '\"$';
                var url = window.external.url;
                var pid = url.match(/playlist([^.]+)/)[1];
                var api_url = 'https://pcw-api.iqiyi.com/album/bodan/bodanlistinfo?bodanId=' + pid + '&size=40&page=';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, url);
                    if (data.indexOf('\"playList\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.playList.length - 1; i++) {
                        var item = jo.data.playList[i];
                        html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + item.playUrl + '\",duration:' + item.duration + ',date:' + item.publishTime + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" crpj="true" updateTitle="true">
        <url><![CDATA[iqiyi\.com/lib/(?<id>m_[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li>\s+<a\s+title="(?<title>[^"]+).*?href="(?<url>[^"]+).*?</li>]]></content>
        <jsCode><![CDATA[
            try {
                var et = document.getElementById('j-album-title');
                var html = 'title:\"' + et.innerText + '\"$';
                var nws = document.getElementsByClassName('numlist-wrapper');
                for (var i = 0; i <= nws.length - 1; i++) {
                    var nw = nws[i];
                    var ul = nw.firstElementChild;
                    for (var j = 0; j <= ul.childElementCount - 1; j++) {
                        var a = ul.children[j].firstElementChild;
                        if (a.href.indexOf('so.iqiyi.com/') == -1)
                            break;
                        a.href = GetRedirectedUrl(a.href);
                    }
                    html += nw.innerHTML;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }

            function GetRedirectedUrl(url) {
                var html = window.external.getHtmlCode(url);
                var m = html.match(/URL='([^']+)/);
                return m ? m[1] : url;
            }
        ]]></jsCode>
    </item>
    <item domain="iqiyi" updateTitle="true">
        <url><![CDATA[iqiyi\.com/so/.*?q_(?<id>[^_?]+)]]></url>
        <title><![CDATA[placeholder="([^"]+)]]></title>
        <content><![CDATA[(?is)<div[^>]+class="qy-search-result-item.*?title="(?<title>[^"]+).*?href="(?<url>[^"]+).*?qy-mod-label">(?<duration>[^<]+)]]></content>
    </item>
    <!--https://www.iq.com/album/周生如故-24mppdujjp9?frmrp=play&frmb=album_information&frmrs=album-->
    <item domain="iq" updateTitle="true">
        <url><![CDATA[iq\.com/album/(?<id>[^?]+)]]></url>
        <title><![CDATA[<h1[^>]*title">([^<]+)]]></title>
        <content><![CDATA[(?is)focusTag.*?name":"(?<title>[^"]+).*?albumPlayUrl":"(?<url>[^"]+).*?imgUrl":"(?<thumbnail>[^"]+).*?publishTime":"(?<date>[^"]+)]]></content>
    </item>
    <item domain="cctv" crpj="true">
        <url><![CDATA[cctv\.com/lm/(?<id>[^/]+)/]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://tv.cctv.com/lm/lsll/sp/index.shtml?spm=C81395.P1AaK3UlHCXD.Ezkq0ao9h4HC.3
                //https://tv.cctv.com/lm/jzdxt/?spm=C53130689386.PNs0BJpB74kn.0.0 topicId
                if (window.lmtopId || window.topicID) {
                    var url = window.external.url;
                    var title = document.title.substring(0, document.title.indexOf('_'));
                    var html = 'title:\"' + title + '\"$';
                    var id = document.body.innerHTML.match(/TOPC\d+/)[0];
                    var d = (url.indexOf('&Y') != -1 && url.indexOf('&M') != -1) ? '&d=' + url.match(/&Y=([^&]+)/)[1].toString() + url.match(/&M=([^&]+)/)[1] : '';
                    var api_url = 'http://api.cntv.cn/NewVideo/getVideoListByColumn?id=' + id + '&n=100&sort=desc&mode=0&serviceId=tvcctv' + d + '&p=';
                    var p = 1;
                    while (true) {
                        var data = window.external.getHtmlCode(api_url + p);
                        if (data.indexOf('\"list\":[{') == -1)
                            break;
                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.data.list.length - 1; i++) {
                            var item = jo.data.list[i];
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",thumbnail:\"' + item.image + '\",duration:' + item.length + ',date:' + item.time +';\r\n';
                        }
                        p++;
                    }
                    window.external.receive(html);
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="cctv">
        <url><![CDATA[cctv\.com/\d{4}/\d{2}/\d{2}/(?<id>VIDA[^.]+)\.shtml]]></url>
        <title><![CDATA[<title>([^_]+)[^<]+</title>]]></title>
        <content><![CDATA[(?is)(?:<div\s+class="img.*?a\s+title="(?<title>[^"]+).*?href="(?<url>[^"]+).*?lazy="(?<thumbnail>[^"]+)|'title':'(?<title>[^']+).*?'img':'(?<img>[^']+).*?'url':'(?<url>[^']+))]]></content>
    </item>
    <item domain="cctv" crpj="true">
        <url><![CDATA[cctv\.com/search.php\?.*?qtext=[^&]+]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://search.cctv.com/search.php?qtext=%E5%86%9B%E4%BA%8B%E7%BA%AA%E5%AE%9E&type=video
                //只能取600条
                var title = window.qtext_str;
                var api_url = 'https://search.cctv.com/ifsearch.php?qtext=' + qtext + '&sort=relevance&pageSize=20&type=video&vtime=-1&datepid=1&channel=&pageflag=0&qtext_str=' + qtext + '&page=';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                var last_url = '';
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, url, 200);
                    if (data.indexOf('\"list\":[{') == -1) {
                        delay(1500);
                        data = window.external.getHtmlCode(api_url + p, url, 200);
                    }
                    if (data.indexOf('\"list\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    //结束？...其结束处，亦一直有数据
                    if (jo.list[0].urllink == last_url)
                        break;
                    last_url = jo.list[0].urllink;
                    for (var i = 0; i <= jo.list.length - 1; i++) {
                        var item = jo.list[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '') + '\",video_url:\"' + item.urllink + '\",thumbnail:\"' + item.imglink + '\",duration:' + item.durations + ',date:' + item.uploadtime +';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="docuchina">
        <url><![CDATA[docuchina\.cn/.*?/VIDA(?<id>[^.]+)\.s?html?]]></url>
        <title><![CDATA[<title>([^_]+)[^<]+</title>]]></title>
        <content><![CDATA[(?is)<li\s+.*?src="(?<thumbnail>[^"]+).*?text.*?href="(?<url>[^"]+).*?>(?<title>[^<]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://www.docuchina.cn/2014/01/13/VIDA1389598340216690.shtml
                document.body.innerHTML = document.getElementById('ypdianbo').innerHTML;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="mgtv" crpj="true">
        <url><![CDATA[mgtv\.com/h/(?<id>\d+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.mgtv.com]]></baseUrl>
        <headers><![CDATA[User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36 Edge/18.17763]]></headers>
        <ckSign><![CDATA[loginAccount]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.mgtv.com/h/349309.html
                //https://www.mgtv.com/h/345876.html
                var cid = window.location.href.match(/\w\/(\d+)/)[1];
                var api_url = 'https://pcweb.api.mgtv.com/episode/list?collection_id=' + cid + '&size=30&callback=&page=';
                var cookie = window.external.getCookie(window.location.href) || document.cookie;
                var headers = 'Referer: ' + window.location.href + '\r\nCookie: ' + cookie;
                var title = '', html = '';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCodeEx(api_url + p, headers);
                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.data.info.title;
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        var date = item.ts.substr(0, item.ts.indexOf('.'));
                        html += 'v_title:\"' + item.t4 + ' ' + item.t2 + '\",video_url:\"' + item.url + '\",thumbnail:\"' + item.img + '\",duration:' + item.time + ',date:' + date +';\r\n';
                    }
                    if (jo.data.total_page == p)
                        break;
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="mgtv" watchList="true" crpj="true" redirect="true">
        <url><![CDATA[mgtv\.com/\w/(?<id>\d+)/\d+\.html?]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.mgtv.com/b/338922/9698444.html
                //https://www.mgtv.com/b/330763/6118889.html->https://www.mgtv.com/h/330763.html
                var cid = window.location.href.match(/(\d+)\/\d+/)[1];
                var pl_url = 'https://www.mgtv.com/h/' + cid + '.html';
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="mgtv" crpj="true">
        <url><![CDATA[mgtv\.com/u/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.mgtv.com]]></baseUrl>
        <ckSign><![CDATA[loginAccount]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://i.mgtv.com/u/3271dee1094e4534bf890dfe91b334d0/work.html
                var uid = window.location.href.match(/u\/([^/]+)/)[1];
                var api_url = 'https://pcweb.api.mgtv.com/feed/upgc/video?uuid=' + uid + '&pageSize=30&pageCount=';
                var cookie = window.external.getCookie(window.location.href) || document.cookie;
                var headers = 'Referer: ' + window.location.href + '\r\nCookie: ' + cookie;
                var html = 'title:\"' + document.getElementsByClassName('name')[0].innerText + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCodeEx(api_url + p + '&_' + Date.now(), headers);
                    if (data.indexOf('\"rows\":[]') != -1)
                       break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.rows.length - 1; i++) {
                        var item = jo.data.rows[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",thumbnail:\"' + item.images.normal + '\",duration:' + item.duration + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="sohu" crpj="true" delegate="true">
        <url><![CDATA[tv\.sohu\.com/s\d{4}/(?<id>[^/]+)/?(?:\?|$)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://tv.sohu.com/s2015/jmaque/
                //https://tv.sohu.com/s2021/jlpjingdiancq2017/
                //https://tv.sohu.com/s2015/jmaque/?qq-pf-to=pcqq.group
                var html = window.external.getHtmlCode(window.external.url);
                var pid = html.match(/playlistId\s*=\s*\"([^\"]+)/)[1];
                var title = '';
                html = '';
                var api_url = 'https://pl.hd.sohu.com/videolist?playlistid=' + pid + '&pageRule=3&pagesize=100&pagenum=';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, window.external.url, 0, false);
                    if (data.indexOf('\"videos\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.albumName;
                    for (var i = 0; i <= jo.videos.length - 1; i++) {
                        var item = jo.videos[i];
                        html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + item.pageUrl + '\",duration:' + item.playLength + ',date:' + item.publishTime + ';\r\n';
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="sohu" crpj="true">
        <url><![CDATA[tv\.sohu\.com/.*?user_id=(?<id>[^#]+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://m.tv.sohu.com/upload/clientapp/pgc/user.html?user_id=343901672#newWorks
                //https://m.tv.sohu.com/upload/clientapp/pgc/user.html?user_id=342794517#feed 13636条
                var title = (document.getElementsByClassName('publisher-name').length != 0) ? document.getElementsByClassName('publisher-name')[0].innerText : window.pageInfo.title;
                var uid = window.location.href.match(/user_id=([^#]+)/)[1];
                var api_url = 'https://fans.tv.sohu.com/star/h5/userWorks?callback=&userId=' + uid + '&visitType=0&size=48&_=' + Date.now() + '&lastId=';
                var html = 'title:\"' + title + '\"$';
                var last_id = window.external.sp || -1;
                var p = 0;
                var pmax = 49;
                var hasMore = true;
                while (true) {
                    if (p > pmax)
                        break;
                    var data = window.external.getHtmlCode(api_url + last_id, window.location.href);
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        html += 'v_title:\"' + item.videoInfo.video_name.replace(/\"/g, '\'') + '\",video_url:\"' + item.videoInfo.url_html5 + '\",duration:' + item.videoInfo.total_duration + ',date:' + item.formatTime + ';\r\n';
                    }
                    if (!jo.data.hasmore) {
                        hasMore = false;
                        break;
                    }

                    last_id = jo.data.lastId;
                    p++;
                }

                html = 'startPage:' + last_id + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="sohu" crpj="true" delegate="true">
        <url><![CDATA[tv\.sohu\.com/user/(?:(?<id>\d+)|.*?uid=(?<id>\d+))]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://tv.sohu.com/user/343901199#t0 ->
                //https://tv.sohu.com/user/profile/profile_video.do?uid=343901199&pg=1&size=25&sortType=2
                //https://tv.sohu.com/user/media/video.do?uid=381222782
                var url = window.external.url;
                var html = window.external.getHtmlCode(url);
                var title = (html.indexOf('uname') != -1) ? html.match(/\"uname\">([^<]+)/)[1] : html.match(/nickName\"\s*:\s*\"([^\"]+)/)[1];
                var uid = (url.indexOf('uid') == -1) ? url.match(/user\/([^&#]+)/)[1] : url.match(/uid=([^&#]+)/)[1];
                var api_url = 'https://my.tv.sohu.com/user/a/rvideo/ta/list.do?userId=' + uid + '&sortType=2&size=25&pg=';
                if (url.indexOf('/media/video') != -1)
                    api_url = 'https://my.tv.sohu.com/user/wm/ta/v.do?uid=' + uid + '&size=50&sortType=2&_=' + Date.now() + '&pg=';
                html = 'title:\"' + title + '\"$';
                if (url.indexOf('&pg=') == -1) {
                    var p = parseInt(window.external.sp) || 1;
                    if (p == 0)
                        p = 1;
                    var pmax = (window.external.sp != undefined) ? 49 : 199;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var data = window.external.getHtmlCode(api_url + p, url);
                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.data.list.length - 1; i++) {
                            var item = jo.data.list[i];
                            var video_url = item.url;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.videoLength + ',date:' + item.uploadTime + ';\r\n';
                        }
                        if (!jo.data.haveMore) {
                            hasMore = false;
                            break;
                        }

                        p++;
                        pidx++;
                    }
                    html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                }
                else {
                    var p = url.match(/&pg=([^&]+)/)[1];
                    var data = window.external.getHtmlCode(api_url + p, url);
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        var video_url = item.url;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.videoLength + ',date:' + item.uploadTime + ';\r\n';
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!-- https://www.wasu.cn/Detail/info/id/9935816 -->
    <item domain="wasu">
        <url><![CDATA[wasu\.cn/.*?/info/id/(?<id>\d+)]]></url>
        <title><![CDATA[class="movie_name.*?>([^<]+)]]></title>
        <content><![CDATA[(?is)<li\sclass="rela\s*tele_rela.*?href="(?<url>[^"]+).*?>(?<title>[^<]+)</a>]]></content>
    </item>
    <item domain="fun" crpj="true">
        <url><![CDATA[fun\.tv/subject/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <baseUrl><![CDATA[http://www.fun.tv]]></baseUrl>
        <headers><![CDATA[User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36 Edge/18.17763]]></headers>
        <jsCode><![CDATA[
            try {
                //http://www.fun.tv/subject/338349/
                var id = window.location.href.match(/subject\/([^\/]+)/)[1];
                var api_url = 'http://q1.fun.tv/ajax/vod_panel/' + id + '?uc=109&isajax=1';
                var data = window.external.getHtmlCode(api_url, window.location.href);
                if (data) {
                    var jo = JSON.parse(data);
                    if (jo.data.videos.length != 0) {
                        var html = 'title:\"' + jo.data.name + '\"$';
                        for (var i = 0; i <= jo.data.videos.length - 1; i++) {
                            var item = jo.data.videos[i];
                            html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",thumbnail:\"' + item.pic + '\",duration:' + item.duration + ';\r\n';
                        }
                        window.external.receive(html);
                    }
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="zhihu" crpj="true" referer="true">
        <url><![CDATA[zhihu\.com/people/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^$]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.zhihu.com/people/ai-chi-zha-ji-de-qy/zvideos
                var title = (document.getElementsByClassName('ProfileHeader-name').length != 0) ? document.getElementsByClassName('ProfileHeader-name')[0].innerText : document.title;
                var uid = window.location.href.match(/people\/([^\/]+)/)[1];
                var api_url = 'https://www.zhihu.com/api/v4/members/' + uid + '/zvideos?limit=20&offset=';
                var html = 'title:\"' + title + '\"$';
                var offset = 0;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + offset);
                    var jo = JSON.parse(data);
                    if (jo.data.length == 0)
                        break;

                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        var video_url = '';
                        var pl = item.video.playlist;
                        if (pl.fhd)
                            video_url = pl.fhd.play_url;
                        else if (pl.hd)
                            video_url = pl.hd.play_url;
                        else if (pl.sd)
                            video_url = pl.sd.play_url;
                        else if (pl.ld)
                            video_url = pl.ld.play_url;
                        else
                            video_url = item.url;
                        //有些电脑下载直链不行，重解析下载吧...
                        video_url = 'https://www.zhihu.com/zvideo/' + item.id;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.image_url + '\",duration:' + item.video.duration + ',date:' + item.published_at + ',play:' + item.video.play_count + '$';
                    }
                    offset += 20;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="zhihu" crpj="true" referer="true">
        <url><![CDATA[zhihu\.com/search\?q=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^$]+)]]></content>
        <exjs><![CDATA[http://www.cr-soft.net/js/xz96.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //https://www.zhihu.com/search?q=%E6%98%A5%E5%A4%A9&type=zvideo
                var kw = window.external.url.match(/q=([^&]+)/)[1];
                var html = 'title:\"' + decodeURI(kw) + '\"$';
                var cookie = window.external.getCookieEx(window.external.url, 'd_c0', 2500) || document.cookie;
                if (cookie.indexOf('d_c0') != -1) {
                    cookie = cookie.match(/d_c0=[^;]+/)[0];
                    var d_c0 = cookie.match(/d_c0=([^;]+)/)[1];
                    var api_url = 'https://www.zhihu.com/api/v4/search_v3?t=zvideo&q=' + kw + '&correction=1&limit=20&offset=';
                    var offset = 0;
                    while (true) {
                        var args = '101_3_3.0+/api/v4/search_v3?t=zvideo&q=' + kw + '&correction=1&limit=20&offset=' + offset + '+' + d_c0;
                        var headers = 'x-zse-93: 101_3_3.0\r\nx-zse-96: 2.0_' + window.xz96(md5(args)) + '\r\nCookie: ' + cookie;
                        var data = window.external.getHtmlCodeEx(api_url + offset, headers);
                        if (data.indexOf('data\":[{') == -1)
                            data = window.external.getHtmlCodeEx(api_url + offset, headers);
                        if (data.indexOf('data\":[{') == -1)
                            break;

                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.data.length - 1; i++) {
                            var item = jo.data[i].object;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.video_url + '\",thumbnail:\"' + item.cover_url + '\",duration:' + item.duration + ',date:' + item.created_at + ',play:' + item.play_count + '$';
                        }
                        offset += 20;
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ouchn" crpj="true">
        <url><![CDATA[ouchn\.cn/(?:#/)?courseDetails/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://le.ouchn.cn/#/courseDetails/CAAA010000048682
                //http://le.ouchn.cn/#/courseDetails/CAAA010000001541
                //https://le.ouchn.cn/courseDetails/CAAA010000020624
                var cid = window.external.url.match(/courseDetails\/([^/?&]+)/)[1];
                var api_url = 'http://le.ouchn.cn/api/Course/' + cid + '/MicroCourse/Details';
                var data = window.external.getHtmlCode(api_url, 'http://le.ouchn.cn/');
                var jo = JSON.parse(data);
                var html = 'title:\"' + jo.Data.Name + '\"$';
                for (var i = 0; i <= jo.Data.Modules.length - 1; i++) {
                    var item = jo.Data.Modules[i];
                    var video_url = 'http://le.ouchn.cn/course/' + item.Url + '.html';
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + jo.Data.Cover + '\",duration:' + item.Duration + ',date:' + item.ModifyTime + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="kuke99" crpj="true">
        <url><![CDATA[kuke99\.com/[^/]+/(?<id>\d+)\.html]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.kuke99.com/course/3488.html
                //https://www.kuke99.com/live/1324.html
                var title = document.title.replace('-库课网校', '');
                var html = 'title:\"' + title + '\"$';
                var lws = document.getElementsByClassName('toggle-list-wrap');
                for (var i = 0; i <= lws.length - 1; i++) {
                    var lw = lws[i];
                    for (var j = 0; j <= lw.childElementCount - 1; j++) {
                        var n = lw.children[j];
                        var video_url = 'https://www.kuke99.com/course?id=' + n.getAttribute('node_id') + '&type=' + n.getAttribute('goods_type');
                        var duration = n.children[1].innerText.match(/时长\s+([^\s]+)/)[1];
                        html += 'v_title:\"' + n.children[0].innerText.trim() + '\",video_url:\"' + video_url + '\",duration:' + duration + ';\r\n';
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="56" crpj="true">
        <url><![CDATA[56\.com/u/(?<id>[^/]+)/videos]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)\{"id".*?title":"(?<title>[^"]+).*?videoLength":(?<duration>[^,]+).*?smallCover":"(?<thumbnail>[^"]+).*?videoUrl":"(?<url>[^"]+)"\}]]></content>
        <jsCode><![CDATA[
            try {
                var title = document.getElementsByClassName('h1')[0].innerText;
                var uid = _CONFIG.sohu_uid;
                var api_url = 'https://my.tv.sohu.com/user/wm/56ta/v.do?uid=' + uid + '&sortType=2&size=40&callback=&_=' + Date.now() + '&pg=';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('\"list\":[{') == -1)
                        break;

                    var jo = JSON.parse(data.trim());
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        item.videoUrl = 'http://my.tv.sohu.com/us/' + item.userId + '/' + item.id + '.shtml';
                    }
                    html += JSON.stringify(json);
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="le" crpj="true" delegate="true">
        <url><![CDATA[\.le\.com/\w+/(?<id>\d+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),describe:(?<describe>[^;]*)]]></content>
        <jsCode><![CDATA[
            try {
                //不拿全数据，重新解析
                //http://www.le.com/tv/10039865.html
                //http://www.le.com/comic/18579.html
                var url = window.external.url
                var html = window.external.getHtmlCode(url);
                var title = html.match(/<h2>([^<]+)/)[1];
                html = 'title:\"' + title + '\"$';
                var pid = url.match(/\/(\d+)\./)[1];
                var api_url = 'http://d.api.m.le.com/detail/episode?pid=' + pid + '&platform=pc&pagesize=50&type=1&_=' + Date.now() + '&page=';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, url);
                    if (data.indexOf('list\":[{') == -1)
                        break;

                    jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        var video_url = 'http://www.le.com/ptv' + item.url.replace('_', '/');
                        //vip故，重解析
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ',describe:' + item.sub_title + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="le" watchList="true" crpj="true" redirect="true" delegate="true">
        <url><![CDATA[\.le\.com/.*?(?<id>\d+)\.html?.*?#vid=\d+]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),describe:(?<describe>[^;]*)]]></content>
        <jsCode><![CDATA[
            try {
                //http://www.le.com/ptv/vplay/74712656.html#vid=74712656
                //https://www.le.com/ptv/vplay/26869530.html?ch2=baidu_ffdsj_2#vid=26869530
                var html = window.external.getHtmlCode(window.external.url);
                var pl_url = html.match(/<a class=\"briefIntro_more\"[^>]+href=\"([^\"]+)/)[1];
                if (pl_url.indexOf('//') == 0)
                    pl_url = 'https:' + pl_url;
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="pptv" crpj="true" updateTitle="true" delegate="true">
        <url><![CDATA[pptv\.com/page/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://v.pptv.com/page/p2TNS7MZiaccqqBA.html
                //http://v.pptv.com/page/p2TNS7MZiaccqqBA.html
                var html = window.external.getHtmlCode(window.external.url);
                var title = (html.indexOf('<h1>') != -1) ? html.match(/<h1>([^<]+)/)[1] : html.match(/<title>([^<]+)/)[1];
                var pid = (html.indexOf('\"psid\"') != -1) ? html.match(/\"psid\":([^,]+)/)[1] : '';
                html = 'title:\"' + title + '\"$';
                var api_url = 'http://epg.api.pptv.com/detail.api?appId=ik&format=jsonp&vid=' + pid;
                var data = window.external.getHtmlCode(api_url);
                data = data.substr(1, data.length - 2);
                var jo = JSON.parse(data);
                for (var i = 0; i <= jo.v.video_list.video.length - 1; i++) {
                    var item = jo.v.video_list.video[i]._attributes;
                    var video_url = 'https://v.pptv.com/show/' + item.id + '.html';
                    html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.durationSecond + ',date:' + item.publishTime + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="pptv" crpj="true">
        <url><![CDATA[pptv\.com/\w+/\?username=(?<id>[^#]+)#video]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)\{.*?title":"(?<title>[^"]+).*?url":"(?<thumbnail>[^"]+).*?duration":(?<duration>[^,]+).*?link":"(?<url>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                var title = document.getElementsByTagName('h3')[0].innerText;
                var author = window.external.url.match(/username=([^#]+)/)[1];
                var url = 'https://ppsvc.pptv.com/author/tuWenSearch.htm?cb=&author=' + author + '&ps=20&appver=1.0&appplt=web&auth=1&appid=1&ppi=1&showDuration=true&&encrypt=1&pn=';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(url + p);
                    if (data.indexOf('\"tuWens\":null') != -1)
                        break;

                    html += data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xinpianchang" crpj="true">
        <url><![CDATA[xinpianchang\.com/(?:u|user/space/id-)(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)"]]></title>
        <content><![CDATA[(?is)<li\s+.*?data-articleid="(?<url>[^"]+).*?<img[^>]+_src="(?<thumbnail>[^"]+).*?duration[^>]+>(?<duration>[^<]+).*?>(?<date>[^<]+)发布.*?<a.*?<p[^>]+>(?<title>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.xinpianchang.com/a]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.xinpianchang.com/u10019394
                var title = document.body.innerHTML.match(/data-username=\"([^\"]+)\"/)[1];
                var userid = document.body.innerHTML.match(/data-userid=\"([^\"]+)\"/)[1];
                var url = 'https://www.xinpianchang.com/index.php?app=user&ac=space&ajax=1&id=' + userid + '&d=1&sort=pick&cateid=0&audit=1&is_private=0&page=';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(url + p, window.external.url);
                    if (!data)
                        break;

                    data = data.replace(/\' /g, ':').replace(/\'\'/g, '');
                    html += data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xinpianchang" crpj="true">
        <url><![CDATA[xinpianchang\.com/.*?search.*?kw[=-](?<id>[^/]+)]]></url>
        <title><![CDATA[<title>([^<]+)\s+-\s+新片场</title>]]></title>
        <content><![CDATA[(?is)<li\s+class="enter-filmplay.*?data-articleid="(?<url>[^"]+).*?<img[^>]+src="(?<thumbnail>[^"]+).*?duration[^>]+>(?<duration>[^<]+).*?>(?<date>[^<]+)发布.*?<a.*?<p[^>]+>(?<title>.*?)</p>]]></content>
        <baseUrl><![CDATA[https://www.xinpianchang.com/a]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.xinpianchang.com/index.php?app=search&kw=一路向秋
                document.body.innerHTML = document.body.innerHTML.replace(/\' /g, ':').replace(/\'\'/g, '');
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="weibo" crpj="true" redirect="true">
        <url><![CDATA[weibo\.com/p/(?<id>\d+).*?(?:home|type=)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://weibo.com/p/1005056094825391/home?profile_ftype=1&is_all=1#_0
                //https://weibo.com/p/1005056094825391/home?from=page_100505&mod=TAB#place
                //https://weibo.com/p/1005056094825391/photos?type=photo#place
                //https://weibo.com/p/1005056094825391/photos?type=face#place
                //https://weibo.com/p/1006061809745371/photos?type=video#place
                var uid = window.external.url.match(/p\/\d{6}([^\/?]+)/)[1];
                document.body.innerHTML = 'cr_playlist_url=https://weibo.com/u/' + uid + '/photos?type=video#place$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="weibo" crpj="true" delay="1500" delegate="http://cr-soft.net/jx.php">
        <url><![CDATA[weibo\.com/u/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.*?)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <ckSign><![CDATA[SUB]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://weibo.com/u/3979202274?tabtype=newVideo
                //https://weibo.com/u/6605420677?tabtype=newVideo
                var uid = window.external.url.match(/u\/(\d+)/)[1];
                var api_url = 'https://weibo.com/ajax/profile/getWaterFallContent?uid=' + uid + '&cursor=';
                var cookie = window.external.getCookieEx(href, 'SUB', 2500) || window.external.getCookie(href) || document.cookie;
                if (cookie.indexOf('SUB=') == -1) {
                    if (window.localStorage && window.localStorage.wb_ck)
                        cookie = window.localStorage.wb_ck;
                    else
                        cookie = 'SUB=_2AkMXuScYf8NxqwJRmf8RzmnhaoxwzwDEieKh5dbDJRMxHRl-yT9jqhALtRB6PDkJ9w8OaqJAbsgjdEWtIcilcZxHG7rw';
                }
                if (window.localStorage && window.localStorage.wb_ck != cookie)
                    window.localStorage.setItem('wb_ck', cookie);
                var headers = 'Referer: ' + window.external.url + '\r\nCookie: ' + cookie;
                var title = '', html = '';
                var cursor = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + cursor, headers);
                    if (data.indexOf('list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        if (!title)
                            title = item.user.screen_name + '的微博视频';
                        var media = item.page_info.media_info;
                        if (!media)
                            continue;
                        var thumbnail = item.page_info.page_pic;
                        var video_url = media.mp4_1080p_mp4 || media.mp4_720p_mp4 || media.h5_url;
                        //高分辨率者
                        if (media.playback_list && media.playback_list.length != 0) {
                            var pi = media.playback_list[0].play_info;
                            video_url = pi.url;
                            //1080p
                            for (var j = 0; j <= media.playback_list.length - 1; j++) {
                                pi = media.playback_list[j].play_info;
                                if (pi.height == 1080) {
                                    video_url = pi.url;
                                    break;
                                }
                            }
                        }
                        var v_title = media.video_title || media.kol_title;
                        if (!v_title && item.topic_struct && item.topic_struct.length != 0)
                            v_title = item.topic_struct[0].topic_title;
                        html += 'v_title:\"' + v_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + media.duration + ',date:' + media.video_publish_time + ',play:' + media.online_users_number + ';\r\n';
                    }
                    cursor = jo.data.next_cursor;
                    pidx++;
                }

                html = 'startPage:' + cursor + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyu">
        <url><![CDATA[douyu\.com/group/video/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://yuba.douyu.com/group/video/33372#4
                var group_id = window.external.url.match(/video\/(\d+)/)[1];
                var data = window.external.getHtmlCode('https://yuba.douyu.com/wbapi/web/group/head?group_id=' + group_id, window.external.url);
                var jo = JSON.parse(data);
                var html = 'title:\"' + jo.data.group_name + '\"$';
                //playback
                var url = 'https://yuba.douyu.com/wbapi/web/group/videolist?type=1&group_id=' + group_id + '&page=';
                var p = 1, last_id = 0;
                while (true) {
                    data = window.external.getHtmlCode(url + p + '&lastid=' + last_id);
                    if (data.indexOf('\"data\":[{') == -1)
                        break;

                    jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        last_id = jo.data[0].lastid;
                        for (var j = 0; j <= jo.data[i].list.length - 1; j++) {
                            var item = jo.data[i].list[j];
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.player + '\",thumbnail:\"' + item.thumb + '\",duration:' + item.video_str_duration + ',date:' + item.create_time + ',play:' + item.view_num + ';\r\n';
                        }
                    }
                    p++;
                }
                //video
                p = 1, last_id = 0;
                url = 'https://yuba.douyu.com/wbapi/web/group/videolist?type=2&group_id=' + group_id + '&page='
                while (true) {
                    data = window.external.getHtmlCode(url + p + '&lastid=' + last_id);
                    if (data.indexOf('\"data\":[{') == -1)
                        break;

                    jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        last_id = jo.data[0].lastid;
                        for (var j = 0; j <= jo.data[i].list.length - 1; j++) {
                            var item = jo.data[i].list[j];
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.player + '\",thumbnail:\"' + item.thumb + '\",duration:' + item.video_str_duration + ',date:' + item.create_time + ',play:' + item.view_num + ';\r\n';
                        }
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyu">
        <url><![CDATA[douyu\.com/author(?:-\w+)?/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://v.douyu.com/author/gKpdxql6oAaW
                //https://v.douyu.com/author-video/JrA48QlEMA0E
                //https://v.douyu.com/author-replay/gKpdxql6oAaW
                var title = document.title, html = '';
                var up_id = $DATA.upId;
                //video
                if (window.external.url.indexOf('-replay') == -1) {
                    var api_url = 'https://v.douyu.com/wgapi/vod/center/getAuthorVideosByNew?up_id=' + up_id + '&limit=30&page=';
                    var p = 1;
                    while (true) {
                        var data = window.external.getHtmlCode(api_url + p, window.external.url);
                        if (data.indexOf('\"videos\":[{') == -1)
                            break;

                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.data.videos.length - 1; i++) {
                            var item = jo.data.videos[i];
                            if (!title)
                                title = item.nickname;
                            var video_url = 'https://v.douyu.com/show/' + item.hash_id;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.video_pic + '\",duration:' + item.video_duration + ',date:' + item.update_time + ',play:' + item.view_num + ';\r\n';
                        }
                        p++;
                    }
                }
                //play back
                if (window.external.url.indexOf('-video') == -1) {
                    p = 1;
                    api_url = 'https://v.douyu.com/wgapi/vod/center/authorShowVideoList?limit=5&up_id=' + up_id + '&page=';
                    while (true) {
                        var data = window.external.getHtmlCode(api_url + p);
                        if (data.indexOf('\"list\":[{') == -1)
                            break;

                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.data.list.length - 1; i++) {
                            var item = jo.data.list[i].video_list[0];
                            if (!title)
                                title = item.author;
                            var video_url = 'https://v.douyu.com/show/' + item.hash_id;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.video_pic + '\",duration:' + item.video_str_duration + ',date:' + item.start_time + ',play:' + item.view_num + ';\r\n';
                        }
                        p++;
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyu" watchList="true">
        <url><![CDATA[douyu\.com/show/(?<id>[^/?]+)\?ap=]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <baseUrl><![CDATA[https://v.douyu.com/show/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://v.douyu.com/show/Kp1QM843bq3Mk4bj?ap=1
                var href = window.location.href;
                var vid = href.match(/show\/([^/?]+)/)[1];
                var up_id = window.$DATA.ROOM.up_id;
                var api_url = 'https://v.douyu.com/wgapi/vod/center/getShowReplayList?vid=' + vid + '&up_id=' + up_id;
                var data = window.external.getHtmlCode(api_url, href);
                var jo = JSON.parse(data);
                var title = '', html = '';
                if (jo.data.list && jo.data.list.length != 0) {
                    title = '直播录像 ' + jo.data.date;
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        html += 'v_title:\"' + item.show_remark.replace(/\"/g, '\'') + '\",video_url:\"' + item.hash_id + '\",duration:' + item.video_duration + ';\r\n';
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="yy">
        <url><![CDATA[yy\.com/u/videos/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.yy.com]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.yy.com/u/videos/10158
                //https://www.yy.com/u/videos/80801#replay 3000+页
                if (!window.pageProps) {
                    var html = 'title:\"页面已失效，请检查\"$error=链接失效，(*^▽^*)您已来到荒无人烟的星球。$';
                    window.external.receive(html);
                    return;
                }

                var ui = window.pageProps.userBaseInfo;
                var html = 'title:\"' + ui.topData.baseUserInfo.anchorName + '\"$';
                var yn = ui.yyNum;
                //三种类型...tagType，小视频，回放等
                //小视频(duanpai)：2，回放(replay)：3
                for (var t = 1; t <= 3; t++) {
                    if (window.external.url.indexOf('duanpai') != -1 && t != 2 || window.external.url.indexOf('replay') != -1 && t != 3)
                        continue;

                    var p = parseInt(window.external.sp) || 1;
                    var pmax = (window.external.sp != undefined) ? 19 : 199;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        url = 'https://www.yy.com/u/videos/' + t + '/' + yn + '/' + p + '/30';
                        var data = window.external.getHtmlCode(url, window.external.url);
                        //请求太快返回空
                        if (data.indexOf('result\":[{') == -1) {
                            delay(2500);
                            data = window.external.getHtmlCode(url, window.external.url);
                        }
                        else
                            delay(1500);
                        if (data.indexOf('result\":[{') == -1) {
                            hasMore = false;
                            break;
                        }

                        var jo = JSON.parse(data);
                        for (var i = 0; i <= jo.videoPage.result.length - 1; i++) {
                            var item = jo.videoPage.result[i];
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.playUrl + '\",thumbnail:\"' + item.imageUrl + '\",duration:' + item.duration + ',date:' + item.beforeTime + '前,play:' + item.totalViewer + ';\r\n';
                        }
                        p++;
                        pidx++;
                    }
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="miguvideo">
        <url><![CDATA[miguvideo\.com/p/detail/([^?&#]+).*?p=\d+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.miguvideo.com/p/detail/748066463?from=migu&token=#p=0
                var title = '', html = '';
                var eid = window.external.url.match(/detail\/([^?&#]+)/)[1];
                var api_url = 'https://v2-sc.miguvideo.com/program/v3/cont/content-info/' + eid + '/';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, window.external.url);
                    if (data.indexOf('datas\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    if (!title)
                        title =  jo.body.data.name;
                    for (var i = 0; i <= jo.body.data.datas.length - 1; i++) {
                        var item = jo.body.data.datas[i];
                        var video_url = 'https://www.miguvideo.com/p/detail/' + item.pID;
                        html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ';\r\n';
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="miguvideo">
        <url><![CDATA[miguvideo\.com/p/live/([^?&#]+).*?p=\d+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.miguvideo.com/p/live/120000456459#p=0
                var title = '', html = '';
                var lid = window.external.url.match(/live\/([^?&#]+)/)[1];
                var api_url = 'https://v0-sc.miguvideo.com/vms-match/v6/staticcache/basic/live-room-list/' + lid;
                var data = window.external.getHtmlCode(api_url, window.external.url);
                var jo = JSON.parse(data);
                title = jo.body.title;
                api_url = 'https://v0-sc.miguvideo.com/vms-match/v5/staticcache/basic/all-view-list/' + lid + '/2/miguvideo';
                data = window.external.getHtmlCode(api_url, window.external.url);
                if (data.indexOf('replayList\":[{') != -1 || data.indexOf('recommendList\":[{') != -1) {
                    var jo = JSON.parse(data);
                    //回顾
                    if (jo.body.replayList && jo.body.replayList.length != 0) {
                        for (var i = 0; i <= jo.body.replayList.length - 1; i++) {
                            var item = jo.body.replayList[i];
                            var video_url = 'https://www.miguvideo.com/p/detail/' + item.pID;
                            html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ';\r\n';
                        }
                    }
                    //集锦
                    if (jo.body.recommendList && jo.body.recommendList.length != 0) {
                        for (var i = 0; i <= jo.body.recommendList.length - 1; i++) {
                            var item = jo.body.recommendList[i];
                            var video_url = 'https://www.miguvideo.com/p/detail/' + item.pID;
                            html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ';\r\n';
                        }
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="miguvideo" watchList="true" delay="2500">
        <url><![CDATA[miguvideo\.com/.*?sportLive.*?mgdbId=([^&#]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.miguvideo.com/mgs/website/prd/sportLive.html?mgdbId=120000169058
                //https://www.miguvideo.com/mgs/website/prd/sportLive.html?mgdbId=120000202072
                var title = (document.getElementsByClassName('title shortTitle').length != 0) ? document.getElementsByClassName('title shortTitle')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                var id = window.external.url.match(/mgdbId=([^&#]+)/)[1];
                var api_url = 'https://app-sc.miguvideo.com/vms-match/v5/staticcache/basic/all-view-list/' + id + '/2/miguvideo';
                var data = window.external.getHtmlCode(api_url, window.external.url);
                if (data.indexOf('replayList') != -1) {
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.body.replayList.length - 1; i++) {
                        var item = jo.body.replayList[i];
                        var video_url = 'https://www.miguvideo.com/mgs/website/prd/detail.html?cid=' + item.pID;
                        html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.duration + ';\r\n';
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" delay="4500">
        <url><![CDATA[ixigua\.com/(?:home|user)/(?<id>\d+)(?:/|\?|$)(?!hotsoon)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <exjs><![CDATA[https://sf1-ttcdn-tos.pstatp.com/obj/rc-web-sdk/acrawler.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //delegate代理模式不行... 为毛测试，window.byted_acrawler.sign返回位数不对？因为crpj需要置入cookie，byted_acrawler才能初始化
                //https://www.ixigua.com/home/50676556929/
                //https://www.ixigua.com/home/52773485452/
                //https://www.ixigua.com/home/54205738157/video/?preActiveKey=hotsoon
                //https://www.ixigua.com/home/111184831526/ 其title中有引号
                //https://m.ixigua.com/user/13955353929?
                //https://www.ixigua.com/home/55999927329/?source=pgc_author_name&list_entrance=shortvideo
                //https://www.ixigua.com/home/52773485452/?list_entrance=search lzq
                //https://www.ixigua.com/home/110859404979 4k
                var title = '', html = '';
                var url = window.external.url;
                var uid = url.match(/home\/([^/]+)/)[1];
                var cookie = window.external.getCookieEx(url, 'msToken', 2500);
                if (!cookie || cookie.indexOf('ttwid') == -1)
                    cookie = window.external.getCookieEx(url, 'ttwid', 2500);
                if (!cookie || cookie.indexOf('ttwid') == -1)
                    cookie = getcks('https://www.ixigua.com/6948039086502314500');
                if (!cookie || cookie.indexOf('ttwid') == -1)
                    cookie = window.external.getCookie(url);
                if (!cookie)
                    cookie = window.external.getCookie(url, true);
                //有些机子上，无ttwid，亦可解
                var headers = 'Cookie: ' + cookie + '\r\nReferer: ' + url;
                var base_url = 'https://www.ixigua.com/api/videov2/author/new_video_list?to_user_id=' + uid + '&offset=';
                var offset = (window.external.sp != undefined) ? parseInt(window.external.sp) : 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var p = 0, hasMore = true;
                //到90就停止了...
                while (true && window.byted_acrawler) {
                    if (p > pmax)
                        break;

                    var api_url = base_url + offset;
                    var o = {
                        url: api_url.substring(api_url.indexOf('/api')),
                    };
                    api_url += '&_signature=' + window.byted_acrawler.sign(o);
                    var data = window.external.getHtmlCodeEx(api_url, headers, 1500);
                    //again
                    if (!data) {
                        delay(2500);
                        data = window.external.getHtmlCodeEx(api_url, headers, 1500);
                    }
                    if (!data || data.indexOf('videoList\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    var ds = jo.data.videoList;
                    for (var i = 0; i <= ds.length - 1; i++) {
                        var item = ds[i];
                        if (!title)
                            title = item.source || item.media_name
                        if (!title && item.user && item.user.info)
                            title = item.user.info.name;
                        //避免被正则替换掉
                        var v_title = item.title.replace(/</g, '《').replace(/>/g, '》').replace(/\"/g, '\'');
                        var wc = item.video_detail_info ? item.video_detail_info.video_watch_count : item.action ? item.action.play_count : 0;
                        var lc = item.digg_count || item.video_like_count;
                        if (!lc && item.action)
                            lc = item.action.digg_count;
                        var dt = item.publish_time || item.create_time;
                        html += 'v_title:\"' + v_title + '\",video_url:\"https://www.ixigua.com/' + (item.gid || item.group_id_str || item.item_id || item.id_str) + '\",duration:' + item.video_duration + ',date:' + dt + ',play:' + wc + ',like:' + lc + ';\r\n';
                    }

                    p++;
                    offset += 30;
                }
                //部分可以... https://www.ixigua.com/home/3203745003 -> https://ib.snssdk.com/video/app/user/videolist_tab/v3/?orderby=publishtime&to_user_id=3203745003&tab=video&count=20&offset=20
                if (!html) {
                    p = 0, hasMore = true;
                    base_url = 'https://ib.snssdk.com/video/app/user/videolist_tab/v3/?orderby=publishtime&to_user_id=' + uid + '&tab=video&count=30&offset=';
                    while (true) {
                        if (p > pmax)
                            break;
                        var api_url = base_url + offset;
                        var data = window.external.getHtmlCodeEx(api_url, headers, 200);
                        if (!data) {
                            hasMore = false;
                            break;
                        }
                        var jo = JSON.parse(data);
                        var ds = jo.data;
                        if (!ds) {
                            hasMore = false;
                            break;
                        }

                        for (var i = 0; i <= ds.length - 1; i++) {
                            if (!title)
                                title = ds[i].source || ds[i].media_name
                            if (!title && ds[i].user_info)
                                title = ds[i].user_info.name;
                            //避免被正则替换掉
                            var v_title = ds[i].title.replace(/</g, '《').replace(/>/g, '》').replace(/\"/g, '\'');
                            var wc = ds[i].video_detail_info ? ds[i].video_detail_info.video_watch_count : ds[i].action.play_count;
                            var lc = ds[i].digg_count || ds[i].video_like_count;
                            var dt = ds[i].publish_time || ds[i].create_time;
                            html += 'v_title:\"' + v_title + '\",video_url:\"https://www.ixigua.com/' + (ds[i].gid || ds[i].group_id_str || ds[i].item_id || ds[i].id_str) + '\",duration:' + ds[i].video_duration + ',date:' + dt + ',play:' + wc + ',like:' + lc + ';\r\n';
                        }
                        if (!jo.has_more) {
                            hasMore = false;
                            break;
                        }

                        p++;
                        offset += 30;
                    }
                }

                html = 'startPage:' + offset + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html + '$error=请在默认浏览器中打开此链接，或点击右下角[打开URL]打开链接，下拉看是否有图片滑块验证，若有则手动验证之后再做解析';
                window.external.receive(html);

                function getcks(url) {
                    //hard...避免chrome等多账号影响，此为先
                    try {
                        window.byted_acrawler.init({
                            aid: 99999999,
                            dfp: 0
                        });

                        var h = window.external.getHeaders(url, 'GET', '', navigator.userAgent);
                        if (h.indexOf('__ac_nonce') != -1) {
                            var an = h.match(/__ac_nonce=([^;]+)/)[1];
                            var as = window.byted_acrawler.sign('', an);
                            var data = '{\"region\":\"cn\",\"aid\":1768,\"needFid\":false,\"service\":\"www.ixigua.com\",\"migrate_info\":{\"ticket\":\"\",\"source\":\"node\"},\"cbUrlProtocol\":\"https\",\"union\":true}';
                            h = window.external.getPostHeaders('https://ttwid.bytedance.com/ttwid/union/register/', data);
                            if (h.indexOf('ttwid') != -1) {
                                var ttwid = h.match(/ttwid=([^;]+)/)[1];
                                return '__ac_nonce=' + an + ';__ac_signature=' + as + ';ttwid=' + ttwid;
                            }
                        }
                    }
                    catch (ex) {
                        return '';
                    }
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" delay="4500">
        <url><![CDATA[ixigua\.com/(?:home|user)/(?<id>\d+)/hotsoon]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <exjs><![CDATA[https://sf1-ttcdn-tos.pstatp.com/obj/rc-web-sdk/acrawler.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //https://www.ixigua.com/home/984792207998174/hotsoon/?preActiveKey=video
                var title = '', html = '';
                var url = window.external.url;
                var uid = url.match(/(?:home|user)\/([^/?]+)/)[1];
                //取msToken标记，以避免ttwid不能用。取到msToken，则必有ttwid
                var cookie = window.external.getCookieEx(url, 'msToken', 2500);
                if (!cookie || cookie.indexOf('ttwid') == -1)
                    cookie = window.external.getCookieEx(url, 'ttwid', 2500);
                if (!cookie || cookie.indexOf('ttwid') == -1)
                    cookie = getcks('https://www.ixigua.com/6948039086502314500');
                if (!cookie || cookie.indexOf('ttwid') == -1)
                    cookie = window.external.getCookie(url);
                if (!cookie)
                    cookie = window.external.getCookie(url, true);
                var mt = cookie.indexOf('msToken') ? cookie.match(/msToken=([^;]+)/)[1] : '';
                //有些机子上，无ttwid，亦可解
                var headers = 'Cookie: ' + cookie + '\r\nReferer: ' + url;
                var base_url = 'https://www.ixigua.com/api/videov2/hotsoon/video?to_user_id=' + uid + '&msToken=' + mt + '&max_behot_time=';
                mt = (window.external.sp != undefined) ? window.external.sp : 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var p = 0, hasMore = true;
                //到90就停止了...
                while (true && window.byted_acrawler) {
                    if (p > pmax)
                        break;

                    var api_url = base_url + mt;
                    var o = {
                        url: api_url.substring(api_url.indexOf('/api')),
                    };
                    api_url += '&_signature=' + window.byted_acrawler.sign(o);
                    var data = window.external.getHtmlCodeEx(api_url, headers, 1500);
                    //again
                    if (!data) {
                        delay(2500);
                        data = window.external.getHtmlCodeEx(api_url, headers, 1500);
                    }
                    if (!data || data.indexOf('data\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    var ds = jo.data.data;
                    for (var i = 0; i <= ds.length - 1; i++) {
                        var item = ds[i];
                        if (!title)
                            title = item.source || item.media_name
                        if (!title && item.user && item.user.info)
                            title = item.user.info.name;
                        //避免被正则替换掉
                        var v_title = item.title.replace(/</g, '《').replace(/>/g, '》').replace(/\"/g, '\'');
                        var wc = item.video_detail_info ? item.video_detail_info.video_watch_count : item.action.play_count;
                        var lc = item.digg_count || item.video_like_count;
                        if (!lc && item.action)
                            lc = item.action.digg_count;
                        var dt = item.publish_time || item.create_time;
                        html += 'v_title:\"' + v_title + '\",video_url:\"https://www.ixigua.com/' + (item.gid || item.group_id_str || item.item_id || item.id_str) + '\",duration:' + item.video_duration + ',date:' + dt + ',play:' + wc + ',like:' + lc + ';\r\n';
                    }
                    if (!jo.data.has_more) {
                        hasMore = false;
                        break;
                    }

                    mt = ds[ds.length - 1].behot_time;
                    p++;
                }

                html = 'startPage:' + mt + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html + '$error=请在默认浏览器中或点击右下角[打开URL]打开链接，下拉看是否有图片滑块验证，若有则手动验证之后再做解析';
                window.external.receive(html);

                function getcks(url) {
                    //hard...避免chrome等多账号影响，此为先
                    try {
                        window.byted_acrawler.init({
                            aid: 99999999,
                            dfp: 0
                        });

                        var h = window.external.getHeaders(url, 'GET', '', navigator.userAgent);
                        if (h.indexOf('__ac_nonce') != -1) {
                            var an = h.match(/__ac_nonce=([^;]+)/)[1];
                            var as = window.byted_acrawler.sign('', an);
                            var data = '{\"region\":\"cn\",\"aid\":1768,\"needFid\":false,\"service\":\"www.ixigua.com\",\"migrate_info\":{\"ticket\":\"\",\"source\":\"node\"},\"cbUrlProtocol\":\"https\",\"union\":true}';
                            h = window.external.getPostHeaders('https://ttwid.bytedance.com/ttwid/union/register/', data);
                            if (h.indexOf('ttwid') != -1) {
                                var ttwid = h.match(/ttwid=([^;]+)/)[1];
                                return '__ac_nonce=' + an + ';__ac_signature=' + as + ';ttwid=' + ttwid;
                            }
                        }
                    }
                    catch (ex) {
                        return '';
                    }
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" watchList="true" delegate="true">
        <url><![CDATA[ixigua\.com/(?<id>\d+)\?&*?id=\d+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.ixigua.com/]]></baseUrl>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.ixigua.com/6824723442495914509?id=6824735584565592590&logTag=jS-jQskpBAcMsXOQAVIAi
                //https://www.ixigua.com/6837372135749452301?&&id=7214683753367470625
                var url = window.external.url;
                var aid = url.match(/com\/([^\?]+)/)[1];
                var eid = url.match(/id=([^&]+)/)[1];
                if (url.indexOf('v.ixigua') != -1 || url.indexOf('ixigua') == -1)
                    url = window.external.getRedirectedUrl(url, '', navigator.userAgent);
                //两次跳转
                if (url.indexOf('m.ixigua') != -1)
                    url = window.external.getRedirectedUrl(url, '', navigator.userAgent);
                var cookie = getcks(url);
                if (!cookie)
                    cookie = window.external.getCookieEx(url, 'ttwid', 2500) || window.external.getCookie(url);
                //ttwid=7249940377549112836;?
                cookie = cookie.replace(/ttwid=\d{19,};/, '');
                //...
                var ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36';
                var headers = 'User-Agent: ' + ua + '\r\nCookie: ' + cookie + '\r\nReferer: ' + url;
                var html = window.external.getHtmlCodeEx(url, headers);
                var title = html.match(/<title[^>]*>([^<]+)/)[1];
                var pd = undefined;
                if (html.indexOf('packerData') != -1) {
                    try {
                        var pds = html.match(/packerData\":(.*?)\},\"queryKey/)[1];
                        pd = eval('(' + pds + ')');
                        dash = pd && pd.video && pd.video.video_logo;
                    }
                    catch (ex) {
                    }
                }

                //pd.albumInfo: 电视剧
                title = pd.albumInfo ? pd.albumInfo.title : (pd.pSeries ? pd.pSeries.seriesInfo.title : title);
                html = '';
                var api_url = pd.albumInfo ? 'https://www.ixigua.com/api/albumv2/details?albumId=' + aid + '&episodeId=' + eid : 'https://www.ixigua.com/api/videov2/pseries_more_v2?pSeriesId=' + aid + '&tailCount=30&rank=';
                //https://www.ixigua.com/6841411932574974477?id=6841753862622151175 一次即可取完
                if (api_url.indexOf('api/albumv2/details?') != -1) {
                    var data = window.external.getHtmlCode(api_url, url);
                    var jo = JSON.parse(data);
                    var pl = jo.data.playlist;
                    for (var i = 0; i <= pl.length - 1; i++)
                        html += 'v_title:\"' + (pl[i].name || pl[i].title) + '\",video_url:\"' + pl[i].albumId + '?id=' + pl[i].episodeId + '\",duration:' + pl[i].videoInfo.duration + ',play:' + pl[i].diggCount + ';\r\n';
                }
                //https://www.ixigua.com/6748995510029255172?id=6748993579483398670 分多次
                else {
                    var r = 0;
                    while (true) {
                        var data = window.external.getHtmlCode(api_url + r, url);
                        if (data.indexOf('\"data\":[]') != -1)
                            break;

                        var jo = JSON.parse(data);
                        var pl = jo.data;
                        for (var i = 0; i <= pl.length - 1; i++)
                            html += 'v_title:\"' + (pl[i].name || pl[i].title) + '\",video_url:\"' + pl[i].item_id + '\",duration:' + pl[i].video_duration + ',play:' + pl[i].video_detail_info.video_watch_count + ';\r\n';
                        r += 30;
                    }
                }
                if (!html && pd) {
                    var pl = pd.playlist || pd.pSeries.videoList;
                    for (var i = 0; i <= pl.length - 1; i++) {
                        var item = pl[i];
                        var url = item.albumId ? item.albumId + '?id=' + item.episodeId : item.log_pb.album_id + '?id=' + item.item_id;
                        var duration = item.video_duration || item.videoInfo.duration;
                        html += 'v_title:\"' + (pl[i].name || pl[i].title) + '\",video_url:\"' + url + '\",duration:' + duration + ',play:' + (item.diggCount || 0) + ';\r\n';
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                //https://www.ixigua.com/6756201119371756039?id=6752506125205111308&logTag=B4C6R_Vhb_mOGqh63kP7Z...为避免其大于号>、小于号影响，置innerText
                document.body.innerText = html;

                function getcks(url) {
                    if (typeof(window.external.getCookieEx) == 'undefined')
                        return '';
                    for (var i = 0; i <= 9; i++) {
                        var result = window.external.getCookieEx(url, '__ac_nonce', 2500);
                        if (result)
                            return result;
                    }

                    //hard...
                    if (typeof(window.external.getHeaders) == 'undefined' || typeof(window.external.getPostHeaders) == 'undefined')
                        return '';
                    try {
                        window.byted_acrawler.init({
                            aid: 99999999,
                            dfp: 0
                        });

                        var h = window.external.getHeaders(url, 'GET', '', navigator.userAgent);
                        if (h.indexOf('__ac_nonce') == -1)
                            return '';
                        var an = h.match(/__ac_nonce=([^;]+)/)[1];
                        var as = window.byted_acrawler.sign('', an);
                        var data = '{\"region\":\"cn\",\"aid\":1768,\"needFid\":false,\"service\":\"www.ixigua.com\",\"migrate_info\":{\"ticket\":\"\",\"source\":\"node\"},\"cbUrlProtocol\":\"https\",\"union\":true}';
                        h = window.external.getPostHeaders('https://ttwid.bytedance.com/ttwid/union/register/', data);
                        if (h.indexOf('ttwid') == -1)
                            return '';
                        var ttwid = h.match(/ttwid=([^;]+)/)[1];
                        return '__ac_nonce=' + an + ';__ac_signature=' + as + ';ttwid=' + ttwid;
                    }
                    catch (ex) {
                        return '';
                    }
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" watchList="true" redirect="true" delay="500">
        <url><![CDATA[ixigua\.com/user_playlist/(?<id>\d+)]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.ixigua.com/user_playlist/67211827964?rank=1&offset=0&logTag=8T0chWtPP2d_w9MVrHmRW->https://www.ixigua.com/home/67211827964
                var uid = window.external.url.match(/user_playlist\/([^/?]+)/)[1];
                document.body.innerHTML = 'cr_playlist_url=https://www.ixigua.com/home/' + uid + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" delay="7500">
        <url><![CDATA[ixigua\.com/pseries/(?<id>\d+)(?:$|/)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.ixigua.com/]]></baseUrl>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <jsCode><![CDATA[
            try {
                var pid = window._SSR_HYDRATED_DATA.Projection.video.pseries_id;
                var st = '';
                var base_url = '';
                var entries = window.performance.getEntriesByType('resource');
                for (var i = 0; i <= entries.length - 1; i++) {
                    if (entries[i].name.indexOf('/api/videov2/pseries_more_v2') != -1) {
                        base_url = entries[i].name;
                        break;
                    }
                }

                var title = document.getElementsByClassName('projection-series-header-title')[0].innerText;
                var api_url = base_url.replace('&rank=0', '') + '&rank=';
                var html = 'title:\"' + title + '\"$';
                var offset = 0;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + offset, window.location.href);
                    var jo = JSON.parse(data);
                    var ds = jo.data;
                    for (var i = 0; i <= ds.length - 1; i++)
                        html += 'v_title:\"' + ds[i].title.replace(/\"/g, '\'') + '\",video_url:\"' + ds[i].item_id + '\",duration:' + ds[i].video_duration + ';\r\n';
                    if (data.indexOf('\"data\":[]') != -1 )
                        break;
                    offset += 30;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" watchList="true" delay="7500">
        <url><![CDATA[ixigua\.com/cinema/album/(?<id>\w+)_\w+]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)[\[,]{"episodeId":"(?<url>[^"]+).*?title":"(?<title>[^"]+).*?Duration":(?<duration>[^,]+).*?name":"(?<describe>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.ixigua.com/]]></baseUrl>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.ixigua.com/cinema/album/7NXazgvbBlb/?logTag=kXmGtga61pAJbcXmxQlGQ 比如这样，它就不属于列表
                var title = document.getElementsByClassName('ProgramGuide__title')[0].innerText;
                var html = 'title:\"' + title + '\"$' + JSON.stringify(window.anyVideo.gidInformation.packerData.playlist);
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ixigua" delay="2500">
        <url><![CDATA[ixigua\.com/search/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.ixigua.com/]]></baseUrl>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.ixigua.com/search/%E6%98%A5%E5%A4%A9/?logTag=594535e3690f17a88cdb&tab_name=search
                var kw = window.external.url.match(/search\/([^/]+)/)[1];
                var html = 'title:\"' + decodeURI(kw) + '\"$';
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nReferer: ' + window.external.url;
                var sid = document.body.innerHTML.match(/search_id\":\"([^\"]+)/)[1];
                var api_url = 'https://www.ixigua.com/api/searchv2/complex/' + kw + '/';
                var offset = 0, p = 0;
                while (true) {
                    if (p > 199)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + offset + '?search_id=' + sid, headers);
                    if (data.indexOf('data\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.data.length - 1; i++) {
                        var item = jo.data.data[i].data;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.group_id + '\",duration:' + item.video_time + ',date:' + item.publish_time + ',play:' + item.video_watch_count + ';\r\n';
                    }
                    if (!jo.data.has_more)
                        break;

                    offset += jo.data.count;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="huya" delegate="true">
        <url><![CDATA[huya\.com/u/(?<id>\d+)/(?:live)?video\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li[^>]*>\s+<a[^>]+href='(?<url>[^']+).*?title='(?<title>[^']+).*?cover-duration'>(?<duration>[^<]+).*?-play'></i>(?<play>[^<]+).*?-right'>(?<date>[^<]+).*?</li>]]></content>
        <baseUrl><![CDATA[https://v.huya.com]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://v.huya.com/u/1466346678/video.html
                //不取全，让它重新解析，以避免下载过程有的会卡住问题
                var title = '', html = '';
                var url = window.external.url;
                //若有?，则取其当前页
                if (url.indexOf('p=') == -1) {
                    var p = parseInt(window.external.sp) || 1;
                    var pmax = (window.external.sp != undefined) ? 49 : 99;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var api_url = (url.indexOf('?') != -1) ? url + '&p=' + p : url + '?p=' + p;
                        var data = window.external.getHtmlCode(api_url);
                        if (data.indexOf('content-list') == -1) {
                            hasMore = false;
                            break;
                        }

                        if (!title)
                            title = data.match(/detail-nick'><span>([^<]+)/)[1];
                        html += data.substring(data.indexOf('content-list'), data.indexOf('user-paginator')) + '\r\n';
                        p++;
                        pidx++;
                    }
                    html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                }
                else {
                    var data = window.external.getHtmlCode(url);
                    var p = url.match(/p=([^&]+)/)[1];
                    title = data.match(/detail-nick'><span>([^<]+)/)[1] + ' p' + p;
                    html += data.substring(data.indexOf('content-list'), data.indexOf('user-paginator'));
                }
                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="huya">
        <url><![CDATA[huya\.com/(?:profile|channel)/index/(?<id>[^?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li\s+class="video-card-wrap.*?bottom-right">(?<duration>[^<]+).*?href="(?<url>[^"]+).*?<h3>(?<title>[^<]+).*?shijian"></i>(?<date>[^<]+)]]></content>
        <baseUrl><![CDATA[https://v-material.huya.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //profile有播放量而channel没有，因此不取其
                //http://v-material.huya.com/profile/index/1199586014030
                //http://v-material.huya.com/profile/index/1199564600907?page=2&start_time=1646017627&end_time=1653707227&o=default
                //http://v-material.huya.com/channel/index/ecy?page=2&start_time=1651125575&end_time=1653717575&o=default
                var title = (document.getElementsByTagName('h2').length != 0) ? document.getElementsByTagName('h2')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                //若有?，则取其当前页
                if (window.location.href.indexOf('page=') == -1) {
                    var baseUrl = window.location.href;
                    if (baseUrl.indexOf('?') != -1)
                        baseUrl = baseUrl.substring(0, baseUrl.indexOf('?'));
                    var ul = document.getElementsByClassName('page-num')[0];
                    var p = parseInt(window.external.sp) || 1;
                    while (true) {
                        var data = window.external.getHtmlCode(baseUrl + '?page=' + p);
                        if (data.indexOf('"video-card-wrap"') == -1)
                            break;
                        data = data.substring(data.indexOf('<li class=\"video-card-wrap\">'), data.indexOf('class=\"page-num\"'));
                        html += data;
                        p++;
                    }
                }
                else
                    html += document.body.innerHTML;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delegate="true">
        <url><![CDATA[douyin\.com/(?:share/)?user/(?<id>[^/\?]+)(?:$|\?(?!.*?modal_id))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <exjs><![CDATA[https://sf1-ttcdn-tos.pstatp.com/obj/rc-web-sdk/acrawler.js|http://www.cr-soft.net/js/xb.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //https://v.douyin.com/JukWGyh/
                //https://v.douyin.com/trubt9/->http://www.iesdouyin.com/share/user/107741282728?u_code=b349eabd21i&sec_uid=MS4wLjABAAAAWsASXrMVo60S4HCT0YlmMjyUKQWmHvRJwuqnSeMqLXQ...
                //https://www.douyin.com/user/MS4wLjABAAAAPCnTQLqza4Xqu-uO7KZHcKuILkO7RRz2oapyOC04AQ0 李子柒
                //https://www.douyin.com/user/MS4wLjABAAAAX1DO2ikDP8pwVSbwmbpmm5bxuMcQrctDOBBnLURFVS8?previous_page=app_code_link 53个->32个
                //https://v.douyin.com/dS1VEsh/, 800+
                //https://www.douyin.com/user/MS4wLjABAAAAo8_-HsqUKIymitIzQYwfloCKQFwh5fvahnZMJtvexas?modal_id=7096679722125413645 此类，以单条处理
                //https://www.douyin.com/user/MS4wLjABAAAAq-KlnixjVl33lOqDTvRPL64pIA23nRtXd4iNUmHMkojF13qtT9OlIqhgODgqqs_D?is_search=0&list_name=follow&modal_id=7263768201366965559&nt=11 单条
                //https://v.douyin.com/keS7uKR/->https://www.iesdouyin.com/share/user/MS4wLjABAAAAkV4jBu-szDnatVymC3rMT6d8K0jdNXgv3qcRQMicKIdPRevLRQnS0_-hv2b3a7mo?...
                var html = '', title = '';
                var url = window.external.url;
                //重定位需cookie，直接替换，为避免iesdouyin之cookie
                if (url.indexOf('iesdouyin') != -1 && url.indexOf('?') != -1) {
                    url = url.substring(0, url.indexOf('?'));
                    url = url.replace('iesdouyin', 'douyin').replace('share/', '');
                }
                //xb...
                var ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/119.0.0.0 Safari/537.36'
                navigator.__defineGetter__('userAgent', function() {
                    return ua;
                });
                var cookie = window.external.getCookieEx(url, 'sid_tt', 2500) || window.external.getCookieEx(url, 'ttwid', 2500);
                var headers = 'User-Agent: ' + ua + '\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                var sec_uid = url.match(/user\/([^\?]+)/)[1];
                var api_url = 'https://www.douyin.com/aweme/v1/web/aweme/post/?';
                var args = 'device_platform=webapp&aid=6383&channel=channel_pc_web&sec_user_id=' + sec_uid +'&publish_video_strategy_type=2&count=35&max_cursor=';
                var max_cursor = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 29 : 999;
                var pidx = 0;
                var hasMore = true;
                //var ignoreNote = (typeof(window.external.gcv) != 'undefined') ? window.external.gcv('Download', 'IgnoreNote', 'true').toLowerCase() == 'true' : false;  以后用
                while (true) {
                    if (pidx > pmax)
                        break;
                    var ds = Math.round(Math.random() * 1000);
                    var data = window.external.getHtmlCodeEx(api_url + args + max_cursor, headers, ds);
                    //hard...
                    if (!data && window.xb) {
                        var xbs = '&X-Bogus=' + window.xb(args + max_cursor);
                        data = window.external.getHtmlCodeEx(api_url + args + max_cursor + xbs, headers, ds);
                        if (data.indexOf('aweme_list') == -1) {
                            for (var i = 0; i <= 2; i++) {
                                ds = Math.round(Math.random() * 2000);
                                data = window.external.getHtmlCodeEx(api_url + args + max_cursor + xbs, headers, ds);
                                if (data)
                                    break;
                            }
                        }
                    }
                    if (data.indexOf('aweme_list') == -1) {
                        hasMore = false;
                        break;
                    }
                    var jo = JSON.parse(data);
                    if (jo.aweme_list.length == 0 && !jo.has_more) {
                        hasMore = false;
                        break;
                    }

                    if (!title && jo.aweme_list.length != 0)
                        title = jo.aweme_list[0].author.nickname;
                    //一次20多个
                    for (var i = 0; i <= jo.aweme_list.length - 1; i++) {
                        var aweme = jo.aweme_list[i];
                        //有些，没有video，或非视频...aweme_type 2: image
                        if (!aweme.video)
                            continue;
                        var mid = aweme.music ? aweme.music.id : 0;
                        var video_url = 'https://www.douyin.com/video/' + aweme.aweme_id;
                        //不求其跳转后地址了，太慢而导致解析失败，希望加限速好些
                        var vt = aweme.desc || aweme.aweme_id;
                        vt = vt.replace('版本过低，升级后可展示全部信息', '').replace(/\"/g, '\'');
                        var duration = aweme.video.duration / 1000;
                        var create_time = aweme.create_time;
                        if (!create_time) {
                            try {
                                create_time = aweme.video.origin_cover.uri.match(/_(\d+)/)[1];
                            }
                            catch (ex) {
                            }
                        }
                        var like = aweme.statistics ? aweme.statistics.digg_count : 0;
                        html += 'id=' + aweme.aweme_id + ',v_title:\"' + vt + '\",duration:' + duration + ',video_url:' + video_url + ',date:' + create_time + ',like:' + like + ';\r\n';
                    }
                    if (!jo.has_more) {
                        hasMore = false;
                        break;
                    }
                    max_cursor = jo.max_cursor || max_cursor;
                    pidx++;
                }

                if (!title)
                    title = document.title;
                html = 'startPage:' + max_cursor + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html + '$error=点击右下角[打开URL]打开链接，登录您douyin账号，刷新出来视频列表然后下拉视频列表，之后再解析试$';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delegate="true" delay="7500">
        <url><![CDATA[douyin\.com/search/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <ckSign><![CDATA[sid_tt]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <exjs><![CDATA[http://www.cr-soft.net/js/xb.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //https://www.douyin.com/search/%E5%92%8C%E7%94%B0%E7%8E%89?publish_time=0&sort_type=0&source=switch_tab&type=general
                //https://www.douyin.com/search/%E5%92%8C%E7%94%B0%E7%8E%89?publish_time=0&sort_type=0&source=switch_tab&type=video
                //https://www.douyin.com/aweme/v1/web/search/item/? ...X-Bogus等参数难解，只走general此支吧
                var url = window.external.url;
                var kw = url.match(/search\/([^?]+)/)[1];
                var html = 'title:\"' + decodeURIComponent(kw) + '\"$';
                var num = 0;
                var cursor = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 19 : 999;
                var pidx = 0;
                var hasMore = true;
                //有些机器，取不到xb
                if (window.xb) {
                    var cookie = window.external.getCookieEx(url, 'sid_tt', 2500) || window.external.getCookieEx(url, 'ttwid', 2500) || window.external.getCookie(url);
                    var headers = 'User-Agent: ' + navigator.userAgent + '\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                    var code = window.external.getHtmlCodeEx(url, headers);
                    if (code.indexOf('logid%22%3A%22') != -1) {
                        var sid = code.match(/logid%22%3A%22([^%]+)/)[1];
                        while (true) {
                            if (pidx > pmax)
                                break;
                            var args = 'device_platform=webapp&aid=6383&channel=channel_pc_web&search_channel=aweme_video_web&keyword=' + kw + '&offset=' + cursor + '&count=10&search_id=' + sid + '&pc_client_type=1&version_code=170400&version_name=17.4.0&cookie_enabled=true&screen_width=1920&screen_height=1080&browser_language=zh-CN&browser_platform=Win32&browser_name=Chrome&browser_version=109.0.0.0';
                            var api_url = 'https://www.douyin.com/aweme/v1/web/search/item/?' + args + '&X-Bogus=' + window.xb(args);
                            var ds = Math.round(Math.random() * 1500);
                            var data = window.external.getHtmlCodeEx(api_url, headers, ds);
                            //ratelimit triggered
                            if (!data) {
                                delay(4500);
                                data = window.external.getHtmlCodeEx(api_url, headers, ds);
                            }
                            if (data.indexOf('data\":[{') == -1) {
                                hasMore = false;
                                break;
                            }

                            var jo = JSON.parse(data);
                            for (var i = 0; i <= jo.data.length - 1; i++) {
                                var aweme = jo.data[i].aweme_info;
                                html += getAwemeHtml(aweme);
                                num++;
                            }
                            if (!jo.has_more) {
                                hasMore = false;
                                break;
                            }

                            cursor = jo.cursor;
                            pidx++;
                        }
                    }
                }
                if (num == 0) {
                    var cookie = window.external.getCookieEx(url, 'sid_tt', 2500) || window.external.getCookieEx(url, 'ttwid', 2500) || window.external.getCookie(url) || document.cookie;
                    var headers = 'Referer: ' + url + '\r\nCookie: ' + cookie;
                    var api_url = 'https://www.douyin.com/aweme/v1/web/general/search/single/?device_platform=webapp&aid=6383&search_channel=aweme_general&keyword=' + kw + '&count=15&offset=';
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var ds = Math.round(Math.random() * 2000);
                        var data = window.external.getHtmlCodeEx(api_url + cursor, headers, ds);
                        if (data.indexOf('data\":[{') == -1) {
                            hasMore = false;
                            break;
                        }

                        var jo = JSON.parse(data);
                        //一次20多个
                        for (var i = 0; i <= jo.data.length - 1; i++) {
                            var aweme = jo.data[i].aweme_info;
                            if (aweme)
                                html += getAwemeHtml(aweme);
                            else if (jo.data[i].aweme_mix_info) {
                                for (var j = 0; j <= jo.data[i].aweme_mix_info.mix_items.length - 1; j++) {
                                    aweme = jo.data[i].aweme_mix_info.mix_items[j];
                                    if (aweme)
                                        html += getAwemeHtml(aweme);
                                }
                            }
                        }
                        if (!jo.has_more) {
                            hasMore = false;
                            break;
                        }

                        cursor = jo.cursor;
                        pidx++;
                    }
                }
                html = 'startPage:' + cursor + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);

                //func...
                function getAwemeHtml(aweme) {
                    if (!aweme.video)
                        return '';
                    var video_url = 'https://www.douyin.com/video/' + aweme.aweme_id;
                    //不求其跳转后地址了，太慢而导致解析失败，希望加限速好些
                    var vt = aweme.desc || aweme.aweme_id;
                    vt = vt.replace('版本过低，升级后可展示全部信息', '').replace(/\"/g, '\'');
                    var duration = aweme.video.duration / 1000;
                    var create_time = 0;
                    try {
                        create_time = aweme.video.origin_cover.uri.match(/_(\d+)/)[1];}
                    catch (ex) {
                    }
                    var like = aweme.statistics ? aweme.statistics.digg_count : 0;
                    return 'id=' + aweme.aweme_id + ',v_title:\"' + vt + '\",duration:' + duration + ',video_url:' + video_url + ',date:' + create_time + ',like:' + like + ';\r\n';
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delegate="true">
        <url><![CDATA[live\.douyin\.com/fifaworldcup/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //世界杯
                //https://live.douyin.com/fifaworldcup/7078589838949236766
                var mid = window.external.url.match(/fifaworldcup\/([^?]+)/)[1];
                var api_url = 'https://webcast-pc.amemv.com/webcast/sports/match/list/?aid=6383&device_platform=web&match_id=' + mid;
                var data = window.external.getHtmlCode(api_url, window.external.url);
                var jo = JSON.parse(data);
                var room_id = jo.data[0].room_id;
                var title = jo.data[0].left_team.team_base_info.team_name + 'vs' + jo.data[0].right_team.team_base_info.team_name;
                var html = 'title:\"' + title + '\"$';
                api_url = 'https://live.douyin.com/webcast/show/episode/replay_list/?aid=6383&device_platform=web&room_id=' + room_id;
                data = window.external.getHtmlCode(api_url, window.external.url);
                jo = JSON.parse(data);
                for (var i = 0; i <= jo.data.all_replay.length - 1; i++) {
                    var replay = jo.data.all_replay[i];
                    for (var j = 0; j <= replay.info_list.length - 1; j++) {
                        var aweme = replay.info_list[j];
                        var video_url = 'https://live.douyin.com/fifaworldcup/?rid=' + room_id + '&eid=' + aweme.episode_id_str;
                        var duration = aweme.video_info.duration;
                        var date = aweme.episode_basic_info.match_data.started_time;
                        html += 'v_title:\"' + aweme.title.replace(/\"/g, '\'') + '\",duration:' + duration + ',video_url:' + video_url + ',date:' + date + ';\r\n';
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delay="4500">
        <url><![CDATA[douyin\.com/hashtag/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <ckSign><![CDATA[ttwid]]></ckSign>
        <exjs><![CDATA[http://www.cr-soft.net/js/xb.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //https://www.douyin.com/hashtag/1601585360684046
                var url = window.external.url;
                var cookie = window.external.getCookieEx(url, 's_v_web_id', 2500, true);
                if (cookie && cookie.indexOf('ttwid') == -1)
                    cookie = cookie.match(/s_v_web_id=[^;]+/)[0];
                var c2 = window.external.getCookieEx(url, 'sid_tt', 2500) || window.external.getCookieEx(url, 'ttwid', 2500);
                if (c2.indexOf('ttwid') != -1)
                    c2 = c2.match(/ttwid=[^;]+/)[0];
                cookie += '; ' + c2;
                var headers = 'Accept: application/json, text/plain, */*\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                var cid = url.match(/tag\/([^\/?]+)/)[1];
                var p = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 29 : 199;
                var pidx = 0;
                var hasMore = true;
                var title = '', html = '';
                while (true) {
                    if (pidx > pmax)
                        break;
                    var args = 'device_platform=webapp&aid=6383&channel=channel_pc_web&ch_id=' + cid + '&count=12&cursor=' + p;
                    var api_url = 'https://www.douyin.com/aweme/v1/web/challenge/aweme/?' + args + '&X-Bogus=' + window.xb(args);
                    var data = window.external.getHtmlCodeEx(api_url, headers);
                    if (data.indexOf('aweme_list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    jo = JSON.parse(data);
                    for (var i = 0; i <= jo.aweme_list.length - 1; i++) {
                        var aweme = jo.aweme_list[i];
                        if (!title)
                            title = aweme.text_extra[0].hashtag_name;
                        if (!aweme.video)
                            continue;
                        //不求其跳转后地址了，太慢而导致解析失败，希望加限速好些
                        var video_url = 'https://www.douyin.com/video/' + aweme.aweme_id;
                        var vt = aweme.desc || aweme.aweme_id;
                        vt = vt.replace('版本过低，升级后可展示全部信息', '').replace(/\"/g, '\'');
                        var duration = aweme.video.duration / 1000;
                        var like = aweme.statistics ? aweme.statistics.digg_count : 0;
                        html += 'id=' + aweme.aweme_id + ',v_title:\"' + vt + '\",duration:' + duration + ',video_url:' + video_url + ',date:' + aweme.create_time + ',like:' + like + ';\r\n';
                    }

                    p = jo.cursor;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delegate="true">
        <url><![CDATA[douyin\.com/(?:share/)?music/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <headers><![CDATA[User-Agent: None]]></headers>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.iesdouyin.com/share/music/6763092917251754760... 2357条
                //https://www.douyin.com/music/6918933124193748999
                var mid = window.external.url.match(/music\/([^\/?]+)/)[1];
                var api_url = 'https://www.iesdouyin.com/web/api/v2/music/info/?music_id=' + mid;
                var data = window.external.getHtmlCode(api_url);
                var jo = JSON.parse(data);
                var title = jo.music_info.title;
                var html = 'title:\"' + title + '\"$';
                var args = 'device_platform=webapp&music_id=' + mid + '&count=12&aid=1128&cursor=';
                api_url = 'https://www.douyin.com/aweme/v1/web/music/aweme/?' + args;
                var cookie = window.external.getCookieEx(url, 'sid_tt', 2500) || window.external.getCookieEx(url, 'ttwid', 2500);
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                var p = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 29 : 99;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    data = window.external.getHtmlCodeEx(api_url + p * 12, headers);
                    if (data.indexOf('aweme_list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    jo = JSON.parse(data);
                    for (var i = 0; i <= jo.aweme_list.length - 1; i++) {
                        var aweme = jo.aweme_list[i];
                        if (!aweme.video)
                            continue;
                        var video_url = 'https://www.douyin.com/video/' + aweme.aweme_id;
                        var vt = aweme.desc || aweme.aweme_id;
                        vt = vt.replace('版本过低，升级后可展示全部信息', '').replace(/\"/g, '\'');
                        var duration = aweme.video.duration / 1000;
                        var create_time = 0;
                        try {
                            create_time = aweme.video.origin_cover.uri.match(/_(\d+)/)[1];}
                        catch (ex) {
                        }
                        var like = aweme.statistics ? aweme.statistics.digg_count : 0;
                        html += 'id=' + aweme.aweme_id + ',v_title:\"' + vt + '\",duration:' + duration + ',video_url:' + video_url + ',date:' + create_time + ',like:' + like + ';\r\n';
                    }
                    if (!jo.has_more || pidx > pmax) {
                        if (!jo.has_more)
                            hasMore = false;
                        break;
                    }

                    p++;
                    pidx++;
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delegate="true">
        <url><![CDATA[douyin\.com/share/challenge/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^;]+)]]></content>
        <headers><![CDATA[User-Agent: None]]></headers>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://v.douyin.com/NYJF2Qj/ 3.2w条
                //https://www.iesdouyin.com/share/challenge/1570007554746370
                var ch_id = window.external.url.match(/challenge\/([^\/?]+)/)[1];
                var args = 'ch_id=' + ch_id + '&count=9&aid=1128&_signature=&cursor=';
                var api_url = 'https://aweme-hl.snssdk.com/web/api/v2/challenge/aweme/?' + args;
                var title = '', html = '';
                var p = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 29 : 99;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p * 9);
                    var jo = JSON.parse(data);
                    if (!title && jo.aweme_list.length != 0)
                        title = jo.aweme_list[0].cha_list[0].cha_name;
                    for (var i = 0; i <= jo.aweme_list.length - 1; i++) {
                        var aweme = jo.aweme_list[i];
                        if (!aweme.video)
                            continue;
                        var duration = aweme.video.duration / 1000;
                        //其无statistics节点
                        html += 'v_title:\"' + aweme.desc.replace(/\"/g, '\'') + '\",duration:' + duration + ',video_url:' + aweme.share_url + ',date:' + aweme.create_time + ';\r\n';
                    }
                    if (!jo.has_more || pidx > pmax) {
                        if (!jo.has_more)
                            hasMore = false;
                        break;
                    }

                    p++;
                    pidx++;
                }

                if (!title)
                    title = document.title;
                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="douyin" crpj="true" delegate="true">
        <url><![CDATA[douyin\.com/(?:share/mix/detail|collection)/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:(?<title>[^,]*),duration:(?<duration>[^,]*),video_url:(?<url>[^,]+),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <headers><![CDATA[User-Agent: None]]></headers>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://v.douyin.com/2eq9SVV/
                //https://www.iesdouyin.com/share/mix/detail/6896474620786903053
                //https://www.douyin.com/collection/7119806979619211272/1?previous_page=others_homepage
                var url = window.external.url;
                var mix_id = url.match(/(?:mix\/detail|collection)\/([^\/?]+)/)[1];
                var args = 'device_platform=webapp&aid=6383&channel=channel_pc_web&mix_id=' + mix_id + '&count=10&cursor=';
                //var api_url = 'https://www.iesdouyin.com/web/api/mix/item/list/?' + args;
                var api_url = 'https://www.douyin.com/aweme/v1/web/mix/aweme/?' + args;
                var cookie = window.external.getCookieEx(url, 'sid_tt', 2500) || window.external.getCookieEx(url, 'ttwid', 2500);
                var headers = 'Referer: https://www.douyin.com/video/' + mix_id + '\r\nCookie: ' + cookie;
                var title = '', html = '';
                var p = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 29 : 99;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    var data = window.external.getHtmlCodeEx(api_url + p * 10, headers);
                    var jo = JSON.parse(data);
                    if (!title && jo.aweme_list.length != 0)
                        title = jo.aweme_list[0].mix_info.mix_name;
                    for (var i = 0; i <= jo.aweme_list.length - 1; i++) {
                        var aweme = jo.aweme_list[i];
                        if (!aweme.video)
                            continue;
                        var mid = aweme.music ? aweme.music.id : 0;
                        var video_url = 'https://www.douyin.com/video/' + aweme.aweme_id + '/?region=CN&mid=' + mid;
                        var like = aweme.statistics ? aweme.statistics.digg_count : 0;
                        html += 'v_title:' + aweme.desc + ',duration:' + aweme.video.duration / 1000 + ',video_url:' + video_url + ',date:' + aweme.create_time + ',like:' + like + ';\r\n';
                    }
                    if (!jo.has_more || pidx > pmax) {
                        if (!jo.has_more)
                            hasMore = false;
                        break;
                    }

                    p++;
                    pidx++;
                }

                if (!title)
                    title = document.title;
                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="huoshan" redirect="true">
        <url><![CDATA[huoshan\.com/pages/user/.*?to_user_id=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",duration:(?<duration>[^,]*),video_url:(?<url>[^,]*),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://share.huoshan.com/hotsoon/s/dhVjVZj0Qn8/ ->
                //https://share.huoshan.com/pages/user/index.html?to_user_id=MS4wLjABAAAAKLiuOVOU-CpwjwVvwNK4VAwm92sVdAR30-yB4vjfAWs&timestamp=1638453174...
                var uid = window.external.url.match(/to_user_id=([^&]+)/)[1];
                var pl_url = 'https://www.douyin.com/user/' + uid;
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="tiktok" crpj="true" delegate="true">
        <url><![CDATA[tiktok\.com/(?:@(?<id>[^/\?]+)(?:\?|$)|.*?/use?r/(?<id>[^./]+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]*)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.tiktok.com/@michael.jackton.official?
                //https://vm.tiktok.com/Wo9Ag6/->https://m.tiktok.com/h5/share/usr/6693695300361536513.html?xxx
                //https://www.tiktok.com/@aonokaede?
                //https://t.tiktok.com/i18n/share/user/6541879409543413761/?
                //https://www.tiktok.com/@riria_0000?is_from_webapp=1&sender_device=pc 254
                //https://www.tiktok.com/@svet_lana569 风景
                var url = window.external.url;
                if (url.indexOf('/@') == -1)
                    url = window.external.getRedirectedUrl(window.external.url);
                //by id: 5k, username: 500，因此先用id... 有些用户机子卡死在这，因此弃用
                /*var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveObject('Microsoft.XMLHTTP');
                xhr.open('GET', window.external.url, false);
                xhr.setRequestHeader('Host', 'www.tiktok.com');
                xhr.send(null);
                html = xhr.responseText;
                var uid = html.match(/userId\":\"([^\"]+)/) ? html.match(/userId\":\"([^\"]+)/)[1] : '';*/
                var uid = '';
                var user = url.match(/@([^/?]+)/)[1].toLowerCase();
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nX-RapidAPI-Key: c2e490b973mshb03b724fa27a988p158587jsn02f71a1f5364\r\nX-RapidAPI-Host: tiktok-best-experience.p.rapidapi.com';
                var api_url = uid ? 'https://tiktok-best-experience.p.rapidapi.com/user/id/' + uid : 'https://tiktok-best-experience.p.rapidapi.com/user/' + user;
                api_url += '/feed?max_cursor=';
                var title = '', html = '';
                var max_cursor = parseInt(window.external.sp) || 0;
                var pmax = (window.external.sp != undefined) ? 9 : 99;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + max_cursor, headers, 2500);
                    //again
                    if (data.indexOf('aweme_list\":[{') == -1)
                        data = window.external.getHtmlCodeEx(api_url + max_cursor, headers, 2500);
                    //测试：aweme_list[]亦可has_more，不用此判断
                    if (data.indexOf('aweme_list\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.aweme_list.length - 1; i++) {
                        var aweme = jo.data.aweme_list[i];
                        if (!title)
                            title = aweme.author.unique_id || aweme.author.nickname;
                        //组件解析，可720x1280。接口是576x1024
                        var thumbnail = aweme.video.cover.url_list[aweme.video.cover.url_list.length - 1]
                        var video_url = aweme.share_info.share_url || aweme.video.play_addr.url_list[0];
                        var duration = aweme.video.duration / 1000;
                        var like = aweme.statistics ? aweme.statistics.digg_count : 0;
                        //避免水印，不置thumbnail，重解析
                        html += 'v_title:\"' + aweme.desc.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + duration + ',date:' + aweme.create_time + ',like:' + like + ';\r\n';
                    }
                    if (!jo.data.has_more || jo.data.aweme_list.length == 0) {
                        hasMore = false;
                        break;
                    }
                    max_cursor = jo.data.max_cursor || max_cursor;
                    pidx++;
                }

                html = 'startPage:' + max_cursor + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="kuaishou" crpj="true" delegate="true">
        <url><![CDATA[(?:live|kankan)\.kuaishou\.com/profile/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://live.kuaishou.com/profile/hlbe000000
                //https://kankan.kuaishou.com/profile/lyue0609088
                //不能简单做www对live替换，这个就不行：
                //https://live.kuaishou.com/profile/Barbieshy
                //https://live.kuaishou.com/live_api/profile/public?count=12&pcursor=&principalId=3x85qtps94ykxqy&hasMore=true 无标题，不用
                var url = window.external.url;
                var m = window.external.url.match(/profile\/([^/\?]+)/);
                var ksId = m[1];
                var p = window.external.sp || '';
                var pidx = 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var hasMore = true;
                var variables = '{\"principalId\":\"' + ksId + '\",\"count\": 1200,\"pcursor\": \"' + p + '\"}';
                var query = 'query privateFeedsQuery($principalId: String, $pcursor: String, $count: Int) {\
                    privateFeeds(principalId: $principalId, pcursor: $pcursor, count: $count) {\
                        pcursor\
                        list {\
                            id\
                            thumbnailUrl\
                            caption\
                            timestamp\
                            counts {\
                                displayView\
                                displayLike\
                            }\
                            user {\
                                name\
                            }\
                        }\
                    }\
                }';

                var title = '', html = '';
                var args = '{\"operationName\":\"privateFeedsQuery\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                //有的机子上直接GetPostResult不行，特置GetPostResultEx。取kuaishou.live.web_st，不用登录账号即可
                //kuaishou.live.web_st、kuaishou.live.webs
                var cookie = window.external.getCookieEx(url, 'userId', 2500) || window.external.getCookieEx(url, 'kuaishou.live', 2500) || window.external.getCookieEx(url, 'did', 2500);
                cookie = cookie.replace(/passToken=[^;]+;/, '').replace(/;\s*kpn=GAME_ZONE/g, '');
                var headers = 'content-type: application/json\r\nCookie: ' + cookie + '\r\nReferer: ' + url;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getPostResultEx('https://live.kuaishou.com/m_graphql', args, headers, 2500);
                    if (data.indexOf('list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    p = jo.data.privateFeeds.pcursor;
                    variables = '{\"principalId\":\"' + ksId + '\",\"count\": 1200,\"pcursor\": \"' + p + '\"}';
                    args = '{\"operationName\":\"privateFeedsQuery\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                    for (var i = 0; i <= jo.data.privateFeeds.list.length - 1; i++) {
                        var item = jo.data.privateFeeds.list[i];
                        if (!title)
                            title = item.user.name;
                        var video_url = 'https://live.kuaishou.com/u/' + ksId + '/' + item.id;
                        html += 'v_title:\"' + item.caption.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.thumbnailUrl + '\",date:' + item.timestamp + ',play:' + item.counts.displayView + ',like:' + item.counts.displayLike + ';\r\n';
                    }

                    pidx++;
                    if (p == 'no_more') {
                        hasMore = false;
                        break;
                    }
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html + '$error=或有滑块验证？若您有快手账号，请在默认浏览器中登录(或退出)，或点击右下角[打开URL]打开链接，刷新出来视频列表然后下拉视频列表，之后再解析试';
                if (cookie.indexOf('联想浏览器') != -1)
                    html += '。注意：切勿使用联想浏览器(SLBrowser)';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="kuaishou" crpj="true" delegate="true">
        <url><![CDATA[(?:www|video)\.kuaishou\.com/profile/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //不要thumbnail，自解析
                //https://video.kuaishou.com/profile/3xe39s6pzcxhs59
                //https://www.kuaishou.com/profile/3x649ku9mzjkyew
                //https://www.kuaishou.com/profile/3xf8aee4v8x348g 408
                //https://www.kuaishou.com/profile/3xifaa3zdb6sqqe 4172+
                var url = window.external.url;
                var wv = (url.indexOf('www') != -1) ? 'www' : 'video';
                var m = url.match(/profile\/([^/\?]+)/);
                var ksId = m[1];
                var p = window.external.sp || '';
                //须以空始
                if (p == '0')
                    p = '';
                var pidx = 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var hasMore = true;
                /*var variables = (p == 0) ? '{\"userId\":\"' + ksId+ '\"}' : '{\"userId\":\"' + ksId + '\",\"pcursor\": \"' + p + '\"}';
                var query = 'query visionProfilePhotoList($pcursor: String, $userId: String, $page: String) {\
                    visionProfilePhotoList(pcursor: $pcursor, userId: $userId, page: $page) {\
                        pcursor\
                        result llsid feeds {\
                            author {\
                                name\
                            }\
                            photo {\
                                id duration caption viewCount likeCount timestamp coverUrl photoUrl\
                            }\
                        }\
                    }\
                }';*/
                var variables = '{\"userId\":\"' + ksId + '\",\"pcursor\": \"' + p + '\",\"page\":\"profile\"}';
                var query = 'fragment photoContent on PhotoEntity { id duration caption viewCount likeCount timestamp coverUrl photoUrl }\
                    fragment feedContent on Feed {\
                        author { name }\
                        photo { ...photoContent }\
                    }\
                    query visionProfilePhotoList($pcursor: String, $userId: String, $page: String, $webPageArea: String) {\
                        visionProfilePhotoList(pcursor: $pcursor, userId: $userId, page: $page, webPageArea: $webPageArea) {\
                            feeds { ...feedContent }\
                            pcursor\
                        }\
                    }';

                var title = '', html = '';
                var host = url.match(/http.*?.com/)[0];
                var args ='{\"operationName\":\"visionProfilePhotoList\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                var cookie = window.external.getCookieEx(url, 'userId', 2500) || window.external.getCookieEx(url, 'kuaishou.server', 2500) || window.external.getCookieEx(url, 'did', 2500);
                cookie = cookie.replace(/passToken=[^;]+;/, '').replace(/;\s*kpn=GAME_ZONE/g, '');
                //did... live.kuaishou.com、.kuaishou.com
                var cookie2 = '';
                if (cookie.indexOf('; did=') != cookie.lastIndexOf('; did=')) {
                    cookie2 = cookie.substring(cookie.lastIndexOf('; did=') + 2);
                    cookie = cookie.substring(0, cookie.lastIndexOf('; did='));
                }
                var headers = 'Content-Type: application/json\r\nCookie: ' + cookie + '\r\nReferer: ' + url;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var dl = 2000 + Math.random() * 7500;
                    var data = window.external.getPostResultEx(host + '/graphql', args, headers, dl);
                    if (data.indexOf('Need captcha') != -1) {
                        hasMore = false;
                        break;
                    }
                    //有些视频删除了，虽然feeds=[]但pcursor存在，仍然继续解析，因此加其判断...有些机子上，值多则返回失败，did足矣
                    if (data.indexOf('feeds\":[{') == -1 && cookie2) {
                        var headers2 = 'content-type: application/json\r\nCookie: ' + cookie2 + '\r\nReferer: ' + url;
                        data = window.external.getPostResultEx(host + '/graphql', args, headers, dl);
                    }
                    if (data.indexOf('feeds\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    p = jo.data.visionProfilePhotoList.pcursor;
                    variables = '{\"userId\":\"' + ksId + '\",\"pcursor\": \"' + p + '\",\"page\":\"profile\"}';
                    args = '{\"operationName\":\"visionProfilePhotoList\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                    for (var i = 0; i <= jo.data.visionProfilePhotoList.feeds.length - 1; i++) {
                        if (!title)
                            title = jo.data.visionProfilePhotoList.feeds[i].author.name;
                        var item = jo.data.visionProfilePhotoList.feeds[i].photo;
                        //重解析，避免直接地址下载卡
                        var video_url = 'https://www.kuaishou.com/short-video/' + item.id + '?authorId=' + ksId;
                        var duration = item.duration / 1000;
                        html += 'v_title:\"' + item.caption.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + duration + ',date:' + item.timestamp + ',play:' + item.viewCount + ',like:' + item.likeCount + ';\r\n';
                    }

                    pidx++;
                    if (p == 'no_more') {
                        hasMore = false;
                        break;
                    }
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html + '$error=或有滑块验证？若您有快手账号，请在默认浏览器中或点击右下角[打开URL]打开链接，之后登录(或退出)，刷新出来视频列表然后下拉视频列表，之后再解析试$';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="kuaishou" redirect="true">
        <url><![CDATA[kuaishou\.com/.*?/(?:next-)?user/(?<id>[^/?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://v.kuaishou.com/HtIaPr->https://c.kuaishou.com/fw/user/Bik-kepler?fid=1291461049&cc=share_copylink&...
                var url = window.external.url;
                var cookie = window.external.getCookieEx(url, 'did', 2500) || document.cookie;
                var headers = 'content-type: application/json\r\nAccept: */*\r\nCookie: ' + cookie + '\r\nReferer: ' + window.external.url;
                var eid = window.external.url.match(/user\/([^?]+)/)[1];
                var args = '{\"eid\":\"' + eid + '\"}';
                //须xhr
                var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveObject('Microsoft.XMLHTTP');
                xhr.open('POST', 'https://c.kuaishou.com/rest/wd/user/profile?kpn=KUAISHOU&captchaToken=', false);
                xhr.setRequestHeader('content-type', 'application/json');
                xhr.setRequestHeader('Referer', url);
                xhr.setRequestHeader('Cookie', cookie);
                xhr.send(args);
                var data = xhr.responseText;
                var uid = (data.indexOf('\"eid\"') != -1) ? data.match(/\"eid\":\"([^\"]+)/)[1] : '';
                var html = 'cr_playlist_url=https://www.kuaishou.com/profile/' + uid + '$error=若您有快手账号，请在默认浏览器中或点击右下角[打开URL]打开链接，登录之后再解析试$';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="kuaishou" crpj="true" delegate="true">
        <url><![CDATA[kuaishou\.com/hashtag/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.kuaishou.com/hashtag/红叶?source=3
                var url = window.external.url;
                var tag = decodeURIComponent(url.match(/hashtag\/([^?]+)/)[1]);
                var p = window.external.sp || '';
                //须以空始
                if (p == '0')
                    p = '';
                var pidx = 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var hasMore = true;
                var variables = '{\"page\":\"hashtag\",\"pcursor\": \"' + p + '\",\"tagName\":\"' + tag + '\"}';
                var query = 'fragment photoContent on PhotoEntity { id duration caption viewCount likeCount timestamp coverUrl photoUrl }\
                    fragment feedContent on Feed {\
                        author { id name }\
                        photo { ...photoContent }\
                    }\
                    query hashTagDataQuery($tagName: String, $pcursor: String, $fromPhotoId: String, $page: String, $webPageArea: String) {\
                        hashTagData(tagName: $tagName, pcursor: $pcursor, fromPhotoId: $fromPhotoId, page: $page, webPageArea: $webPageArea) {\
                            feeds { ...feedContent }\
                            pcursor\
                        }\
                    }';

                var title = tag, html = '';
                var args ='{\"operationName\":\"hashTagDataQuery\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                var cookie = window.external.getCookieEx(url, 'userId', 2500) || window.external.getCookieEx(url, 'kuaishou.server', 2500) || window.external.getCookieEx(url, 'did', 2500);
                cookie = cookie.replace(/passToken=[^;]+;/, '').replace(/;\s*kpn=GAME_ZONE/g, '');
                //did... live.kuaishou.com、.kuaishou.com
                var cookie2 = '';
                if (cookie.indexOf('; did=') != cookie.lastIndexOf('; did=')) {
                    cookie2 = cookie.substring(cookie.lastIndexOf('; did=') + 2);
                    cookie = cookie.substring(0, cookie.lastIndexOf('; did='));
                }
                var headers = 'Content-Type: application/json\r\nCookie: ' + cookie + '\r\nReferer: ' + url;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var dl = Math.random() * 1500;
                    var data = window.external.getPostResultEx('https://www.kuaishou.com/graphql', args, headers, dl);
                    if (data.indexOf('Need captcha') != -1) {
                        hasMore = false;
                        break;
                    }
                    //有些视频删除了，虽然feeds=[]但pcursor存在，仍然继续解析，因此加其判断...有些机子上，值多则返回失败，did足矣
                    if (data.indexOf('feeds\":[{') == -1 && cookie2) {
                        var headers2 = 'content-type: application/json\r\nCookie: ' + cookie2 + '\r\nReferer: ' + url;
                        data = window.external.getPostResultEx('https://www.kuaishou.com/graphql', args, headers, dl);
                    }
                    if (data.indexOf('feeds\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    var jo = JSON.parse(data);
                    p = jo.data.hashTagData.pcursor;
                    variables = variables = '{\"page\":\"hashtag\",\"pcursor\": \"' + p + '\",\"tagName\":\"' + tag + '\"}';
                    args ='{\"operationName\":\"hashTagDataQuery\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                    for (var i = 0; i <= jo.data.hashTagData.feeds.length - 1; i++) {
                        var item = jo.data.hashTagData.feeds[i].photo;
                        //重解析，避免直接地址下载卡
                        var video_url = 'https://www.kuaishou.com/short-video/' + item.id + '?authorId=' + jo.data.hashTagData.feeds[i].author.id;
                        var duration = item.duration / 1000;
                        html += 'v_title:\"' + item.caption.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + duration + ',date:' + item.timestamp + ',play:' + item.viewCount + ',like:' + item.likeCount + ';\r\n';
                    }

                    pidx++;
                    if (p == 'no_more') {
                        hasMore = false;
                        break;
                    }
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html + '$error=或有滑块验证？若您有快手账号，请在默认浏览器中或点击右下角[打开URL]打开链接，之后登录(或退出)，刷新出来视频列表然后下拉视频列表，之后再解析试$';
                window.external.receive(html);
            }
            catch (ex) {
            alert(ex);
            }
        ]]></jsCode>
    </item>
    <item domain="kuaishou" crpj="true">
        <url><![CDATA[kuaishou\.com/search.*?searchKey=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>.+?)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^,]+),like:(?<like>[^;]+)]]></content>
        <ckSign><![CDATA[userId]]></ckSign>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://video.kuaishou.com/search?searchKey=和平精英
                //https://video.kuaishou.com/search/video?searchKey=%E7%8C%AB
                //https://www.kuaishou.com/search/video?searchKey=%E9%A3%8E%E6%89%87
                var sk = decodeURI(window.external.url.match(/searchKey=([^/]+)/)[1]);
                var p = window.external.sp || 0;
                var pidx = 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var hasMore = true;
                var variables = '{\"keyword\":\"' + sk + '\",\"pcursor\":\"' + p + '\",\"page\":\"search\"}';
                //即便下面字串，也与网页端一样取不全
                var query = 'fragment photoContent on PhotoEntity {\
                    id duration caption likeCount viewCount coverUrl photoUrl\
                }\
                fragment feedContent on Feed {\
                    author { name }\
                    photo { ...photoContent }\
                }\
                query visionSearchPhoto($keyword: String, $pcursor: String, $searchSessionId: String, $page: String, $webPageArea: String) {\
                    visionSearchPhoto(keyword: $keyword, pcursor: $pcursor, searchSessionId: $searchSessionId, page: $page, webPageArea: $webPageArea) {\
                        feeds { ...feedContent }\
                        searchSessionId pcursor\
                    }\
                }';

                var html = '';
                var args ='{\"operationName\":\"visionSearchPhoto\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                var cookie = window.external.getCookie(window.external.url) || document.cookie;
                var headers = 'content-type: application/json\r\nCookie: ' + cookie + '\r\nReferer: ' + window.external.url;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getPostResultEx('https://video.kuaishou.com/graphql', args, headers, 500);
                    //try 3 times
                    for (var i = 0; i <= 2; i++) {
                        if (data.indexOf('feeds') != -1)
                            break;
                        data = window.external.getPostResultEx('https://video.kuaishou.com/graphql', args, headers, 500);
                    }
                    var jo = JSON.parse(data);
                    p = jo.data.visionSearchPhoto.pcursor;
                    variables = '{\"keyword\":\"' + sk + '\",\"pcursor\":\"' + p + '\",\"page\":\"search\"}';
                    args = '{\"operationName\":\"visionSearchPhoto\",\"variables\":' + variables + ',\"query\":\"' + query + '\"}';
                    for (var i = 0; i <= jo.data.visionSearchPhoto.feeds.length - 1; i++) {
                        var item = jo.data.visionSearchPhoto.feeds[i].photo;
                        var duration = item.duration / 1000;
                        html += 'v_title:\"' + item.caption.replace(/\"/g, '\'') + '\",video_url:\"' + item.photoUrl + '\",thumbnail:\"' + item.coverUrl + '\",duration:' + duration + ',date:' + item.timestamp + ',play:' + item.viewCount + ',like:' + item.likeCount + ';\r\n';
                    }

                    pidx++;
                    if (p == 'no_more') {
                        hasMore = false;
                        break;
                    }
                }

                html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + sk + '\"$' + html + '$error=若您有快手账号，请在默认浏览器中打开此链接或点击右下角[打开URL]打开链接登录(或退出)，刷新出来视频列表后再试$';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="chenzhongtech" crpj="true">
        <url><![CDATA[chenzhongtech.com/.*?tagName=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",thumbnail:(?<thumbnail>[^,]+),duration:(?<duration>[^,]+),video_url:(?<url>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://ktagshanghai.m.chenzhongtech.com/fw/tag/text?tagName=热门搞笑段子
                var tagName = decodeURIComponent(window.external.url.match(/tagName=([^&]+)/)[1]);
                var html = 'title:\"' + tagName + '\"$';
                var p = '';
                while (true) {
                    if (p > 99)
                        break;
                    var args = '{\"tag\":\"' + tagName + '\",\"count\":20,\"pcursor\":\"' + p + '\"}';
                    var data = window.external.getPostResult('https://ktagshanghai.m.chenzhongtech.com/rest/kd/tag/feed/text', args);
                    data = data.replace(/\r/g, ' ').replace(/\n/g, ' ').replace(/\"\\\{/g, '{').replace(/\\\}\"/g, '}');
                    var jo = JSON.parse(data);
                    var feeds = jo.feeds;
                    for (var i = 0; i <= feeds.length - 1; i++) {
                        var feed = feeds[i];
                        if (feed.mainMvUrls.length == 0)
                            continue;
                        var video_url = feed.mainMvUrls[0].url;
                        html += 'v_title:\"' + feed.caption.replace(/\"/g, '\'') + '\",thumbnail:' + feed.coverUrls[0].url + ',duration:0,video_url:' + video_url + ',date:' + feed.timestamp + ';\r\n';
                    }
                    p = jo.pcursor;
                    if (p == 'no_more')
                        break;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="toutiao" crpj="true" delegate="true">
        <url><![CDATA[toutiao\.com/\w/user/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.ixigua.com/]]></baseUrl>
        <exjs><![CDATA[https://lf3-cdn-tos.bytescm.com/obj/rc-web-sdk/acrawler.js]]></exjs>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.toutiao.com/c/user/93183065551/#mid=1636637873400839->https://www.toutiao.com/c/user/token/MS4wLjABAAAAVUrFlxKrK2q8W5xMZ9SDcHC8WLm7Afe-2VQfwGMatvk/#mid=1636637873400839
                //https://www.toutiao.com/c/user/token/MS4wLjABAAAA7AlN89mWhN_fmEOGqRCU50C-xHcd8tJ0CkhEr2JvCka0uM24-CVpQz0lhC6RDHpi/?wid=1618540540034&tab=video
                //https://www.toutiao.com/c/user/token/MS4wLjABAAAArSp7I-RKfhv1g7CWHlt-_xRsujYRcfP_x2JZtCl8s6Y/?source=m_redirect 4969
                var title = '', html = '';
                var url = window.external.url;
                var cookie = window.external.getCookieEx(url, 's_v_web_id', 2500) || window.external.getCookieEx(url, 'ttwid', 2500);
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nCookie: ' + cookie + '\r\nReferer: ' + url;
                var token = url.match(/token\/([^\/]+)/)[1];
                var mt = window.external.sp || 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    //var api_url = 'https://www.toutiao.com/api/pc/feed/?category=pc_profile_video&visit_user_token=' + token + '&max_behot_time=' + mt;
                    //var data = window.external.getHtmlCodeEx(api_url, headers);
                    //var jo = JSON.parse(data);
                    //if (!jo.data) {
                        //https://www.toutiao.com/c/user/token/MS4wLjABAAAAPFY64L3e-hOhk1dGxQF9ilTi6xq4ejSYkMlCa614S2k/?source=m_redirect
                        //取全部数据吧
                        var api_url = 'https://www.toutiao.com/api/pc/list/user/feed?category=profile_all&token=' + token + '&max_behot_time=' + mt;
                        var o = {
                            url: api_url,
                        }
                        api_url += '&_signature=' + window.byted_acrawler.sign(o);
                        var data = window.external.getHtmlCodeEx(api_url, headers);
                        var jo = JSON.parse(data);
                        if (!jo.data) {
                            hasMore = false;
                            break;
                        }
                    //}

                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        if (!title)
                            title = item.source || item.user.info.name;
                        var duration = item.video ? item.video.duration : item.video_duration_str;
                        //非视频
                        if (!duration)
                            continue;
                        var play_count = item.detail_play_effective_count || item.read_count;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.group_id + '\",duration:' + duration + ',date:' + item.behot_time + ',play:' + play_count + ';\r\n';
                    }
                    if (!jo.has_more) {
                        hasMore = false;
                        break;
                    }

                    mt = jo.next.max_behot_time;
                    pidx++;
                }

                html = 'startPage:' + mt + ',hasMore:' + hasMore + ', + title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="toutiao" crpj="true" delegate="true">
        <url><![CDATA[toutiao\.com/search.*?&keyword=(?<id>[^&]+).*?&pd=video]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)text-medium">(?<duration>[^<]+).*?<a\s+href=.*?a(?<url>\d+)[^>]+>(?<title>.*?)</a>.*?ellipsis">(?<play>[^<]+)次观看.*?flex-shrink-0">(?<date>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.ixigua.com/]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://so.toutiao.com/search?dvpf=pc&source=input&keyword=%E5%85%B0%E9%99%B5%E7%8E%8B&pd=video&action_type=search_subtab_switch&page_num=0&from=video&cur_tab_title=video
                var url = window.external.url;
                var kw = url.match(/keyword=([^&]+)/)[1];
                var title = decodeURIComponent(kw), html = 'title:\"' + title + '\"$';
                var cookie = window.external.getCookieEx(url, 'ttwid', 2500);
                var headers = 'Cookie: ' + cookie + '\r\nReferer: ' + url;
                var api_url = url;
                if (api_url.indexOf('&page_num=') != -1)
                    api_url = api_url.replace(/&page_num=[^&]+/, '') + '&page_num=';
                var pn = window.external.sp || 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var pidx = 0;
                var hasMore = true;
                while (true) {
                    if (pidx > pmax)
                        break;
                    var data = window.external.getHtmlCodeEx(api_url + pn, headers);
                    //抱歉，未找到“兰陵王”结果
                    if (data.indexOf('抱歉，未找到') != -1) {
                        hasMore = false;
                        break;
                    }
                    html += data.substring(data.indexOf('<div class=\"cs-view cs-view-block cs-grid-cell'), data.indexOf('<script>PerfTag.t(\"listEnd')) + '\r\n';

                    pn++;
                    pidx++;
                }

                html = 'startPage:' + pn + ',hasMore:' + hasMore + '$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="360kuai" crpj="true">
        <url><![CDATA[360kuai.com/pc/zmt.*?uid=(?<id>[^&#]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",thumbnail:(?<thumbnail>[^,]+),duration:(?<duration>[^,]+),video_url:(?<url>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.360kuai.com/pc/zmt?id=3321241065&uid=121874957.3791306783059158500.1672046239042.6394#chosenArticle
                //https://www.360kuai.com/pc/zmt?id=3321241065&uid=121874957.3791306783059158500.1672046239042.6394#video
                //https://www.360kuai.com/pc/detail?url=http%3A%2F%2Fvideo.news.so.com%2Ff3b722a949490f9a4d819d56d78b39da&check=a8e1e192ce8788ba&uid=66415028%2E1570658265126653200%2E1676606199418%2E2344
                var title = (document.getElementsByTagName('h5').length != 0) ? document.getElementsByTagName('h5')[0].innerText : document.title;
                var url = window.external.url;
                var gzh = url.match(/id=([^&#]+)/)[1];
                var uid = url.match(/uid=([^&#]+)/)[1];
                var api_url = 'https://m.look.360.cn/api/getgzhVideo?u=' + uid + '&pagesize=12&gzh=' + gzh;
                if (url.indexOf('#video') != -1) {
                    title += ' - 视频';
                    api_url += '&s=y&pageno=';
                }
                else if (url.indexOf('#miniVideo') != -1) {
                    title += ' - 小视频';
                    api_url += '&s=v&pageno=';
                }
                else {
                    title += ' - 精选';
                    api_url = 'https://m.look.360.cn/api/getgzhSelected?u=' + uid + '&n=10&gzh=' + gzh + '&pg=';
                }
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p + '&_=' + Date.now(), url);
                    if (data.indexOf('data\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        var video_url = 'https://www.360kuai.com/' + item.gnid;
                        html += 'v_title:\"' + item.t.replace(/\"/g, '\'') + '\",thumbnail:' + item.i + ',duration:' + item.duration + ',video_url:' + video_url + ',date:' + item.p + ',play:' + item.play_num + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="meipai" crpj="true" delegate="true">
        <url><![CDATA[meipai\.com/user/(?<id>[^\?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li.*?datePublished">(?<date>[^<]+).*?<a.*?href="(?<url>[^"]+)".+?<meta[^>]+>(?<title>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.meipai.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.meipai.com/user/1015437931
                //https://www.meipai.com/user/32025133?p=2
                var url = window.external.url;
                var title = '', html = '', data = '';
                if (url.indexOf('p=') != -1) {
                    data = window.external.getHtmlCode(url);
                    title = data.match(/<h2[^>]+>([^<]+)/)[1].trim();
                    html = data.substring(data.indexOf('id=\"mediasList\"'), data.indexOf('</ul>'));
                }
                else {
                    if (url.indexOf('?') == -1)
                        url += '?';
                    url += 'p=';
                    var p = 1;
                    while (true) {
                        data = window.external.getHtmlCode(url + p);
                        if (!title)
                            title = data.match(/<h2[^>]+>([^<]+)/)[1];
                        html += '$' + data.substring(data.indexOf('id=\"mediasList\"'), data.indexOf('</ul>'));
                        if (data.indexOf('下一页') == -1)
                            break;
                        p++;
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="dedao" crpj="true">
        <url><![CDATA[dedao\.cn/course/detail\?id=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.dedao.cn/course/detail?id=1w2YlEkp7AMKr5ahDjXy4Zd8oLjg0a
                var title = '', html = '';
                var id = window.external.url.match(/id=([^&]+)/)[1];
                var headers = 'Content-Type: application/json\r\nReferer:' + window.external.url;
                var api_url = 'https://www.dedao.cn/pc/bauhinia/pc/class/free_article_list';
                var max_id = 0;
                while (true) {
                    var args = '{\"chapter_id\":\"\",\"count\":30,\"detail_id\":\"' + id + '\",\"max_id\":' + max_id + ',\"max_order_num\":0}';
                    var data = window.external.getPostResultEx(api_url, args, headers);
                    if (data.indexOf('article_list\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    var article_list = jo.c.article_list;
                    max_id = article_list[article_list.length - 1].origin_id;
                    for (var i = 0; i <= article_list.length - 1; i++) {
                        var item = article_list[i];
                        if (!title && item.audio)
                            title = item.audio.source_name;
                        var video_url = 'https://www.dedao.cn/course/article?id=' + item.enid;
                        var duration = item.audio ? item.audio.duration : 0;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + duration + ',date:' + item.publish_time + ',play:' + item.cur_learn_count + ';\r\n';
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="tvcbook" crpj="true">
        <url><![CDATA[tvcbook\.com/u/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <baseUrl><![CDATA[https://preview.tvcbook.com]]></baseUrl>
        <ckSign><![CDATA[sensorsdata2015jssdkcross]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://preview.tvcbook.com/u/Audi.html
                //https://preview.tvcbook.com/u/M5f02a27e92914.html
                var title = document.title.substring(0, document.title.indexOf(' - '));
                var html = 'title:\"' + title + '\"$';
                var api_url = window.location.href.match(/(https?.*)\.html/)[1] + '/works/ajax/';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('\"data\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= lo.data.data.length - 1; i++) {
                        var item = jo.data.data[i];
                        var video_url = '/video/' + item.id + '.html';
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:' + item.media.duration + ',date:' + item.pushed_at + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qlchat" crpj="true">
        <url><![CDATA[qlchat\.com/.*?channelId=(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <baseUrl><![CDATA[https://m.qlchat.com/topic/details-video?topicId=]]></baseUrl>
        <ckSign><![CDATA[userId]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://m.qlchat.com/wechat/page/channel-intro?channelId=2000004706222003
                //https://m.qlchat.com/wechat/page/channel-intro?channelId=2000012867552739&
                var url = window.external.url;
                var cid = url.match(/channelId=(\d+)/)[1];
                var cookie = window.external.getCookie(url) || document.cookie;
                var headers = 'Content-Type: application/json;charset=UTF-8\r\nCookie: ' + cookie;
                var args = '{\"channelId\":' + cid + '}';
                var api_url = 'https://m.qlchat.com/api/wechat/channel/initIntro';
                var data = external.getPostResultEx(api_url, args, headers);
                var title = (data.indexOf('channelName') != -1) ? data.match(/\"channelName\":\"([^\"]+)/)[1] : document.title;
                api_url = 'https://m.qlchat.com/api/wechat/channel/topic-list?channelId=' + cid + '&pageSize=20&pageNum=';
                headers = 'Cookie: ' + cookie;
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    data = window.external.getHtmlCodeEx(api_url + p, headers);
                    if (data.indexOf('\"topicList\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    //内容位置错误，遍历获取
                    for (var i = 0; i <= jo.data.topicList.length - 1; i++) {
                        var item = jo.data.topicList[i];
                        html += 'v_title:\"' + item.topic.replace(/\"/g, '\'') + '\",video_url:\"' + item.id + '\",duration:' + item.media.duration + ',date:' + item.createDate + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!--https://www.kugou.com/singer/5548.html https://www.kugou.com/yy/singer/home/7633.html-->
    <item domain="kugou">
        <url><![CDATA[kugou\.com/.*?singer/.*?(?<id>\d+)\.html?]]></url>
        <title><![CDATA[singername\s*=\s*'([^']+)]]></title>
        <content><![CDATA[(?is)<li><a\s*href="(?<url>[^"]+)"\s*hidefocus.*?class="text"\s*title="(?<title>[^"]+)]]></content>
    </item>
    <!--https://www.kugou.com/yy/album/single/967286.html https://www.kugou.com/yy/special/single/3947131.html-->
    <item domain="kugou">
        <url><![CDATA[kugou\.com/yy/\w+/single/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[专辑名：</span>([^<]+)]]></title>
        <content><![CDATA[(?is)<li><a\s+title="(?<title>[^"]+).*?href="(?<url>[^"]+)]]></content>
    </item>
    <item domain="kugou">
        <url><![CDATA[kugou\.com/ts/album/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li.*?href="(?<url>[^"]+)">(?<title>[^<]+).*?<span>(?<play>[^<]+).*?<span>(?<duration>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.kugou.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.kugou.com/ts/album/50694096/
                //https://www.kugou.com/ts/album/50694096/p3.html
                var href = window.location.href;
                var title = document.getElementsByTagName('h3').length != 0 ? document.getElementsByTagName('h3')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                //若有?，则取其当前页
                if (href.indexOf('.html') == -1) {
                    var p = 1;
                    if (href[href.length - 1] == '/')
                        href = href.substr(0, href.length - 1);
                    while (true) {
                        var url = href + '/p' + p + '.html';
                        var data = window.external.getHtmlCode(url);
                        if (data.indexOf('tsa_d3_d2_li') == -1)
                            break;

                        html += data.substring(data.indexOf('tsa_d3_d2_ul'), data.indexOf('id=\"page\"')) + '\r\n';
                        p++;
                    }
                }
                else {
                    var data = window.external.getHtmlCode(href);
                    html += data.substring(data.indexOf('tsa_d3_d2_ul'), data.indexOf('id=\"page\"'));
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="babybus">
        <url><![CDATA[babybus\.com/video/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[<li\s+class="active">([^<]+)</li>]]></title>
        <content><![CDATA[(?is)<div\s+class="col-lg-2.*?href="(?<url>[^"]+).*?data-original="(?<thumbnail>[^"]+).*?<p>(?<title>[^<]+)</p>]]></content>
    </item>
    <item domain="baobao88" crpj="true">
        <url><![CDATA[baobao88\.com/lianbo/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[<h1>([^<]+)</h1>]]></title>
        <content><![CDATA[(?is)<span\s+class="songname.*?href="(?<url>[^"]+).*?>(?<title>[^<]+)]]></content>
    </item>
    <item domain="baobao88" crpj="true">
        <url><![CDATA[baobao88\.com/(?:bbstory|bbmusic|youshen|)/[^/]+/(?:$|(?<id>\d+_\d+)\.html?)]]></url>
        <title><![CDATA[<h1>([^<]+)</h1>]]></title>
        <content><![CDATA[(?is)<ul><li>.*?href="(?<url>[^"]+).*?>(?<title>[^<]+)</a>]]></content>
        <baseUrl><![CDATA[http://www.baobao88.com]]></baseUrl>
    </item>
    <item domain="aigei" crpj="true">
        <url><![CDATA[aigei\.com/sound/.*/(?<id>.*?)$]]></url>
        <title><![CDATA[<title>([^<]+)]]></title>
        <content><![CDATA[(?is)title-name">(?<title>[^<]+).*?icon-time"></i>(?<duration>[^<]+).*?view-url"><a.*?href="(?<url>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.aigei.com]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.aigei.com/sound/class/environment
                //https://www.aigei.com/sound/class/environment/?page=3
                if (window.location.href.indexOf('page=') != -1)
                    document.body.innerHTML = document.getElementById('searchContainer').innerHTML;
                else {
                    var html = '';
                    var p = parseInt(window.external.sp) || 1;
                    var pidx = 0, pmax = 49;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var data = window.external.getHtmlCode(window.location.href + '/?page=' + p);
                        if (data.indexOf('抱歉！没有找到符合条件的相关素材') != -1) {
                            hasMore = false;
                            break;
                        }
                        html += data.substring(data.indexOf('<div id=\"searchContainer\" class'), data.indexOf('<div class=\"rescListPageNav pager-big\">')) + '\r\n';
                        if (p >= 200) {
                            hasMore = false;
                            break;
                        }

                        p++;
                        pidx++;
                    }
                    document.body.innerHTML = 'startPage:' + p + ',hasMore:' + hasMore + ',' + html;
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ximalaya" watchList="true" redirect="true">
        <url><![CDATA[ximalaya\.com/.*?/(?<id>\d+)/\d+]]></url>
        <title><![CDATA[albumTitle":"([^"]+)]]></title>
        <content><![CDATA[(?is)"title":"(?<title>[^"]+).*?playCount":(?<play>[^,]+).*?createDateFormat":"(?<date>[^"]+).*?url":"(?<url>[^"]+).*?duration":(?<duration>[^,]+)]]></content>
        <baseUrl><![CDATA[https://www.ximalaya.com]]></baseUrl>
        <headers><![CDATA[User-Agent: None]]></headers>
        <ckSign><![CDATA[1&_token]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.ximalaya.com/lishi/34094526/264034571
                var pl_url = window.location.href.match(/http.*\/\d+\//)[0];
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ximalaya" redirect="true">
        <url><![CDATA[ximalaya\.com/.*?/album/(?<id>\d+)]]></url>
        <title><![CDATA[albumTitle":"([^"]+)]]></title>
        <content><![CDATA[(?is)"title":"(?<title>[^"]+).*?playCount":(?<play>[^,]+).*?createDateFormat":"(?<date>[^"]+).*?url":"(?<url>[^"]+).*?duration":(?<duration>[^,]+)]]></content>
        <baseUrl><![CDATA[https://www.ximalaya.com]]></baseUrl>
        <headers><![CDATA[User-Agent: None]]></headers>
        <ckSign><![CDATA[1&_token]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://xima.tv/1_yfdGLl->https://www.ximalaya.com/growth/v3/album/55282978?ch=16&sc=000001&utm_source=pczfx
                var pl_url = 'https://www.ximalaya.com/' + window.location.href.match(/album\/\d+/)[0];
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ximalaya" crpj="true" delay="2500">
        <url><![CDATA[ximalaya\.com/album/(?<id>\d+)(?:/p|/?$)]]></url>
        <title><![CDATA[albumTitle":"([^"]+)]]></title>
        <content><![CDATA[(?is)"title":"(?<title>[^"]+).*?playCount":(?<play>[^,]+).*?createDateFormat":"(?<date>[^"]+).*?url":"(?<url>[^"]+).*?duration":(?<duration>[^,]+)]]></content>
        <baseUrl><![CDATA[https://www.ximalaya.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.ximalaya.com/youshengshu/4756811/
                //https://www.ximalaya.com/album/260744
                //https://www.ximalaya.com/album/298656/p2/
                //2021.12.02始皆以/album
                var m = document.body.innerHTML.match(/<h1[^>]+>([^<]+)<\/h1>/);
                var albumTitle = '\"albumTitle\":\"' + (m ? m[1] : document.title) + '\"';
                m = window.location.href.match(/\/(\d+)/);
                var albumId = window.location.href.match(/\/(\d+)/)[1];
                var p = 1;
                var html = albumTitle + '$';
                //http://www.ximalaya.com/revision/play/album?albumId=' + albumId + '&sort=0&pageSize=30&pageNum=0'
                while (true) {
                    var st = window.external.getHtmlCode('https://www.ximalaya.com/revision/time');
                    var xs = md5('himalaya-' + st) + '(' + u(100) + ')' + st + '(' + u(100) + ')' + Date.now();
                    var headers = 'xm-sign: ' + xs;
                    var url = 'https://www.ximalaya.com/revision/album/v1/getTracksList?albumId=' + albumId + '&pageNum=' + p;
                    var data = window.external.getHtmlCodeEx(url, headers);
                    var jo = JSON.parse(data);
                    if (jo.data.tracks.length == 0)
                        break;

                    html += data;
                    p++;
                }
                window.external.receive(html);

                function u(t) {
                    return ~~(Math.random() * t);
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ximalaya" redirect="true">
        <url><![CDATA[ximalaya\.com/(?:self)?share/album/(?<id>\d+)]]></url>
        <title><![CDATA[albumTitle":"([^"]+)]]></title>
        <content><![CDATA[(?is)"title":"(?<title>[^"]+).*?playCount":(?<play>[^,]+).*?createDateFormat":"(?<date>[^"]+).*?url":"(?<url>[^"]+).*?duration":(?<duration>[^,]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://xima.tv/1_97uydj?_sonic=0 ->
                //http://m.ximalaya.com/share/album/3475241?uid=
                //https://m.ximalaya.com/selfshare/album/3475241?shrpid=...
                var id = window.external.url.match(/album\/(\d+)/)[1];
                var pl_url = 'https://www.ximalaya.com/album/' + id;
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="lrts" crpj="true" delay="2500">
        <url><![CDATA[lrts\.\w+/book/(?<id>\d+)]]></url>
        <title><![CDATA[<h1[^>]+>([^<]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",media_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[sid]]></ckSign>
        <jsCode><![CDATA[
            try {
                //http://www.lrts.me/book/79696383
                var href = window.location.href;
                var id = href.match(/book\/(\d+)/)[1];
                var html = '';
                var p = 1;
                while (true) {
                    var api_url = 'http://m.lrts.me/ajax/getBookMenu?bookId=' + id + '&pageSize=5000&sortType=0&pageNum=' + p;
                    var data = window.external.getHtmlCode(api_url, href);
                    var jo = JSON.parse(data);
                    if (!jo.list || jo.list.length == 0)
                        break;

                    for (var i = 0; i <= jo.list.length - 1; i++) {
                        var item = jo.list[i];
                        var media_url = item.path || 'http://www.lrts.me/book/' + id + '/' + item.section;
                        html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",media_url:\"' + media_url + '\",duration:' + item.length + ',date:' + item.lastModify + ';\r\n';
                    }
                    p++;
                }
                html = document.getElementsByTagName('h1')[0].outerHTML + '$' + html;
                window.external.receive(html);

                function getMediaUrl(id, section) {
                    var base_url = 'http://m.lrts.me/ajax/getPlayPath?entityId=' + id + '&entityType=3&opType=1&type=0&sections=';
                    var data = window.external.getHtmlCode(base_url + '[' + section + ']');
                    if (!data)
                        return '';

                    var jo = JSON.parse(data);
                    if (jo.list && jo.list.length != 0)
                        return jo.list[0].path;
                    return '';
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qtfm" crpj="true" delay="2500">
        <url><![CDATA[qtfm\.cn/.*?channels/(?<id>\d+)/?(?:$|\?)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <ckSign><![CDATA[sid]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://m.qtfm.cn/share/vchannels/355104?platform=direct_link -> https://www.qtfm.cn/channels/355104/
                var cid = window.external.url.match(/channels\/(\d+)/)[1];
                var title = (document.getElementsByTagName('h1').length != 0) ?  document.getElementsByTagName('h1')[0].innerText : document.title;
                var html = '';
                var headers = 'Content-Type: application/json;charset=UTF-8\r\nReferer: https://www.qtfm.cn/';
                var api_url = 'https://webbff.qtfm.cn/www';
                var p = 1;
                while (true) {
                    var args = '{\"query\":\"{channelPage(cid:' + cid + ',page:' + p + ',order:\\\\\"asc\\\\\",qtId:\\\\\"null\\\\\"){\\n album\\n plist\\n }\\n }\"}';
                    var data = window.external.getPostResultEx(api_url, args, headers);
                    if (data.indexOf('\"plist\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.data.channelPage.album.name;
                    var list = jo.data.channelPage.plist;
                    for (var i = 0; i <= list.length - 1; i++) {
                        var item = list[i];
                        var media_url = 'https://www.qtfm.cn/channels/' + cid + '/programs/' + item.id + '/';
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + media_url + '\",thumbnail:\"' + item.cover + '\",duration:' + item.duration + ',date:' + item.update_time + ',play:' + item.playcount + ';\r\n';
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="6yueting" crpj="true">
        <url><![CDATA[6yueting\.com/list/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<a.*?href="(?<url>[^"]+)".*?target="player">(?<title>[^<]+).*?</a>]]></content>
        <baseUrl><![CDATA[http://www.6yueting.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //http://www.6yueting.com/list/bd9e08dd/p2
                var title = document.body.innerHTML.match(/<h2[^>]+>([^<]+)/)[1];
                var html = 'title:\"' + title + '\"$'
                var p = 1;
                var page_url = 'http://www.6yueting.com/list/' + window.external.url.match(/list\/([^\/]+)/)[1] + '/p';
                while (true) {
                    var data = window.external.getHtmlCode(page_url + p);
                    if (data.indexOf('target=\"player\"') == -1)
                        break;

                    html += data.substring(data.indexOf('list clearfix')) + '$';
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ting55" crpj="true">
        <url><![CDATA[ting55\.com/book/\d+$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[href="(?<url>[^"]+)">(?<title>[^<]+)</a>]]></content>
        <baseUrl><![CDATA[https://(?:\w+\.)?ting55.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://ting55.com/book/13747
                //https://m.ting55.com/book/13274
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$' + document.getElementsByClassName('plist')[0].innerHTML;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="ting89" crpj="true">
        <url><![CDATA[ting89\.com/books/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[<li>.*?href="(?<url>[^"]+)[^>]*>(?<title>[^<]+)</a>]]></content>
        <baseUrl><![CDATA[http://www.ting89.com]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //http://www.ting89.com/books/15921.html
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerHTML.substr(0, document.getElementsByTagName('h1')[0].innerHTML.indexOf('<')) : document.title;
                var html = 'title:\"' + title + '\"$' + document.getElementsByClassName('compress')[0].innerHTML;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qingting" crpj="true">
        <url><![CDATA[qingting\.fm/channels/(?<id>\d+)/?$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",duration:(?<duration>[^,]+),video_url:(?<url>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.qingting.fm]]></baseUrl>
        <ckSign><![CDATA[qingting_id]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.qingting.fm/channels/75352/
                var cid = window.location.href.match(/channels\/([^\/]+)/)[1];
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var args = '{\"query\":\"{channelPage(cid:' + cid + ',page:' + p + '){\
                        plist\
                    }}\"}';
                    var data = window.external.getPostResult('https://webbff.qingting.fm/www', args);
                    var jo = JSON.parse(data);
                    if (data.indexOf('plist\":[{') == -1)
                        break;

                    var plist = jo.data.channelPage.plist;
                    for (var i = 0; i <= plist.length - 1; i++) {
                        var item = plist[i];
                        var video_url = 'https://www.qingting.fm/channels/' + cid + '/programs/' + item.id;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",duration:' + item.duration + ',video_url:' + video_url + ',date:' + item.update_time + ',play:' + item.playcount + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="qingting" crpj="true">
        <url><![CDATA[qingting\.fm/podcasters/(?<id>[^/]+)/]]></url>
        <title><![CDATA[<h1[^>]+>([^<]+)</h1>]]></title>
        <content><![CDATA[(?is)<li\s+class="program-row-root.*?href="(?<url>[^"]+).*?title="(?<title>[^"]+).*?col2">(?<duration>[^<]+).*?col4">(?<date>[^<]*)]]></content>
        <baseUrl><![CDATA[https://www.qingting.fm]]></baseUrl>
        <ckSign><![CDATA[qingting_id]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://www.qingting.fm/podcasters/a819fb7e6be8834dfbfc42fcb03b55cb/
                var completed = false;
                function interval() {
                    if (document.getElementsByClassName('moresView').length != 0) {
                        document.getElementsByClassName('moresView')[0].firstElementChild.click();
                        setTimeout(interval, 1500);
                    }
                    else
                        completed = true;
                }
                setTimeout(interval, 1500)
                while (!completed)
                    window.external.doEvents();
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!--https://www.51miz.com/sound/ https://www.51miz.com/so-sound/86681.html https://www.51miz.com/so-sound/86681/p_2/ -->
    <item domain="51miz">
        <url><![CDATA[(?i)51miz\.com/.*?sound/?]]></url>
        <title><![CDATA["title":"([^"]+)"]]></title>
        <content><![CDATA[(?is)<div\s+class="SoundBox.*?/sound.*?>(?<title>[^<]+).*?src="(?<url>[^"]+).*?end-time">(?<duration>[^<]+)]]></content>
    </item>
    <item domain="gdtv">
        <url><![CDATA[gdtv\.cn/\w+/(?<id>\w+)/(?:[^/]*)$]]></url>
        <title><![CDATA[<div\s+class="cname">([^<]+)</div>]]></title>
        <content><![CDATA[(?is)<li>\s+<a\s+href="(?<url>[^"]+)[^>]+title="(?<title>[^"]+)"><img\s+alt.*?<div\s+class="cduration"\s+>(?<duration>[^<]+)</div>\s+</li>]]></content>
    </item>
    <item domain="gdtv" crpj="true">
        <url><![CDATA[gdtv\.cn/tvColumn/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<a\s+title="(?<title>[^"]+).*?href="(?<url>[^"]+).*?(?<duration>\d+:\d+)</span>]]></content>
        <baseUrl><![CDATA[https://www.gdtv.cn]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.gdtv.cn/tvColumn/683
                if (document.getElementsByClassName('ant-select-arrow').length != 0)
                    document.getElementsByClassName('ant-select-arrow')[0].click();

                var title = document.getElementsByTagName('h2').length != 0 ? document.getElementsByTagName('h2')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                //year
                for (var i = 0; i <= document.getElementsByTagName('li').length - 1; i++) {
                    document.getElementsByTagName('li')[i].click();
                    delay(2000);
                    //no more...
                    var vd = document.getElementById('videoList');
                    if (!vd || vd.innerText.indexOf('当前时间段暂无节目内容，换个时间试试看~') != -1)
                        break;

                    //month
                    var mdiv = undefined;
                    for (var j = 0; j <= document.getElementsByTagName('div').length - 1; j++) {
                        if (document.getElementsByTagName('div')[j].className && document.getElementsByTagName('div')[j].className.indexOf('index__month-group') != -1) {
                            mdiv = document.getElementsByTagName('div')[j];
                            break;
                        }
                    }
                    if (mdiv && mdiv.childElementCount != 0) {
                        for (var j = 0; j <= mdiv.childElementCount - 1; j++) {
                            mdiv.children[j].children[0].click();
                            delay(2000);
                            //https://www.gdtv.cn/tvColumn/660它居然动态加载...实测，没毛用
                            //window.scrollTo(0, document.body.scrollHeight);
                            //delay(1500);

                            vd = document.getElementById('videoList');
                            if (!vd || vd.innerText.indexOf('当前时间段暂无节目内容，换个时间试试看~') != -1)
                                break;
                            html += '$' + vd.innerHTML;
                        }
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xiaoe">
        <url><![CDATA[xiaoe-tech\.com/detail/(?<id>p_[^/&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://appbldadcdz3234.pc.xiaoe-tech.com/detail/p_5fabc29ce4b04db7c08df3ce/6?fromH5=true
                var url = window.external.url;
                var cookie = window.external.getCookieEx(url, 'XIAOEID', 2500) || window.external.getCookie(url);
                if (cookie) {
                    var app_id = url.match(/\/\/([^.]+)/)[1];
                    var pid = url.match(/detail\/([^/]+)/)[1];
                    var base_url = 'https://' + app_id + '.pc.xiaoe-tech.com';
                    var last_id = '';
                    var headers = 'App-Id: ' + app_id + '\r\nContent-Type: application/json;charset=UTF-8\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                    //title
                    var api_url = 'https://' + app_id + '.pc.xiaoe-tech.com/api/xe.goods.detail.get/2.0.0?app_id=' + app_id;
                    var args = '{\"goods_id\":\"' + pid + '\",\"goods_type\":6}';
                    var data = window.external.getPostResultEx(api_url, args, headers);
                    var jo = JSON.parse(data);
                    var html = '\"title:\"' + jo.data.title + '\"$';
                    api_url = 'https://' + app_id + '.pc.xiaoe-tech.com/api/xe.goods.relation.get/1.0.0?app_id=' + app_id;
                    while (true) {
                        args = '{\"page_size\":20,\"goods_id\":\"' + pid + '\",\"last_id\":\"' + last_id + '\",\"goods_type\":6,\"resource_type\":[1,2,3,4,20]}';
                        data = window.external.getPostResultEx(api_url, args, headers);
                        jo = JSON.parse(data);
                        if (jo.data.goods_list.length == 0)
                            break;

                        var gl = jo.data.goods_list;
                        for (var i = 0; i <= gl.length - 1; i++) {
                            var item = gl[i];
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + base_url + item.redirect_url + '\",duration:' + item.video_length + ',date:' + item.start_at + ';\r\n';
                        }
                        last_id = jo.data.last_id;
                    }
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xiaoe" redirect="true">
        <url><![CDATA[xiaoeknow\.com/.*?course.*?/(?<id>p_[^/&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[ko_token]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://appbldadcdz3234.h5.xiaoeknow.com/v1/course/column/p_5fabc29ce4b04db7c08df3ce->xiaoe-tech
                //https://appq9jtjc2t2160.h5.xiaoeknow.com/v1/course/column/p_60b442c7e4b0c726421a8c7f?type=3
                var pid = window.external.url.match(/(p_[^/&?]+)/)[1];
                var url = window.external.getRedirectedUrl(window.external.url);
                if (url.indexOf('xiaoe-tech') != -1) {
                    var app_id = window.external.url.match(/\/\/([^.]+)/)[1];
                    document.body.innerHTML = 'cr_playlist_url=https://' + app_id + '.pc.xiaoe-tech.com/detail/' + pid + '/6?fromH5=true$';
                    return;
                }
                //https://appsjekwolo5576.h5.xiaoeknow.com/v1/course/column/p_5e9126ed22986_mDOrC7kL?app_id=...
                var cookie = window.external.getCookieEx(url, 'anony_token', 2500, true);
                if (!cookie) {
                    cookie = window.external.getCookieEx(url, 'ko_token', 2500, true) || window.external.getCookie(url);
                    if (cookie)
                        cookie = cookie.substr(cookie.lastIndexOf('ko_token')).match(/ko_token=[^;]+/)[0];
                }
                var title = '', html = '';
                var args = 'bizData%5BisDesc%5D=1&bizData%5Bproduct_id%5D=' + pid + '&bizData%5Bpage_size%5D=';
                var headers = 'User-Agent: ' + navigator.userAgent + '\r\nContent-Type: application/x-www-form-urlencoded\r\nReferer: ' + url + '\r\nCookie: ' + cookie;
                var api_url = 'https://appsjekwolo5576.h5.xiaoeknow.com/column_more_data_v2/column_more_data';
                var p = 0;
                while (true) {
                    var data = window.external.getPostResultEx(api_url, args + p, headers);
                    if (data.indexOf('contentInfo\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    var items = jo.data.contentData.contentInfo;
                    for (var i = 0; i <= items.length - 1; i++) {
                        var item = items[i];
                        if (!title)
                            title = item.product_name;
                        var video_url = url.substring(0, url.indexOf('column')) + 'video/' + item.resource_id + '?pro_id=' + item.product_id;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",duration:0,date:' + item.start_at + ';\r\n';
                    }
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="51zxw" crpj="true">
        <url><![CDATA[(?i)51zxw\.net/list\.aspx\?cid=(?<id>\d+)(?:#.*?)?$]]></url>
        <title><![CDATA[<div\s+class="title">\s*([^<]+)\s*</div>]]></title>
        <content><![CDATA[(?is)<li>video_url:"(?<url>[^"]+)",\s+title:"(?<title>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                var ep = document.getElementById('pages');
                var pc = (ep.childElementCount != 0) ? ep.firstChild.childElementCount - 4 : 1;
                var html = '';
                var cid = window.external.url.match(/cid=(\d+)/)[1];
                for (var p = 1; p <= pc; p++) {
                    var url = 'https://www.51zxw.net/MainExtend/AjaxGetChapters.ashx';
                    var args = 'cid=' + cid + '&pageIndex=' + p;
                    var data = window.external.getPostResultEx(url, args, 'Content-Type: application/x-www-form-urlencoded; charset=gb2312');
                    var jo = JSON.parse(data);
                    if (jo.data) {
                        for (var i = 0; i <= jo.data.length - 1; i++) {
                            var item = jo.data[i];
                            if (!item.Highlight)
                                html += '<li>video_url:\"https://www.51zxw.net/Show.aspx?cid=' + item.Classid + '&id=' + item.Articleid + '\", title:\"' + item.Title + '\"</li>';
                        }
                    }
                }
                document.body.innerHTML += '$' + html;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="dxzy163" crpj="true">
        <url><![CDATA[dxzy163\.com/view/(?<id>[^.]+)\.html?]]></url>
        <title><![CDATA[<h4[^>]+><span>([^<]+)]]></title>
        <content><![CDATA[(?is)<li><a\s+title="(?<title>[^"]+)"\s+href="(?<url>[^"]+)]]></content>
        <baseUrl><![CDATA[http://www.dxzy163.com]]></baseUrl>
    </item>
    <item domain="educourse">
        <url><![CDATA[educourse\.ga/(?:[^/]+/){2,3}(?<id>\d+-2)\.html?]]></url>
        <title><![CDATA[<title>([^<]+)</title>]]></title>
        <content><![CDATA[(?is)<div\s+class="row video-row">.*?<a.*?href="(?<url>[^"]+).*?>(?<title>[^<]+).*?<span\s+class="video-duration">(?<duration>[^<]+)</span>]]></content>
    </item>
    <item domain="missevan">
        <url><![CDATA[missevan\.com/albuminfo/(?<id>[^/]+)]]></url>
        <title><![CDATA[channel_zone_name">([^<]+)</div>]]></title>
        <content><![CDATA[(?is)<div\s+class="magic-box fccard.*?<a[^>]+title="(?<title>[^"]+)"\s+href="(?<url>[^"]+).*?data-cover="(?<thumbnail>[^"]+).*?data-time="(?<duration>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.missevan.com]]></baseUrl>
    </item>
    <item domain="missevan" crpj="true">
        <url><![CDATA[missevan\.com/(?<id>[^.]+)/#/sound]]></url>
        <title><![CDATA[username:\s+"([^"]+)"]]></title>
        <content><![CDATA[(?is)<div\s+title="(?<title>[^"]+)"\s+class.*?href="(?<url>[^"]+).*?-time">(?<duration>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.missevan.com]]></baseUrl>
    </item>
    <item domain="icourses" referer="true">
        <url><![CDATA[icourses\.cn/web/sword/portal/videoDetail.*?courseId=(?<id>[^#]+)$]]></url>
        <title><![CDATA[_courseTitle='([^']+)']]></title>
        <content><![CDATA[(?is)duration":"(?<duration>[^"]+).*?fullLinkUrl":"(?<url>[^"]+).*?fullPreviewUrl":"(?<thumbnail>[^"]+).*?title":"(?<title>[^"]+)]]></content>
    </item>
    <item domain="icourses" watchList="true" referer="true">
        <url><![CDATA[icourses\.cn/web/sword/portal/videoDetail.*?courseId=(?<id>[^#]+).*?resId=]]></url>
        <title><![CDATA[username:\s+"([^"]+)"]]></title>
        <content><![CDATA[(?is)duration":"(?<duration>[^"]+).*?fullLinkUrl":"(?<url>[^"]+).*?fullPreviewUrl":"(?<thumbnail>[^"]+).*?title":"(?<title>[^"]+)]]></content>
    </item>
    <item domain="rthk" watchList="true" crpj="true">
        <url><![CDATA[(?:rthk\.\w+|59\.188\.18\.220)/podcast/item\.php\?pid=(?<id>\d+)&eid=\d+(?:&year=\d+)?]]></url>
        <title><![CDATA[prog-box-title">\s+<h2[^>]+>([^<]+)</h2>]]></title>
        <content><![CDATA[(?is)<episode>\s+.*?<episodeTitle>.*?A\[(?<title>.*?)\].*?<cover>.*?A\[(?<thumbnail>.*?)\].*?<duration>(?<duration>[^<]+)</duration>.*?<mediafile>.*?A\[(?<url>.*?)\].*?</episode>]]></content>
        <jsCode><![CDATA[
            try {
                var href = window.location.href;
                var pid = href.match(/pid=(\d+)/)[1];
                var m = href.match(/year=(\d+)/);
                var year = m ? m[1] : new Date().getFullYear();
                var p = 1;
                var html = '';
                while (true) {
                    var url = 'https://podcasts.rthk.hk/podcast/episodeList.php?pid=' + pid + '&year=' + year + '&page=' + p;
                    var data = window.external.getHtmlCode(url);
                    if (data.indexOf('<episode>') == -1)
                        break;

                    html += data;
                    p++;
                }
                document.body.innerHTML += html;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="rthk" crpj="true">
        <url><![CDATA[(?:rthk\.\w+|59\.188\.18\.220)/podcast/item\.php\?pid=(?<id>\d+)(?:&[^e])]]></url>
        <title><![CDATA[prog-box-title">\s+<h2[^>]+>([^<]+)</h2>]]></title>
        <content><![CDATA[(?is)<episode>\s+.*?<episodeTitle>.*?A\[(?<title>.*?)\].*?<cover>.*?A\[(?<thumbnail>.*?)\].*?<duration>(?<duration>[^<]+)</duration>.*?<mediafile>.*?A\[(?<url>.*?)\].*?</episode>]]></content>
        <jsCode><![CDATA[
            try {
                var href = window.location.href;
                var pid = href.match(/pid=(\d+)/)[1];
                var m = href.match(/year=(\d+)/);
                var year = m ? m[1] : new Date().getFullYear();
                var p = 1;
                var html = '';
                while (true) {
                    var url = 'https://podcasts.rthk.hk/podcast/episodeList.php?pid=' + pid + '&year=' + year + '&page=' + p;
                    var data = window.external.getHtmlCode(url);
                    if (data.indexOf('<episode>') == -1)
                        break;

                    html += data;
                    p++;
                }
                document.body.innerHTML += html;
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="rthk" watchList="true" crpj="true">
        <url><![CDATA[rthk\.\w+/podcast/topic_playlist\.php\?id=(?<id>\d+)&eid=\d+]]></url>
        <title><![CDATA[<h1>([^<]+)</h1>]]></title>
        <content><![CDATA[(?is)<div\s+class="epi-item.*?href="(?<url>[^"]+).*?data-src="(?<thumbnail>[^"]+).*?item-desc">(?<title>[^<]+)</div>]]></content>
        <baseUrl><![CDATA[https://podcasts.rthk.hk/podcast/]]></baseUrl>
    </item>
    <item domain="rthk" crpj="true">
        <url><![CDATA[rthk\.\w+/podcast/topic_playlist\.php\?id=(?<id>\d+)]]></url>
        <title><![CDATA[<h1>([^<]+)</h1>]]></title>
        <content><![CDATA[(?is)<div\s+class="epi-item.*?href="(?<url>[^"]+).*?data-src="(?<thumbnail>[^"]+).*?item-desc">(?<title>[^<]+)</div>]]></content>
        <baseUrl><![CDATA[https://podcasts.rthk.hk/podcast/]]></baseUrl>
    </item>
    <item domain="rthk" crpj="true">
        <url><![CDATA[rthk\.\w+/radio.*/(?<id>[^/]+)]]></url>
        <title><![CDATA[<h1>([^<]+)</h1>]]></title>
        <content><![CDATA[(?is)<div\s+class="latWrap.*?<p>(?<title>[^<]+)</p>.*?<video\s+src="(?<url>[^"]+).*?</div>]]></content>
        <jsCode><![CDATA[
            try {
                var idx = 0;
                if (document.getElementsByClassName('progCon').length != 0) {
                    var pc = document.getElementsByClassName('progCon')[0];
                    if (pc.innerText.trim() != '') {
                        document.getElementsByClassName('latBlock')[0].innerHTML = pc.innerHTML;
                        pc.innerHTML = '';
                        idx = 5;
                    }
                }

                var date = (idx == 0) ? document.body.innerHTML.match(/date=([^&]+).*?radio/)[1] : document.body.innerHTML.match(/date=([^&]+).*?radioEpi/)[1];
                document.getElementsByTagName('h1')[0].innerText += ' ' + date;
                var matchs = document.body.innerHTML.match(/https:\/\/.*?\.m3u8[^\"]*/g);
                var cmts = document.getElementsByClassName('latWrap radio');
                for (var i = 0; i <= cmts.length - 1; i++)
                    cmts[i].innerHTML += '<video src=\"' + matchs[i + idx] + '\" />';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xiaohongshu" delay="4500" delegate="http://cr-soft.net/jx.php">
        <url><![CDATA[xiaohongshu\.com/user/profile/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",like:(?<like>[^;]+)]]></content>
        <exjs><![CDATA[http://www.cr-soft.net/js/xhsign.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //about:blank，不能置cookie
                //https://www.xiaohongshu.com/user/profile/5b3b1cfe4eacab3c87463056
                //https://www.xiaohongshu.com/user/profile/5e00f91f0000000001009b12
                //https://www.xiaohongshu.com/user/profile/5b460f6e4eacab5f55b030b8?xhsshare=CopyLink&appuid=635cc0ab000000001802d649&apptime=1675224342
                var url = window.external.url;
                var uid = url.match(/profile\/([^\/?]+)/)[1];
                var args = '/api/sns/web/v1/user_posted?num=30&user_id=' + uid + '&cursor=';
                var cookie = window.external.getCookieEx(window.external.url, 'a1', 2500);
                var a1 = cookie ? cookie.match(/a1=([^;]+)/)[1] : '';
                var api_url = 'https://edith.xiaohongshu.com';
                var title = '', html = '';
                var cursor = '';
                while (true) {
                    var o = x_sign(args + cursor, a1);
                    var headers = 'X-t: ' + o['X-t'] + '\r\nX-s: ' + o['X-s'] + '\r\nReferer: https://www.xiaohongshu.com/\r\nCookie: ' + cookie;
                    var data = window.external.getHtmlCodeEx(api_url + args + cursor, headers, 1500);
                    //again...
                    if (data.indexOf('notes\":[{') == -1) {
                        for (var i = 0; i <= 2; i++ ) {
                            data = window.external.getHtmlCodeEx(api_url + args + cursor, headers, 2500);
                            if (data.indexOf('notes\":[{') != -1)
                                break;
                        }
                    }
                    if (data.indexOf('notes\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.notes.length - 1; i++) {
                        var item = jo.data.notes[i];
                        if (!title)
                            title = item.user.nick_name;
                        var video_url = 'https://www.xiaohongshu.com/explore/' + item.note_id;
                        var liked_count = item.interact_info ? item.interact_info.liked_count : 0;
                        html += 'id=' + item.note_id + ',v_title:\"' + item.display_title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.cover.url + '\",like:' + liked_count + ';\r\n';
                    }
                    if (!jo.data.has_more)
                        break;
                    cursor = jo.data.cursor;
                }

                html = 'title:\"' + title + '\"$' + html + '$error=没解出信息？或此用户没有视频笔记，或您没有登录。请点击右下角[打开URL]打开链接，登录你的xhs账号后再解析试';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!--<item domain="xiaohongshu" delay="4500" delegate="http://www.baidu.com">
        <url><![CDATA[xiaohongshu\.com/search_result.*?keyword=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)id=(?<id>[^,]+),v_title:"(?<title>[^"]*)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",like:(?<like>[^;]+)]]></content>
        <exjs><![CDATA[http://www.cr-soft.net/js/xhsign.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //about:blank，不能置cookie
                //https://www.xiaohongshu.com/search_result/?keyword=%25E8%258C%25AF%25E8%258B%2593&source=web_explore_feed
                var url = window.external.url;
                var kw = decodeURIComponent(decodeURIComponent(url.match(/keyword=([^&]+)/)[1]));
                var cookie = window.external.getCookieEx(window.external.url, 'a1', 2500);
                var a1 = cookie ? cookie.match(/a1=([^;]+)/)[1] : '';
                var api_url = 'https://edith.xiaohongshu.com/api/sns/web/v1/search/notes';
                var title = kw, html = '';
                var p = 1;
                //BigInt()?
                var s = '2bwir7nztjoonz3wo2grw';
                while (true) {
                    var xa = '/api/sns/web/v1/search/notes?keyword=' + kw + '&page=' + p + '&page_size=20&search_id=' + s + '&sort=general&note_type=0';
                    var o = x_sign(xa, a1);
                    var headers = 'X-t: ' + o['X-t'] + '\r\nX-s: ' + o['X-s'] + '\r\nContent-Type: application/json;charset=UTF-8\r\nReferer: https://www.xiaohongshu.com/\r\nCookie: ' + cookie;
                    var args = '{\"keyword\":\"' + kw + '\",\"page\":' + p + ',\"page_size\":20,\"search_id\":\"' + s + '\",\"sort\":\"general\",\"note_type\":0}';
                    var data = window.external.getPostResultEx(api_url, args, headers, 1500);
                    //again...
                    if (data.indexOf('items\":[{') == -1) {
                        for (var i = 0; i <= 2; i++ ) {
                            data = window.external.getPostResultEx(api_url, args, headers, 1500);
                            if (data.indexOf('items\":[{') != -1)
                                break;
                        }
                    }
                    if (data.indexOf('items\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.data.items.length - 1; i++) {
                        var item = jo.data.items[i];
                        var video_url = 'https://www.xiaohongshu.com/explore/' + item.id;
                        var note = item.note_card;
                        var liked_count = note.interact_info ? note.interact_info.liked_count : 0;
                        html += 'id=' + item.id + ',v_title:\"' + note.display_title + '\",video_url:\"' + video_url + '\",thumbnail:\"' + note.cover.url + '\",like:' + liked_count + ';\r\n';
                    }
                    if (!jo.data.has_more)
                        break;
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html + '$error=没解出信息？或此用户没有视频笔记，或您没有登录。请点击右下角[打开URL]打开链接，登录你的xhs账号后再解析试';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>-->
    <item domain="uc" crpj="true">
        <url><![CDATA[mp\.uc\.cn/.*?mid=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //http://a.mp.uc.cn/media.html?mid=af147b6e6b7b471cbbddffecb1b10a7c&client=ucweb&uc_param_str=frdnsnpfvecpntnwprdsssnikt&uc_biz_str=S:custom%7CC:iflow_ncmt
                //http://a.mp.uc.cn/media.html?mid=31962d21fb4043e8ae4657122da56b15
                //http://a.mp.uc.cn/media.html?mid=6a1146b4899247d793885e19a5345d2c&client=ucweb&uc_param_str=frdnsnpfvecpntnwprdsssnikt&uc_biz_str=S:custom%7CC:iflow_ncmt
                //http://a.mp.uc.cn/media.html?mid=22346fab88174f7589c1b47bf4fcff4f&client=ucweb&uc_param_str=frdnsnpfvecpntnwprdsssnikt&uc_biz_str=S:custom%7CC:iflow_ncmt
                //http://a.mp.uc.cn/media.html?mid=48c59ce634f2404ca090999f126ac408&client=ucweb&uc_param_str=frdnsnpfvecpntnwprdsssnikt&uc_biz_str=S:custom%7CC:iflow_ncmt ->item.url
                //http://a.mp.uc.cn/media.html?mid=c9c0a359855d4928a7bb799d8bc22d7c&client=ucweb&uc_param_str=frdnsnpfvecpntnwprdsssnikt&uc_biz_str=S:custom%7CC:iflow_ncmt -> share
                var mid = window.location.href.match(/mid=([^&]+)/)[1];
                var ups = 'frdnpfvecpntgibiniprdswiutmt';
                var ut = 'AAKZrCDGNmK%2FSzZAG3vBuZiSR3VQo%2BviXPERFt7MBkHWXg%3D%3D';
                var t= Date.now().toString();
                //col_cont_src=wm-video解得更少
                var base_url = 'https://bigsubs-api.uc.cn/api/bigsubs/page/wm/msgs?sub_type=wm&col_cont_src=all&size=15&wm_id=' + mid + '&X_TIMESTAMP=' + t + '&X_TOKEN=' + w(t) + '&uc_param_str=' + ups + '&app=ucweb&b_version=0.4&ut=' + ut + '&max_pos=';
                var next_pos = (window.external.sp != '0') ? window.external.sp : '';
                var pidx = 0;
                //为其阻止计，分页置19，多则卡
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var hasMore = true;
                var html = '', title = '';
                while (true) {
                    if (pidx > pmax)
                        break;
                    api_url = base_url + next_pos;
                    data = window.external.getHtmlCode(api_url, window.location.href, 500);
                    //RISK CONTROL 风控... 空：list\":[]
                    if (data.indexOf('\"list\":[') == -1) {
                        var cookie = window.external.getCookieEx(window.location.href, 'ctoken') || document.cookie;
                        var headers = 'Referer: ' + window.location.href + '\r\nCookie: ' + cookie;
                        for (var i = 0; i <= 6; i++) {
                            data = window.external.getHtmlCodeEx(api_url, headers, i * 1500);
                            if (data.indexOf('\"list\":[') != -1)
                                break;
                        }
                    }
                    if (data.indexOf('\"list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    //有些用户电脑上失败，报[object error]错误
                    //var jo = JSON.parse(data);
                    var jo = eval('(' + data + ')');
                    if (!title)
                        title = jo.data.author.author_name;
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i].sku;
                        var duration = (item.content.videos.length != 0) ? item.content.videos[0].duration : 0;
                        //还是得item.url
                        video_url = item.url;
                        html += 'v_title:\"' + item.content.text.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.cover_url + '\",duration:' + duration + ',date:' + item.source_pub_time + ',like:' + item.like + ';\r\n';
                    }
                    next_pos = jo.metadata.next_pos;
                    pidx++;
                }

                html = 'startPage:' + next_pos + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);

                function w(e){return e=wtb(r(e,undefined)),bth(e)}
                function wtb(e){for(var t=[],n=0;n<32*e.length;n+=8)
                t.push(e[n>>>5]>>>24-n%32&255);return t}
                function bth(e){for(var t=[],n=0;n<e.length;n++)
                t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join('')}
                function r(e,t){function stb(e){for(var t=[],n=0;n<e.length;n++)
                t.push(255&e.charCodeAt(n));return t}
                function btw(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)
                t[r>>>5]|=e[n]<<24-r%32;return t}
                function endian(e){if(e.constructor==Number)
                return 16711935&rotl(e,8)|4278255360&rotl(e,24);for(var t=0;t<e.length;t++)
                e[t]=endian(e[t]);return e}
                function rotl(e,t){return e<<t|e>>>32-t}
                var _ff=function(e,t,n,r,i,o,a){return((a=e+(t&n|~t&r)+(i>>>0)+a)<<o|a>>>32-o)+t},_gg=function(e,t,n,r,i,o,a){return((a=e+(t&r|n&~r)+(i>>>0)+a)<<o|a>>>32-o)+t},_hh=function(e,t,n,r,i,o,a){return((a=e+(t^n^r)+(i>>>0)+a)<<o|a>>>32-o)+t},_ii=function(e,t,n,r,i,o,a){return((a=e+(n^(t|~r))+(i>>>0)+a)<<o|a>>>32-o)+t};e=stb(e);for(var n=btw(e),l=(e=8*e.length,1732584193),c=-271733879,u=-1732584194,d=271733878,p=0;p<n.length;p++)
                n[p]=16711935&(n[p]<<8|n[p]>>>24)|4278255360&(n[p]<<24|n[p]>>>8);n[e>>>5]|=128<<e%32,n[14+(64+e>>>9<<4)]=e;var f=_ff,m=_gg,h=_hh,v=_ii;for(p=0;p<n.length;p+=16){var g=l,y=c,b=u,w=d;l=f(l,c,u,d,n[p+0],7,-680876936),d=f(d,l,c,u,n[p+1],12,-389564586),u=f(u,d,l,c,n[p+2],17,606105819),c=f(c,u,d,l,n[p+3],22,-1044525330);l=f(l,c,u,d,n[p+4],7,-176418897),d=f(d,l,c,u,n[p+5],12,1200080426),u=f(u,d,l,c,n[p+6],17,-1473231341),c=f(c,u,d,l,n[p+7],22,-45705983),l=f(l,c,u,d,n[p+8],7,1770035416),d=f(d,l,c,u,n[p+9],12,-1958414417),u=f(u,d,l,c,n[p+10],17,-42063),c=f(c,u,d,l,n[p+11],22,-1990404162),l=f(l,c,u,d,n[p+12],7,1804603682),d=f(d,l,c,u,n[p+13],12,-40341101),u=f(u,d,l,c,n[p+14],17,-1502002290),l=m(l,c=f(c,u,d,l,n[p+15],22,1236535329),u,d,n[p+1],5,-165796510),d=m(d,l,c,u,n[p+6],9,-1069501632),u=m(u,d,l,c,n[p+11],14,643717713),c=m(c,u,d,l,n[p+0],20,-373897302),l=m(l,c,u,d,n[p+5],5,-701558691),d=m(d,l,c,u,n[p+10],9,38016083),u=m(u,d,l,c,n[p+15],14,-660478335),c=m(c,u,d,l,n[p+4],20,-405537848),l=m(l,c,u,d,n[p+9],5,568446438),d=m(d,l,c,u,n[p+14],9,-1019803690),u=m(u,d,l,c,n[p+3],14,-187363961),c=m(c,u,d,l,n[p+8],20,1163531501),l=m(l,c,u,d,n[p+13],5,-1444681467),d=m(d,l,c,u,n[p+2],9,-51403784),u=m(u,d,l,c,n[p+7],14,1735328473),l=h(l,c=m(c,u,d,l,n[p+12],20,-1926607734),u,d,n[p+5],4,-378558),d=h(d,l,c,u,n[p+8],11,-2022574463),u=h(u,d,l,c,n[p+11],16,1839030562),c=h(c,u,d,l,n[p+14],23,-35309556),l=h(l,c,u,d,n[p+1],4,-1530992060),d=h(d,l,c,u,n[p+4],11,1272893353),u=h(u,d,l,c,n[p+7],16,-155497632),c=h(c,u,d,l,n[p+10],23,-1094730640),l=h(l,c,u,d,n[p+13],4,681279174),d=h(d,l,c,u,n[p+0],11,-358537222),u=h(u,d,l,c,n[p+3],16,-722521979),c=h(c,u,d,l,n[p+6],23,76029189),l=h(l,c,u,d,n[p+9],4,-640364487),d=h(d,l,c,u,n[p+12],11,-421815835),u=h(u,d,l,c,n[p+15],16,530742520),l=v(l,c=h(c,u,d,l,n[p+2],23,-995338651),u,d,n[p+0],6,-198630844),d=v(d,l,c,u,n[p+7],10,1126891415),u=v(u,d,l,c,n[p+14],15,-1416354905),c=v(c,u,d,l,n[p+5],21,-57434055),l=v(l,c,u,d,n[p+12],6,1700485571),d=v(d,l,c,u,n[p+3],10,-1894986606),u=v(u,d,l,c,n[p+10],15,-1051523),c=v(c,u,d,l,n[p+1],21,-2054922799),l=v(l,c,u,d,n[p+8],6,1873313359),d=v(d,l,c,u,n[p+15],10,-30611744),u=v(u,d,l,c,n[p+6],15,-1560198380),c=v(c,u,d,l,n[p+13],21,1309151649),l=v(l,c,u,d,n[p+4],6,-145523070),d=v(d,l,c,u,n[p+11],10,-1120210379),u=v(u,d,l,c,n[p+2],15,718787259),c=v(c,u,d,l,n[p+9],21,-343485551),l=l+g>>>0,c=c+y>>>0,u=u+b>>>0,d=d+w>>>0}
                return endian([l,c,u,d])}
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="uc" crpj="true" delegate="true">
        <url><![CDATA[uc\.cn/.*?ucIdwsg%22%3A%22(?<id>.*?)%22]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),like:(?<like>[^;]+)]]></content>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://pages.uc.cn/?uc_wx_page_name=WmHomeSubPageUser&uc_wx_used_dp=0&uc_biz_str=S:custom|C:full_screen&uc_wx_ver=0.18.0.0&uc_wx_downgrade=true#uc_wx_init_params%3D%7B%22subType%22%3A%22user%22%2C%22ucIdwsg%22%3A%22AAPPH%2FuKnjGCnth8s1Ksgwe2%22%2C%22tab%22%3A%22video%22%7D
                var url = window.external.url;
                var uid = url.match(/ucIdwsg%22%3A%22(.*?)%22/)[1];
                var ut = 'AAQuLl0WSFNXJwCIgccPZnizKN9OiLo2pkPjd5oIoq2jnA%3D%3D';
                var api_url = 'https://bigsubs-api.uc.cn/api/bigsubs_personal/frontpage?app=ucweb&sub_type=personal&ut=' + ut + '&col_cont_src=short_video&size=12&wg_uid=' + uid + '&max_pos=';
                var next_pos = (window.external.sp != '0') ? window.external.sp : '';
                var pidx = 0;
                var pmax = (window.external.sp != undefined) ? 19 : 199;
                var hasMore = true;
                var html = '', title = '';
                while (true) {
                    if (pidx > pmax)
                        break;
                    data = window.external.getHtmlCode(api_url + next_pos, url, 500);
                    if (data.indexOf('\"list\":[{') == -1) {
                        hasMore = false;
                        break;
                    }

                    //有些用户电脑上失败，报[object error]错误
                    //var jo = JSON.parse(data);
                    var jo = eval('(' + data + ')');
                    if (!title)
                        title = jo.data.author.author_name;
                    for (var i = 0; i <= jo.data.col_data.list.length - 1; i++) {
                        var item = jo.data.col_data.list[i].sku;
                        var thumbnail = item.videos[0].thumbnail;
                        var duration = item.videos[0].duration;
                        var video_url = item.share_url;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + duration + ',date:' + item._created_at + ',like:' + item.like + ';\r\n';
                    }
                    next_pos = jo.data.col_metadata.next_pos;
                    pidx++;
                }

                html = 'startPage:' + next_pos + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="lizhi" crpj="true">
        <url><![CDATA[lizhi\.fm/user/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li.*?<a\s+href="(?<url>[^"]+)"\s+title="(?<title>[^"]+).*?data-duration="(?<duration>[^"]+).*?aduioTime">(?<date>[^\s]+).*?</li>]]></content>
        <baseUrl><![CDATA[https://www.lizhi.fm]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.lizhi.fm/user/5296928/
                var title = this.document.getElementsByTagName('h1')[0].innerText;
                var base_url = window.external.url;
                if (base_url.indexOf('/p/') != -1)
                    base_url = url.substr(0, url.indexOf('/p/'));
                if (base_url[base_url.length - 1] != '/')
                    base_url += '/';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var page_url = base_url + 'p/' + p + '.html';
                    var data = window.external.getHtmlCode(page_url, window.external.url, 500);
                    if (data.indexOf('audioList fontYaHei js-audio-list') == -1)
                        break;

                    data = data.substring(data.indexOf('audioList fontYaHei js-audio-list') - 11, data.lastIndexOf('</ul>') + 6).trim();
                    html += '$' + data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="lizhi" crpj="true">
        <url><![CDATA[lizhi\.fm/vod/user/(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),play:(?<play>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://m.lizhi.fm/vod/user/5296928
                var title = document.getElementsByTagName('h3')[0].innerText;
                var uid = window.external.url.match(/user\/(\d+)/)[1];
                var cdnimg = document.head.innerHTML.match(/\"(\/\/cdnimg[^\"]+)\"/)[1];
                var api_url = 'https://www.lizhi.fm/api/user/audios/' + uid + '/';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p, window.external.url, 500);
                    if (data.indexOf('audios\":[{') == -1)
                        break;
                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.audios.length - 1; i++) {
                        var item = jo.audios[i];
                        var thumbnail = cdnimg + 'audio_cover/' + item.cover;
                        html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + (item.url || item.fixedLowPlayUrl) + '\",thumbnail:\"' + thumbnail + '\",duration:' + item.duration + ',play:' + item.stats.play + ',date:' + item.create_time + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xiangha" crpj="true">
        <url><![CDATA[xiangha\.com/share/userHome\?code=(?<id>\d+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)"]]></content>
        <jsCode><![CDATA[
            try {
                //https://m.xiangha.com/share/userHome?code=729943244210
                var title = document.getElementsByClassName('name').length != 0 ? document.getElementsByClassName('name')[0].innerText : document.title;
                var code = window.location.href.match(/code=([^&]+)/)[1];
                var api_url = 'https://m.xiangha.com/share/getNote?code=' + code + '&page=';
                var html = 'title:\"' + title + '\"$';
                var p = 1;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('list\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    //parse...
                    for (var i = 0; i <= jo.data.list.length - 1; i++) {
                        var item = jo.data.list[i];
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + item.url + '\",thumbnail:\"' + item.image.url + '\";';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="taobao" crpj="true" delegate="true">
        <url><![CDATA[taobao\.com/.*?/personal-homepage/.*?userId=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),like:(?<like>[^,]+),date:(?<date>[^;]+)]]></content>
        <ckSign><![CDATA[_m_h5_tk]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://m.tb.cn/h.5flaKdw?tk=C2hwdBEyONt -> ...
                //https://m.tb.cn/h.fOZ0E6a?sm=c84929 -> https://market.m.taobao.com/app/mtb/personal-homepage/pages/index/index.html?disableNav=YES&userId=wVq22W38L0HhWLZhkSCTAg%3D%3D&keyName=kc_lightspeed&source=share_from_home&sourceType=other&suid=bbaffe91-fb80-4c0f-94cf-71e47b2cc914&ut_sk=1.XvwJF%2FcLSX0DAESVkHgbftta_21646297_1643096281713.Copy.gerenzhuye_other_new&un=af3ff1fd3104659728b5e1fb31f54c83&share_crt_v=1&un_site=0&spm=a2159r.13376460.0.0&sp_tk=5ZKM5bCx5pe25Y+v5LuW5aW95b+D5a2m5Lul5Lya5pyJ&cpp=1&shareurl=true&short_name=h.fOZ0E6a&bxsign=scdafeZU7_6VbhITPJ2ePTBDEDzFZMk2_CtmJmtouyQ_hfywdynFzrzmL662IG-uk7FiARN6r9xc3TeLkVIuPZxujIUd4V3qVq5rnGge1RgKdvV6B-nK2A__qeQDybJEc1x&sm=c84929&app=chrome
                //为账号严之故，请求易失败... 短链接跳不过去，须复制电脑端浏览器链接解析
                var url = window.external.url;
                var uid = decodeURIComponent(url.match(/userId=([^&]+)/)[1]);
                var title = '未知', html = '';
                var cookie = window.external.getCookieEx('https://www.taobao.com', '_m_h5_tk', 2500) || window.external.getCookie('https://www.taobao.com');
                var token = (cookie.indexOf('_m_h5_tk') != -1) ? cookie.match(/_m_h5_tk=([^_]+)/)[1] : '';
                if (token) {
                    var app_key = 12574478;
                    var api_url = 'https://h5api.m.taobao.com/h5/mtop.taobao.maserati.guangguang.getpersonalheader/1.0/?jsv=2.6.1&appKey=' + app_key;
                    var d = '{\"source\":\"share_from_home\",\"type\":\"h5\",\"userId\":\"' + uid + '\",\"userIdString\":\"' + uid + '\",\"keyName\":\"kc_lightspeed\"}';
                    var t = Date.now();
                    var sign = window.external.md5(token + '&' + t + '&' + app_key + '&' + d);
                    api_url += '&t=' + t + '&sign=' + sign + '&v=1.0&api=mtop.taobao.maserati.guangguang.getPersonalHeader&preventFallback=true&type=jsonp&dataType=jsonp&callback=&data=' + encodeURIComponent(d);
                    var headers = 'Cookie: ' + cookie;
                    var data = window.external.getHtmlCodeEx(api_url, headers);
                    //title
                    if (data.indexOf('userNick') != -1)
                        title = data.match(/userNick\":\"([^\"]+)/)[1];

                    //content
                    var p = 1;
                    d = '{\"source\":\"share_from_home\",\"type\":\"h5\",\"contentFilter\":1,\"tab\":\"guess\",\"pageSize\":8,\"page\":' + p + ',\"needTab\":true,\"userId\":\"' + uid + '\",\"userIdString\":\"' + uid + '\",\"keyName\":\"kc_lightspeed\"}';
                    while (true) {
                        api_url = 'https://h5api.m.taobao.com/h5/mtop.taobao.maserati.guangguang.works/1.0/?jsv=2.6.1&appKey=' + app_key;
                        sign = window.external.md5(token + '&' + t + '&' + app_key + '&' + d);
                        api_url += '&t=' + t + '&sign=' + sign + '&v=1.0&api=mtop.taobao.maserati.guangguang.works&preventFallback=true&type=jsonp&callback=&data=' + encodeURIComponent(d);
                        data = window.external.getHtmlCodeEx(api_url, headers);
                        if (data.indexOf('feeds\":[{') == -1)
                            break;

                        data = data.substring(10, data.length - 1);
                        var jo = JSON.parse(data);
                        var feeds = jo.data.result.data.feeds;
                        var lt = 0;
                        for (var i = 0; i <= feeds.length - 1; i++) {
                            var feed = feeds[i];
                            if (i == feeds.length - 1)
                                lt = feed.publishTime;
                            //可能是图片...picList
                            if (!feed.videoList || feed.videoList.length == 0)
                                continue;
                            var video = feed.videoList[0];
                            html += 'v_title:\"' + feed.title.replace(/\"/g, '\'') + '\",video_url:\"' + video.url + '\",thumbnail:\"' + video.cover + '\",duration:' + video.duration + ',like:' + feed.likeCnt + ',date:' + feed.publishTime + ';\r\n';
                        }
                        p++;
                        d = '{\"source\":\"share_from_home\",\"type\":\"h5\",\"contentFilter\":1,\"tab\":\"guangguang\",\"pageSize\":8,\"page\":' + p + ',\"userId\":\"' + uid + '\",\"userIdString\":\"' + uid + '\",\"keyName\":\"kc_lightspeed\",\"lastTime\":\"' + lt + '\"}';
                    }
                }

                html = 'title:\"' + title + '\"$' + html + '$error=请在默认浏览器中或点击右下角[打开URL]打开链接登录TB账号并刷新页面，然后再试。$';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="taobao" crpj="true">
        <url><![CDATA[taobao\.com/learn\.htm\?.*?courseId=(?<id>[^&]+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://v.xue.taobao.com/learn.htm?spm=a220o.1000855.0.0.768b764dvgRZy3&courseId=135484
                var tlc = window.tx_learn_config;
                var title = tlc.course.title + ' ' + tlc.outline.chapters[0].title, html = '';
                var thumbnail = 'https:' + tlc.course.pic;
                var cid = tlc.course.courseId;
                var sections = tlc.outline.chapters[0].sections;
                for (var i = 0; i <= sections.length - 1; i++) {
                    var section = sections[i];
                    var video_url = 'http://v.xue.taobao.com/learn.htm?courseId=' + cid + '&sectionId=' + section.id + '&resourceId=' + section.resources[0].id;
                    html += 'v_title:\"' + section.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + section.lessonLengthStr + ';\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="jd" crpj="true">
        <url><![CDATA[jd\.com/content/dr_home.*?authorId=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://eco.m.jd.com/content/dr_home/index.html?authorId=575032
                var title = '', html = '';
                var headers = 'Content-Type: application/x-www-form-urlencoded\r\nReferer: https://eco.m.jd.com/\r\nUser-Agent: ' + navigator.userAgent;
                var api_url = 'https://api.m.jd.com/client.action/video_videoDetail?functionId=video_videoDetail&appid=dr_detail&body=';
                var uid = window.external.url.match(/authorId=([^&]+)/)[1];
                var body = '{\"authorId\":\"' + uid + '\",\"type\":2,\"modeid\":\"11\",\"offset\":\"\",\"monitorSource\":\"wh5Author\",\"playtype\":\"120\"}';
                while (true) {
                    var data = window.external.getPostResultEx(api_url + encodeURIComponent(body), '', headers);
                    if (data.indexOf('list\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    for (var i = 0; i <= jo.list.length - 1; i++) {
                        var item = jo.list[i];
                        if (!title)
                            title = item.authorName;
                        var pi = item.playInfo;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + pi.videoUrl + '\",thumbnail:\"' + pi.videoImg + '\",duration:' + pi.videoDuration + ',date:' + item.publishTime + ',play:' + item.pv + ';\r\n';
                    }
                    body = '{\"authorId\":\"' + uid + '\",\"type\":2,\"modeid\":\"11\",\"offset\":\"' + jo.offset + '\",\"monitorSource\":\"wh5Author\",\"playtype\":\"120\"}'
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="i275">
        <url><![CDATA[i275\.com/book/(?<id>\d+)\.html?]]></url>
        <title><![CDATA[<h1>([^<]+)]]></title>
        <content><![CDATA[(?is)<li>.*?a\s+href="(?<url>[^"]+)[^>]+>(?<title>[^<]+)]]></content>
        <baseUrl><![CDATA[https://i275.com]]></baseUrl>
    </item>
    <item domain="idaddy" crpj="true">
        <url><![CDATA[idaddy\.cn/share/show/(?<id>[^/\?]+)]]></url>
        <title><![CDATA[shareTitle\s+=\s+"([^"]+)"]]></title>
        <content><![CDATA[(?is)<li\s+id=.*?src="(?<url>[^"]+).*?h2>(?<title>[^<]+).*?font>(?<duration>[^<]+)]]></content>
        <jsCode><![CDATA[
            try {
                var lis = document.getElementsByTagName('li');
                for (var i = 0; i <= lis.length - 1; i++) {
                    var li = lis[i];
                    if (!li.id)
                        continue;
                    var audio = document.getElementById(li.dataset.id);
                    if (audio.src)
                        li.setAttribute('src', audio.src + '#.mp3');
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xuexi" crpj="true" delay="2500">
        <url><![CDATA[xuexi\.cn/.*?\?id=(?<id>[^&]+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //video
                //https://www.xuexi.cn/lgpage/detail/index.html?id=5752165322892414722
                var id = window.external.url.match(/id=([^&]+)/)[1];
                var title = (document.getElementsByClassName('album-text nowrap').length != 0) ? document.getElementsByClassName('album-text nowrap')[0].innerText : '';
                var html = '';
                var api_url = 'https://boot-source.xuexi.cn/data/app/' + id + '.js?callback=&_st=' + Date.now();
                var data = window.external.getHtmlCode(api_url, window.external.url);
                if (data.indexOf('video_storage_info') != -1) {
                    data = data.substring(9, data.length - 1);
                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.title;
                    //https://www.xuexi.cn/lgpage/detail/index.html?id=15229240325045865903 只一个，没sub_items
                    if (jo.videos) {
                        var video = jo.videos[0];
                        var thumbnail = video.thumbnails[video.thumbnails.length - 1].data[0].url;
                        var duration = video.video_meta_settings.play_length;
                        var video_url = video.video_storage_info[video.video_storage_info.length - 1].normal;
                        html += 'v_title:\"' + title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + duration + ',date:' + jo.publish_time + ';\r\n';
                    }
                    else {
                        for (var i = 0; i <= jo.sub_items.length - 1; i++) {
                            var item = jo.sub_items[i];
                            var video = item.videos[0];
                            var thumbnail = video.thumbnails[video.thumbnails.length - 1].data[0].url;
                            var duration = video.video_meta_settings.play_length;
                            var video_url = video.video_storage_info[video.video_storage_info.length - 1].normal;
                            html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + duration + ',date:' + item.publish_time + ';\r\n';
                        }
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xuexi" watchList="true" crpj="true" delay="2500">
        <url><![CDATA[xuexi\.cn/.*?item_id=(?<id>[^&]+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^;]+)]]></content>
        <jsCode><![CDATA[
            try {
                //audio
                //https://www.xuexi.cn/lgpage/detail/index.html?id=13937186260539611696&item_id=13937186260539611696
                //single video
                var id = window.external.url.match(/item_id=([^&]+)/)[1];
                var title = (document.getElementsByClassName('album-text nowrap').length != 0) ? document.getElementsByClassName('album-text nowrap')[0].innerText : '';
                var html = '';
                var api_url = 'https://boot-source.xuexi.cn/data/app/' + id + '.js?callback=&_st=' + Date.now();
                var data = window.external.getHtmlCode(api_url, window.external.url);
                if (data.indexOf('audio_storage_info') != -1) {
                    data = data.substring(9, data.length - 1);
                    var jo = JSON.parse(data);
                    if (!title)
                        title = jo.title;
                    for (var i = 0; i <= jo.sub_items.length - 1; i++) {
                        var item = jo.sub_items[i];
                        var audio = item.audios[0];
                        var thumbnail = audio.thumbnails[audio.thumbnails.length - 1].data[0].url;
                        var duration = audio.audio_storage_info[0].play_length;
                        var video_url = audio.audio_storage_info[0].url;
                        html += 'v_title:\"' + item.title.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + thumbnail + '\",duration:' + duration + ',date:' + item.publish_time + ';\r\n';
                    }
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="linecg" watchList="true">
        <url><![CDATA[linecg\.com/video/(?<id>play_\d+_\d+)\.html?]]></url>
        <title><![CDATA[video_title='([^']+)']]></title>
        <content><![CDATA[(?is)<a\s+href="\.\./(?<url>[^"]+)">\s+<div.*?<img[^>]+src="(?<thumbnail>[^"]+).*?<p\s+class="fl">(?<title>[^<]+)</p>]]></content>
        <baseUrl><![CDATA[https://www.linecg.com/]]></baseUrl>
    </item>
    <item domain="xianmijingzang">
        <url><![CDATA[xianmijingzang\.com/.*?subid/(?<id>[^/]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li[^>]+title="(?<title>[^"]+)[^>]+url="(?<url>[^"]+).*?icon11.png"><span>(?<duration>[^<]+)]]></content>
        <jsCode><![CDATA[
            try {
                //http://www.xianmijingzang.com/wap/tripitaka/id/43/subid/67/
                var title = document.getElementsByTagName('h3')[0].innerText;
                var html = 'title:\"' + title + '\"$';
                var menuid = document.body.innerHTML.match(/name=\"menuid\"[^>]+value=\"([^\"]+)/)[1];
                var pl = document.getElementsByClassName('list0006 mod-m')[0];
                var ul = pl.firstElementChild.nextElementSibling.firstElementChild;
                //http://www.xianmijingzang.com/wap/tibet/id/277/subid/484/
                if (!ul)
                    ul = pl.firstElementChild.nextElementSibling.nextElementSibling.firstElementChild;
                if (ul) {
                    for (var i = 0; i <= ul.childElementCount - 1; i++) {
                        var li = ul.childNodes[i];
                        if (li.id) {
                            var title = li.innerHTML.match(/<[a|b]>([^<]+)/)[1];
                            li.setAttribute('title', title);
                            var video_url = 'https://www.xianmijingzang.com/fojing/menuid=' + menuid + '&book=' + li.id;
                            li.setAttribute('url', video_url);
                        }
                    }
                    html += ul.innerHTML;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!--<item domain="pornhub">
        <url><![CDATA[pornhub\.com/pornstar/(?<id>[^/?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li\s+class="pcVideoListItem.*?<img[^>]+data-src\s*=\s*"(?<thumbnail>[^"]+).*?duration">(?<duration>[^<]+).*?href="/(?<url>[^"]+)"\s+title="(?<title>[^"]+).*?added">(?<date>[^<]*)]]></content>
        <baseUrl><![CDATA[https://www.pornhub.com/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://cn.pornhub.com/pornstar/angel-piaff
                //https://cn.pornhub.com/pornstar/amanda-lane
                //https://www.pornhub.com/pornstar/angel-emily
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"';
                var href = window.location.href;
                if (href.indexOf('?') == -1) {
                    var p = 1;
                    while (true) {
                        var url = href + '?page=' + p;
                        var data = window.external.getHtmlCode(url);
                        if (!data)
                            break;

                        data = data.substring(data.indexOf('<ul class=\"videos row-5-thumbs'), data.indexOf('nf-wrapper')).trim();
                        html += '$' + data;
                        p++;
                    }
                }
                else {
                    var data = window.external.getHtmlCode(href);
                    html += data.substring(data.indexOf('<ul class=\"videos row-5-thumbs'), data.indexOf('nf-wrapper')).trim();
                }

                document.head.innerHTML = '';
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="pornhub">
        <url><![CDATA[pornhub\.com/playlist/(?<id>[^/?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<li\s+class="pcVideoListItem.*?<img[^>]+data-src\s*=\s*"(?<thumbnail>[^"]+).*?duration">(?<duration>[^<]+).*?href="/(?<url>[^"]+)"\s+title="(?<title>[^"]+).*?added">(?<date>[^<]*)]]></content>
        <baseUrl><![CDATA[https://www.pornhub.com/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://cn.pornhub.com/playlist/163073692
                //https://www.pornhub.com/playlist/96273971
                var html = 'title:\"' + PLAYLIST_VIEW.title + '\"';
                var api_url = window.location.protocol + '//' + window.location.host + lazyloadUrl;
                var p = 1;
                while (true) {
                    var headers = 'User-Agent: ' + navigator.userAgent + '\r\nCookie: ' + document.cookie + '\r\nReferer: ' + window.location.href;
                    var data = window.external.getHtmlCodeEx(api_url + '&page=' + p, headers).trim();
                    if (!data)
                        break;

                    html += '$' + data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>-->
    <item domain="pornhub" delegate="true">
        <url><![CDATA[pornhub\.com/.*?search=(?<id>[^&]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<div\s+class="wrap.*?href="(?<url>[^"]+)"\s+title="(?<title>[^"]+).*?src="(?<thumbnail>[^"]+).*?duration">(?<duration>[^<]+).*?views"><var>(?<play>[^<]+).*?added">(?<date>[^<]+)]]></content>
        <baseUrl><![CDATA[https://www.pornhub.com]]></baseUrl>
        <startPage><![CDATA[startPage:([^,]+)]]></startPage>
        <hasMore><![CDATA[hasMore:([^,]+)]]></hasMore>
        <jsCode><![CDATA[
            try {
                //https://www.pornhub.com/video/search?search=interracial+bbc&p=homemade&o=mv
                var url = window.external.url;
                var title = '', html = '';
                var headers = 'User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36\r\nReferer: ' + url;
                if (url.indexOf('page=') == -1) {
                    var page_url = url + '&page=';
                    var p = parseInt(window.external.sp) || 1;
                    var pmax = (window.external.sp != undefined) ? 19 : 199;
                    var pidx = 0;
                    var hasMore = true;
                    while (true) {
                        if (pidx > pmax)
                            break;
                        var data = window.external.getHtmlCodeEx(page_url + p, headers, 200);
                        if (data.indexOf('id=\"videoSearchResult\"') == -1) {
                            hasMore = false;
                            break;
                        }

                        if (!title)
                            title = data.replace(/\n/g, '').match(/\"searchInput.*?value=\"([^\"]+)/)[1];
                        html += data.substring(data.indexOf('<ul id=\"videoSearchResult\"'), data.lastIndexOf('<div class=\"sectionWrapper\">'));
                        p++;
                        pidx++;
                    }
                    html = 'startPage:' + p + ',hasMore:' + hasMore + ',title:\"' + title + '\"$' + html;
                }
                else {
                    var data = window.external.getHtmlCodeEx(url, headers);
                    title = data.replace(/\n/g, '').match(/\"searchInput.*?value=\"([^\"]+)/)[1];
                    html += data.substring(data.indexOf('<ul id=\"videoSearchResult\"'), data.lastIndexOf('<div class=\"sectionWrapper\">'));
                    html = 'title:\"' + title + '\"$' + html;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="pornhub">
        <url><![CDATA[pornhubpremium\.com/pornstar/(?<id>[^/?]+)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<div\s+class="wrap\s+hdtPremium.*?href="(?<url>[^"]+).*?data-thumb_url\s+=\s+"(?<thumbnail>[^"]+).*?title="(?<title>[^"]+).*?duration">(?<duration>[^<]+).*?views"><var>(?<play>[^<]+)]]></content>
        <baseUrl><![CDATA[https://cn.pornhubpremium.com]]></baseUrl>
        <ckSign><![CDATA[pp-sid]]></ckSign>
        <jsCode><![CDATA[
            try {
                //https://cn.pornhubpremium.com/pornstar/lana-rhoades/videos/premium
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerText : document.title;
                var url = window.external.url;
                var cookie = window.external.getCookieEx(url, 'il', 2500) ||  window.external.getCookie(url) || document.cookie;
                var headers = 'Cookie: ' + cookie + '\r\nUser-Agent: ' + navigator.userAgent + '\r\nReferer: ' + url;
                var api_url = 'https://cn.pornhubpremium.com/pornstar/lana-rhoades/videos/premium?page='
                var p = 1;
                var html = 'title:\"' + title + '\"$';
                while (true) {
                    var data = window.external.getHtmlCodeEx(api_url + p, headers);
                    data = data.substring(data.indexOf('profileVids'), data.indexOf('nf-wrapper'));
                    if (data.indexOf('pcVideoListItem') == -1)
                        break;

                    html += '\r\n' + data;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="xvideos" crpj="true">
        <url><![CDATA[xvideos\.com/(?:profiles|(?:\w+-)?channels)/(?<id>[^#]+)(?:$|#_tabVideos)]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://www.xvideos.com/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://www.xvideos.com/profiles/blackforyellow
                //https://www.xvideos.com/profiles/blackforyellow#_tabVideos,videos-best
                //https://www.xvideos.com/profiles/blackforyellow#_tabVideos,videos-best,page-2
                //https://www.xvideos.com/channels/tiny-4k
                //https://www.xvideos.com/amateur-channels/sexdollfun
                var html = 'title:\"' + window.xv.conf.data.user.username + '\"$';
                var api_url = window.external.url;
                if (api_url.indexOf('#') != -1)
                    api_url = window.external.url.substr(0, api_url.indexOf('#'));
                api_url += '/videos/best/';
                var p = 0;
                while (true) {
                    var data = window.external.getHtmlCode(api_url + p);
                    if (data.indexOf('videos\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    //parse...
                    for (var i = 0; i <= jo.videos.length - 1; i++) {
                        var item = jo.videos[i];
                        var video_url = 'video' + item.u.substr(item.u.indexOf(item.p) + item.p.length + 1);
                        html += 'v_title:\"' + item.t.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\",thumbnail:\"' + item.i + '\",duration:' + item.d + ',play:' + item.n + ';\r\n';
                    }
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!--<item domain="xvideos">
        <url><![CDATA[xvideos\.com/[^/]+/(?<id>\d+)]]></url>
        <title><![CDATA[<title>([^>]+)\s+-\s+[^<]+</title>]]></title>
        <content><![CDATA[(?is)<div\s+id="video_.*?href="(?<url>[^"]+).*?<img[^>]+data-src="(?<thumbnail>[^"]+).*?title="(?<title>[^"]+)]]></content>
        <baseUrl><![CDATA[https://www.xvideos.com]]></baseUrl>
        <headers><![CDATA[User-Agent: None]]></headers>
    </item>-->
    <item domain="hanime" crpj="true" delay="1500" delegate="true">
        <url><![CDATA[hanime\d*\.\w+/search.*?genre=([^&]+)]]></url>
        <title><![CDATA[id="genre"[^>]+value="([^"]+)"]]></title>
        <content><![CDATA[(?is)<div\s+class="load-more-wrapper.*?href="(?<url>[^"]+).*?title="(?<title>[^"]+).*?(?:<div[^>]+>\s*(?<duration>\d+:[^<]+).*?)?myBar.*?•\s+(?<date>[^<]+)]]></content>
        <jsCode><![CDATA[
            try {
                var headers = 'User-Agent: ' + navigator.userAgent;
                var html = window.external.getHtmlCodeEx(window.external.url, headers);
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <!--https://www.viu.com/ott/hk/zh-hk/vod/342586/%E7%9B%9B%E5%94%90%E5%B9%BB%E5%A4%9C-->
    <item domain="viu" watchList="true">
        <url><![CDATA[viu\.com/.*/vod/\d+/(?<id>[^/#]+)]]></url>
        <title><![CDATA[og:title"\s*content="([^"]+)]]></title>
        <content><![CDATA[(?is)<li\s+data-id.*?href="(?<url>[^"]+)"\s+title="(?<describe>[^"]+).*?middle">\s*(?<title>[^\s<]+)]]></content>
        <baseUrl><![CDATA[https://www.viu.com]]></baseUrl>
    </item>
    <item domain="pervertslut">
        <url><![CDATA[pervertslut\.com/(?<id>[^/]+)/(?:\d+/)?$]]></url>
        <title><![CDATA[<title>([^>]+)\s+/\s+[^<]+</title>]]></title>
        <content><![CDATA[(?is)<div\s+class="item.*?href="(?<url>[^"]+).*?title="(?<title>[^"]+).*?src="(?<thumbnail>[^"]+).*?duration-overlay">(?<duration>[^<]+)</div>]]></content>
    </item>
    <item domain="sciencedirect">
        <url><![CDATA[sciencedirect\.com/[^/]+/[^/]+/.*?/(?<id>\w+)$]]></url>
        <title><![CDATA[<title[^>]+>([^<]+)\s+\|\s+ScienceDirect\.com</title>]]></title>
        <content><![CDATA[(?is)<li.*?js-article-title">(?<title>[^<]+).*?href="/(?<url>[^"]+).*?</li>]]></content>
        <baseUrl><![CDATA[https://www.sciencedirect.com/]]></baseUrl>
    </item>
    <item domain="afreecatv" crpj="true" delegate="true">
        <url><![CDATA[afreecatv\.com/(?<id>[^/]+)/vods]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)",thumbnail:"(?<thumbnail>[^"]+)",duration:(?<duration>[^,]+),date:(?<date>[^,]+),play:(?<play>[^;]+)]]></content>
        <baseUrl><![CDATA[https://vod.afreecatv.com/player/]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //https://bj.afreecatv.com/wpejrve/vods?page=3
                //https://bj.afreecatv.com/wpejrve/vods
                //https://bj.afreecatv.com/v2nara/vods/user?page=2
                var url = window.external.url;
                var uid = url.match(/([^/]+)\/vods/)[1];
                var title = '', html = '';
                var p = (url.indexOf('page=') == -1) ? 1 : url.match(/page=([^&]+)/)[1];
                while (true) {
                    var api_url = 'https://bjapi.afreecatv.com/api/' + uid + '/vods/all?per_page=20&page=' + p;
                    if (url.indexOf('user') != -1)
                        api_url = api_url.replace('/all', '/user');
                    var data = window.external.getHtmlCode(api_url, url);
                    if (data.indexOf('data\":[{') == -1)
                        break;

                    var jo = JSON.parse(data);
                    //parse...
                    for (var i = 0; i <= jo.data.length - 1; i++) {
                        var item = jo.data[i];
                        if (!title)
                            title = item.user_nick;
                         var duration = item.ucc.total_file_duration / 1000;
                        html += 'v_title:\"' + item.title_name.replace(/\"/g, '\'') + '\",video_url:\"' + item.title_no + '\",thumbnail:\"' + item.ucc.thumb + '\",duration:' + duration + ',date:' + item.reg_date + ',play:' + item.count.read_cnt + ';\r\n';
                    }
                    if (url.indexOf('page=') != -1)
                        break;
                    p++;
                }

                html = 'title:\"' + title + '\"$' + html;
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="mafengwo" crpj="true" delay="4500">
        <url><![CDATA[mafengwo\.cn/(?:u/(?<id>\d+)|user/profile.*?uid=(?<id>\d+))]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)<a\s+href="(?<url>[^"]+)[^>]+title="(?<title>[^"]+).*?em>(?<play>[^/]+).*?time">(?<date>[^<]+)]]></content>
        <baseUrl><![CDATA[http://www.mafengwo.cn]]></baseUrl>
        <jsCode><![CDATA[
            try {
                //http://www.mafengwo.cn/u/41499954/note.html
                //https://m.mafengwo.cn/user/profile/weng?uid=41499954
                var title = document.title;
                if (title.indexOf('的') != -1)
                    title = title.substring(0, title.indexOf('的'));
                title += '的游记';
                var html = 'title:\"' + title + '\"$';
                var url = window.external.url
                var uid =  (url.indexOf('uid=') != -1) ? url.match(/uid=([^&]+)/)[1] : url.match(/u\/([^/]+)/)[1];
                var p = 1;
                while (true) {
                    var args = 'sAction=getArticle&iPage=' + p + '&iUid=' + uid;
                    var data = window.external.getPostResult('http://www.mafengwo.cn/wo/ajax_post.php', args, 'application/x-www-form-urlencoded; charset=UTF-8');
                    if (data.indexOf('notes_list') == -1)
                        break;

                    var jo = JSON.parse(data);
                    html += jo.payload.html;
                    p++;
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="4kvm" crpj="true">
        <url><![CDATA[4kvm\.com/seasons/(?<id>\w+)$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.4kvm.com/seasons/santij
                var title = (document.getElementsByTagName('h1').length != 0) ? document.getElementsByTagName('h1')[0].innerText : document.title;
                var html = 'title:\"' + title + '\"$';
                var js = document.body.innerHTML.match(/videourls:\[(.*?\])\]/)[1];
                var jo = JSON.parse(js);
                for (var i = 0; i <= jo.length - 1; i++) {
                    var item = jo[i];
                    var video_url = window.external.url + '?ep=' + item.url;
                    html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\";\r\n';
                }
                window.external.receive(html);
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="4kvm" crpj="true" redirect="true">
        <url><![CDATA[4kvm\.com/tvshows/(?<id>\w+)$]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.4kvm.com/tvshows/santij
                //https://www.4kvm.com/seasons/td -> https://www.4kvm.com/tvshows/tiandao
                var pl_url = document.getElementById('seasons').innerHTML.match(/href=\"([^\"]+)/)[1];
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="mddcloud" crpj="true" delay="4500" delegate="true">
        <url><![CDATA[mddcloud\.com\.cn/video/(?<id>[^.]+)\.html(?:\?tabUuid=[^&]+)?$]]></url>
        <title><![CDATA[title:"([^"]+)]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)]]></content>
        <exjs><![CDATA[https://cdn.jsdelivr.net/gh/btjson/player@latest/aes.js]]></exjs>
        <jsCode><![CDATA[
            try {
                //https://www.mddcloud.com.cn/video/ff8080817d318804017d5bcb586e2c7e.html?tabUuid=ff8080818161438101816565ccb10331
                //https://www.mddcloud.com.cn/video/e0daed47e0b211ecae9d6c92bf46f25e.html
                //https://mddcloud.com.cn/video/feeb3656123e11edae9d6c92bf46f25e.html
                for (var i = 0; i <= 2; i++) {
                    if (CryptoJS)
                        break;
                    delay(4500);
                }
                var url = window.external.url;
                var vuid = url.match(/video\/([^.]+)/)[1];
                var cookie = window.external.getCookieEx('https://mddcloud.com.cn/', 'wtkofmdd', 2500);
                //...multi wtkofmdd
                if (cookie.indexOf('wtkofmdd') != -1)
                    cookie = cookie.substring(cookie.lastIndexOf('wtkofmdd'));
                var wt = (cookie.indexOf('wtkofmdd') != -1) ? cookie.match(/wtkofmdd=([^;]+)/)[1] : '';
                //vod info
                var t = Date.now();
                var sk = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJsb2dpbk5hbWUiOiJleUpoYkdjaU9pSklVekkxTmlJc0luUjVjQ0k2SWtwWFZDSjkuZXlKc2IyZHBiazVoYldVaU9pSmhJaXdpWlhod0lqb3hOakkzTURrME1qZzJMQ0oxYzJWeVNXUWlPaUpoSW4wLkczSkpyb2t6Y0c0ejlZOU1KM0NmaFRGcjFKa3NvMjFaeHc3VzRCRVJvZWsiLCJleHAiOjE2MjcxMTA3MTgsInVzZXJJZCI6ImEifQ.68cMg14UgJ-A_eFxuVo8YA8H-PeDzM8d4jngPcpr2K8';
                var l = window.external.md5((wt || t) + sk).substring(0, 16);
                var d = '{\"isSactionList\":1,\"vodUuid\":\"' + vuid + '\"}';
                var ed = encrypt(d, l);
                var c = 'encryptData=' + ed + '&';
                var pk = '8a4af424bd714be5b2baacbe3cf5bbbe0131effeb92e99356ef1662884558f28';
                var n = wt ? 'webToken:'.concat(wt, '|time:').concat(t, '|privateKey:').concat(pk, '|data:').concat(c) : 'time:'.concat(t, '|privateKey:').concat(pk, '|data:').concat(c);
                var sn = window.external.md5(n);
                var args = '{\"time\":' + t + ',\"sign\":\"' + sn + '\",\"data\":{\"encryptData\":\"' + ed + '\"},\"webToken\":\"' + wt + '\",\"reqEncrypt\":1,\"respEncrypt\":1}';
                var headers = 'Content-Type: application/json;charset=UTF-8\r\nReferer: https://mddcloud.com.cn/\r\nCookie: ' + cookie;
                var api_url = 'https://www.mddcloud.com.cn/oweApi/vod/simpleVodInfo';
                var data = window.external.getPostResultEx(api_url, args, headers);
                var jo = JSON.parse(data);
                if (jo.data.vodSactionList)
                    jo = jo.data;
                else {
                    data = decrypt(jo.data.encryptData, l);
                    jo = JSON.parse(data);
                }
                var title = jo.name, html = 'title:\"' + title + '\"$'
                for (var i = 0; i <= jo.vodSactionList.length - 1; i++) {
                    var item = jo.vodSactionList[i];
                    var video_url = url + '&num=' + item.num;
                    html += 'v_title:\"' + item.name.replace(/\"/g, '\'') + '\",video_url:\"' + video_url + '\";\r\n';
                }
                window.external.receive(html);

                //...
                function encrypt(data, t) {
                    var l = CryptoJS;
                    var e = l.enc.Utf8.parse(data);
                    return t = l.enc.Utf8.parse(t),
                    l.AES.encrypt(e, t, {
                        mode: l.mode.ECB,
                        padding: l.pad.Pkcs7
                    }).toString()
                }

                function decrypt(t, e) {
                    var l = CryptoJS;
                    return e = l.enc.Utf8.parse(e),
                    l.AES.decrypt(t, e, {
                        mode: l.mode.ECB,
                        padding: l.pad.Pkcs7
                    }).toString(l.enc.Utf8).toString();
                }
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="mddcloud" crpj="true" watchList="true" redirect="true" delegate="true">
        <url><![CDATA[mddcloud\.com\.cn/video/(?<id>[^.]+)\.html.*?num=\d+]]></url>
        <title><![CDATA[]]></title>
        <content><![CDATA[(?is)v_title:"(?<title>[^"]+)",video_url:"(?<url>[^"]+)]]></content>
        <jsCode><![CDATA[
            try {
                //https://www.mddcloud.com.cn/video/ff8080817d318804017d5bcb586e2c7e.html?tabUuid=ff8080818161438101816565ccb10331&num=1
                //https://www.mddcloud.com.cn/video/ff808081615583460161559fef940035.html?num=4
                var pl_url = window.external.url.match(/http.*?\.html/)[0];
                document.body.innerHTML = 'cr_playlist_url=' + pl_url + '$';
            }
            catch (ex) {
            }
        ]]></jsCode>
    </item>
    <item domain="leleketang">
        <url><![CDATA[leleketang\.com/.*?/\w+\d+-([0-9-]+)\.shtml?]]></url>
        <title><![CDATA["cv_name ellipsis"\s+title="([^"]+)"]]></title>
        <content><![CDATA[(?is)<div\s+class="cv_item.*?href="(?<url>[^"]+).*?src="(?<thumbnail>[^"]+).*?title="(?<title>[^"]+)]]></content>
        <baseUrl><![CDATA[(https?.*?/)\w+\d+]]></baseUrl>
    </item>
</patterns>